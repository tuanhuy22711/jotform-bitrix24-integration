2025-08-16 15:50:13 [INFO]: HTTP Request | {"method":"POST","url":"/webhook/jotform","ip":"34.136.141.125","statusCode":200,"duration":"undefinedms","contentLength":"3502"}
2025-08-16 15:50:13 [INFO]: === WEBHOOK REQUEST DEBUG === | {"method":"POST","url":"/webhook/jotform","headers":{"host":"mart-guitars-educated-idea.trycloudflare.com","content-length":"3502","accept":"*/*","accept-encoding":"gzip","cdn-loop":"cloudflare; loops=1; subreqs=1","cf-connecting-ip":"34.136.141.125","cf-ew-via":"15","cf-ipcountry":"US","cf-ray":"96ffaecfb1f01090-HKG","cf-visitor":"{\"scheme\":\"https\"}","cf-warp-tag-id":"60b5b5b8-3782-413e-8ff8-09da4e1e0f82","cf-worker":"trycloudflare.com","connection":"keep-alive","content-type":"multipart/form-data; boundary=------------------------HzxQuD021nK6YX6WdDGoPt","newrelic":"eyJ2IjpbMCwxXSwiZCI6eyJ0eSI6IkFwcCIsImFjIjoiNjkxNjIwIiwiYXAiOiIxMzE0NDY2Njk5IiwiaWQiOiJjOTY2ZTQ5ZGIwZTM5MjcxIiwidHIiOiIxMDkwY2RjZTNkOTA1ZDU2IiwidHgiOiIxMDkwY2RjZTNkOTA1ZDU2IiwicHIiOjEuMDk3NjcsInNhIjp0cnVlLCJ0aSI6MTc1NTMzNDIxMjkzMH19","traceparent":"00-00000000000000001090cdce3d905d56-c966e49db0e39271-01","tracestate":"691620@nr=0-0-691620-1314466699-c966e49db0e39271-1090cdce3d905d56-1-1.097674-1755334212930","x-forwarded-for":"34.136.141.125","x-forwarded-proto":"https"},"body":{},"rawBody":"{}","query":{},"params":{}}
2025-08-16 15:50:13 [INFO]: Webhook processed: Jotform -> submission | {"source":"Jotform","action":"submission","dataKeys":[]}
2025-08-16 15:50:13 [ERROR]: Invalid webhook payload | {"errors":["Missing submission ID"],"body":{}}
2025-08-16 15:50:13 [INFO]: Request completed | {"method":"POST","url":"/webhook/jotform","statusCode":400,"duration":6,"ip":"34.136.141.125"}
2025-08-16 15:50:41 [INFO]: HTTP Request | {"method":"POST","url":"/webhook/jotform","ip":"118.70.98.152","statusCode":200,"duration":"undefinedms","userAgent":"PostmanRuntime/7.45.0","contentLength":"0"}
2025-08-16 15:50:41 [INFO]: === WEBHOOK REQUEST DEBUG === | {"method":"POST","url":"/webhook/jotform","headers":{"host":"mart-guitars-educated-idea.trycloudflare.com","user-agent":"PostmanRuntime/7.45.0","content-length":"0","accept":"*/*","accept-encoding":"gzip","cdn-loop":"cloudflare; loops=1; subreqs=1","cf-connecting-ip":"118.70.98.152","cf-ew-via":"15","cf-ipcountry":"VN","cf-ray":"96ffaf8105a10df8-HKG","cf-visitor":"{\"scheme\":\"https\"}","cf-warp-tag-id":"60b5b5b8-3782-413e-8ff8-09da4e1e0f82","cf-worker":"trycloudflare.com","connection":"keep-alive","postman-token":"e03330bc-8244-4474-baf1-bd4bf1ce45bc","x-forwarded-for":"118.70.98.152","x-forwarded-proto":"https"},"body":{},"rawBody":"{}","query":{},"params":{}}
2025-08-16 15:50:41 [INFO]: Webhook processed: Jotform -> submission | {"source":"Jotform","action":"submission","dataKeys":[]}
2025-08-16 15:50:41 [ERROR]: Invalid webhook payload | {"errors":["Missing submission ID"],"body":{}}
2025-08-16 15:50:41 [INFO]: Request completed | {"method":"POST","url":"/webhook/jotform","statusCode":400,"duration":4,"ip":"118.70.98.152","userAgent":"PostmanRuntime/7.45.0"}
2025-08-16 15:51:03 [INFO]: HTTP Request | {"method":"POST","url":"/webhook/jotform","ip":"34.136.141.125","statusCode":200,"duration":"undefinedms","contentLength":"3502"}
2025-08-16 15:51:03 [INFO]: === WEBHOOK REQUEST DEBUG === | {"method":"POST","url":"/webhook/jotform","headers":{"host":"mart-guitars-educated-idea.trycloudflare.com","content-length":"3502","accept":"*/*","accept-encoding":"gzip","cdn-loop":"cloudflare; loops=1; subreqs=1","cf-connecting-ip":"34.136.141.125","cf-ew-via":"15","cf-ipcountry":"US","cf-ray":"96ffb00aa6fbb266-HKG","cf-visitor":"{\"scheme\":\"https\"}","cf-warp-tag-id":"60b5b5b8-3782-413e-8ff8-09da4e1e0f82","cf-worker":"trycloudflare.com","connection":"keep-alive","content-type":"multipart/form-data; boundary=------------------------kyQJBTITPJb6WUOzPjx3x7","newrelic":"eyJ2IjpbMCwxXSwiZCI6eyJ0eSI6IkFwcCIsImFjIjoiNjkxNjIwIiwiYXAiOiIxMzE0NDY2Njk5IiwiaWQiOiIxNTUxNjgzMGEyMWE2ZTI3IiwidHIiOiI1NzkwM2I1NGRkNDE5YTVlIiwidHgiOiI1NzkwM2I1NGRkNDE5YTVlIiwicHIiOjEuMTAxODMsInNhIjp0cnVlLCJ0aSI6MTc1NTMzNDI2MzQwM319","traceparent":"00-000000000000000057903b54dd419a5e-15516830a21a6e27-01","tracestate":"691620@nr=0-0-691620-1314466699-15516830a21a6e27-57903b54dd419a5e-1-1.101828-1755334263403","x-forwarded-for":"34.136.141.125","x-forwarded-proto":"https"},"body":{},"rawBody":"{}","query":{},"params":{}}
2025-08-16 15:51:03 [INFO]: Webhook processed: Jotform -> submission | {"source":"Jotform","action":"submission","dataKeys":[]}
2025-08-16 15:51:03 [ERROR]: Invalid webhook payload | {"errors":["Missing submission ID"],"body":{}}
2025-08-16 15:51:03 [INFO]: Request completed | {"method":"POST","url":"/webhook/jotform","statusCode":400,"duration":2,"ip":"34.136.141.125"}
2025-08-16 15:58:00 [INFO]: Received SIGINT, starting graceful shutdown...
2025-08-16 15:59:53 [INFO]: Middleware setup completed
2025-08-16 15:59:53 [INFO]: Development test routes enabled
2025-08-16 15:59:53 [INFO]: Routes setup completed
2025-08-16 15:59:53 [INFO]: Error handling setup completed
2025-08-16 15:59:53 [INFO]: Validating configuration...
2025-08-16 15:59:53 [INFO]: Testing Jotform connection...
2025-08-16 15:59:53 [INFO]: Jotform API request | {"method":"GET","url":"/form/your_form_id_here"}
2025-08-16 15:59:54 [ERROR]: Jotform API response error Request failed with status code 404 | {"status":404,"url":"/form/your_form_id_here","data":{"responseCode":404,"message":"Requested URL (/form/your_form_id_here) is not available!","content":"","duration":"29.48ms","info":"https://api.jotform.com/docs"}}
2025-08-16 15:59:54 [ERROR]: Failed to get form from Jotform | {"formId":"your_form_id_here","error":"Request failed with status code 404"}
AxiosError: Request failed with status code 404
    at settle (/Users/trantuanhuy/api/jotform-bitrix24-integration/node_modules/axios/dist/node/axios.cjs:2090:12)
    at Unzip.handleStreamEnd (/Users/trantuanhuy/api/jotform-bitrix24-integration/node_modules/axios/dist/node/axios.cjs:3207:11)
    at Unzip.emit (node:events:519:35)
    at endReadableNT (node:internal/streams/readable:1696:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (/Users/trantuanhuy/api/jotform-bitrix24-integration/node_modules/axios/dist/node/axios.cjs:4317:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async JotformService.getForm (/Users/trantuanhuy/api/jotform-bitrix24-integration/src/services/jotformService.js:67:24)
    at async JotformService.validateConnection (/Users/trantuanhuy/api/jotform-bitrix24-integration/src/services/jotformService.js:244:22)
    at async Server.validateConfiguration (/Users/trantuanhuy/api/jotform-bitrix24-integration/src/server.js:220:29)
    at async Server.start (/Users/trantuanhuy/api/jotform-bitrix24-integration/src/server.js:158:7)
2025-08-16 15:59:54 [WARN]: Jotform connection test failed | {"error":"Request failed with status code 404"}
2025-08-16 15:59:54 [INFO]: Testing Bitrix24 connection...
2025-08-16 15:59:54 [INFO]: Bitrix24 API request | {"method":"GET","url":"your_bitrix24_webhook_url_here/crm.contact.fields.json","dataKeys":[]}
2025-08-16 15:59:54 [ERROR]: Bitrix24 API response error Invalid URL | {}
2025-08-16 15:59:54 [ERROR]: Bitrix24 connection validation failed | {"error":"Invalid URL"}
2025-08-16 15:59:54 [WARN]: Bitrix24 connection test failed | {"error":"Connection validation failed"}
2025-08-16 15:59:54 [INFO]: Configuration validation completed
2025-08-16 15:59:54 [INFO]: Server started successfully | {"port":"3000","env":"development","pid":74863,"nodeVersion":"v23.10.0"}
2025-08-16 16:00:45 [INFO]: HTTP Request | {"method":"POST","url":"/webhook/jotform","ip":"34.136.141.125","statusCode":200,"duration":"undefinedms","contentLength":"3536"}
2025-08-16 16:00:45 [INFO]: === WEBHOOK REQUEST DEBUG === | {"method":"POST","url":"/webhook/jotform","headers":{"host":"mart-guitars-educated-idea.trycloudflare.com","content-length":"3536","accept":"*/*","accept-encoding":"gzip","cdn-loop":"cloudflare; loops=1; subreqs=1","cf-connecting-ip":"34.136.141.125","cf-ew-via":"15","cf-ipcountry":"US","cf-ray":"96ffbe3db3e73ef3-HKG","cf-visitor":"{\"scheme\":\"https\"}","cf-warp-tag-id":"60b5b5b8-3782-413e-8ff8-09da4e1e0f82","cf-worker":"trycloudflare.com","connection":"keep-alive","content-type":"multipart/form-data; boundary=------------------------6hXTErZafT60SkhXjgwdE0","newrelic":"eyJ2IjpbMCwxXSwiZCI6eyJ0eSI6IkFwcCIsImFjIjoiNjkxNjIwIiwiYXAiOiIxMzE0NDY2Njk5IiwiaWQiOiJjMGJlM2M5NWFhNDAyZDJjIiwidHIiOiIxZDNkYTNkMGMwNjM4ZDljIiwidHgiOiIxZDNkYTNkMGMwNjM4ZDljIiwicHIiOjEuOTk2MTQsInNhIjp0cnVlLCJ0aSI6MTc1NTMzNDg0NDk0Nn19","traceparent":"00-00000000000000001d3da3d0c0638d9c-c0be3c95aa402d2c-01","tracestate":"691620@nr=0-0-691620-1314466699-c0be3c95aa402d2c-1d3da3d0c0638d9c-1-1.996144-1755334844946","x-forwarded-for":"34.136.141.125","x-forwarded-proto":"https"},"body":{"action":"","webhookURL":"https://mart-guitars-educated-idea.trycloudflare.com/webhook/jotform","username":"tuanhuy227","formID":"252271255656055","type":"WEB","customParams":"","product":"","formTitle":"Form","customTitle":"","submissionID":"6311440442516407077","event":"","documentID":"","teamID":"","subject":"","isSilent":"","customBody":"","rawRequest":"{\"slug\":\"submit\\/252271255656055\",\"jsExecutionTracker\":\"build-date-1755334321381=>init-started:1755334321593=>validator-called:1755334321595=>validator-mounted-false:1755334321595=>init-complete:1755334321596=>interval-complete:1755334342333=>onsubmit-fired:1755334843524=>observerSubmitHandler_received-submit-event:1755334843529=>submit-validation-passed:1755334843534=>observerSubmitHandler_validation-passed-submitting-form:1755334843538\",\"submitSource\":\"form\",\"submitDate\":\"1755334843538\",\"buildDate\":\"1755334321381\",\"uploadServerUrl\":\"https:\\/\\/upload.jotform.com\\/upload\",\"eventObserver\":\"1\",\"q3_name\":{\"first\":\"Tr\\u1ea7n\",\"last\":\"Huy\"},\"q4_phoneNumber\":{\"full\":\"(097) 828-1697\"},\"q5_email\":\"tuanhuy227@gmail.com\",\"event_id\":\"1755334321593_252271255656055_gTAshkM\",\"timeToSubmit\":\"20\",\"validatedNewRequiredFieldIDs\":\"{\\\"new\\\":1,\\\"id_3\\\":\\\"Hu\\\",\\\"id_4\\\":\\\"(0\\\",\\\"id_5\\\":\\\"tu\\\"}\",\"path\":\"\\/submit\\/252271255656055\"}","fromTable":"","appID":"","pretty":"Name:Trần Huy, Phone Number:(097) 828-1697, Email:tuanhuy227@gmail.com","unread":"","parent":"","ip":"118.70.98.152"},"formData":{"action":"","webhookURL":"https://mart-guitars-educated-idea.trycloudflare.com/webhook/jotform","username":"tuanhuy227","formID":"252271255656055","type":"WEB","customParams":"","product":"","formTitle":"Form","customTitle":"","submissionID":"6311440442516407077","event":"","documentID":"","teamID":"","subject":"","isSilent":"","customBody":"","rawRequest":"{\"slug\":\"submit\\/252271255656055\",\"jsExecutionTracker\":\"build-date-1755334321381=>init-started:1755334321593=>validator-called:1755334321595=>validator-mounted-false:1755334321595=>init-complete:1755334321596=>interval-complete:1755334342333=>onsubmit-fired:1755334843524=>observerSubmitHandler_received-submit-event:1755334843529=>submit-validation-passed:1755334843534=>observerSubmitHandler_validation-passed-submitting-form:1755334843538\",\"submitSource\":\"form\",\"submitDate\":\"1755334843538\",\"buildDate\":\"1755334321381\",\"uploadServerUrl\":\"https:\\/\\/upload.jotform.com\\/upload\",\"eventObserver\":\"1\",\"q3_name\":{\"first\":\"Tr\\u1ea7n\",\"last\":\"Huy\"},\"q4_phoneNumber\":{\"full\":\"(097) 828-1697\"},\"q5_email\":\"tuanhuy227@gmail.com\",\"event_id\":\"1755334321593_252271255656055_gTAshkM\",\"timeToSubmit\":\"20\",\"validatedNewRequiredFieldIDs\":\"{\\\"new\\\":1,\\\"id_3\\\":\\\"Hu\\\",\\\"id_4\\\":\\\"(0\\\",\\\"id_5\\\":\\\"tu\\\"}\",\"path\":\"\\/submit\\/252271255656055\"}","fromTable":"","appID":"","pretty":"Name:Trần Huy, Phone Number:(097) 828-1697, Email:tuanhuy227@gmail.com","unread":"","parent":"","ip":"118.70.98.152"},"rawBody":"{\n  \"action\": \"\",\n  \"webhookURL\": \"https://mart-guitars-educated-idea.trycloudflare.com/webhook/jotform\",\n  \"username\": \"tuanhuy227\",\n  \"formID\": \"252271255656055\",\n  \"type\": \"WEB\",\n  \"customParams\": \"\",\n  \"product\": \"\",\n  \"formTitle\": \"Form\",\n  \"customTitle\": \"\",\n  \"submissionID\": \"6311440442516407077\",\n  \"event\": \"\",\n  \"documentID\": \"\",\n  \"teamID\": \"\",\n  \"subject\": \"\",\n  \"isSilent\": \"\",\n  \"customBody\": \"\",\n  \"rawRequest\": \"{\\\"slug\\\":\\\"submit\\\\/252271255656055\\\",\\\"jsExecutionTracker\\\":\\\"build-date-1755334321381=>init-started:1755334321593=>validator-called:1755334321595=>validator-mounted-false:1755334321595=>init-complete:1755334321596=>interval-complete:1755334342333=>onsubmit-fired:1755334843524=>observerSubmitHandler_received-submit-event:1755334843529=>submit-validation-passed:1755334843534=>observerSubmitHandler_validation-passed-submitting-form:1755334843538\\\",\\\"submitSource\\\":\\\"form\\\",\\\"submitDate\\\":\\\"1755334843538\\\",\\\"buildDate\\\":\\\"1755334321381\\\",\\\"uploadServerUrl\\\":\\\"https:\\\\/\\\\/upload.jotform.com\\\\/upload\\\",\\\"eventObserver\\\":\\\"1\\\",\\\"q3_name\\\":{\\\"first\\\":\\\"Tr\\\\u1ea7n\\\",\\\"last\\\":\\\"Huy\\\"},\\\"q4_phoneNumber\\\":{\\\"full\\\":\\\"(097) 828-1697\\\"},\\\"q5_email\\\":\\\"tuanhuy227@gmail.com\\\",\\\"event_id\\\":\\\"1755334321593_252271255656055_gTAshkM\\\",\\\"timeToSubmit\\\":\\\"20\\\",\\\"validatedNewRequiredFieldIDs\\\":\\\"{\\\\\\\"new\\\\\\\":1,\\\\\\\"id_3\\\\\\\":\\\\\\\"Hu\\\\\\\",\\\\\\\"id_4\\\\\\\":\\\\\\\"(0\\\\\\\",\\\\\\\"id_5\\\\\\\":\\\\\\\"tu\\\\\\\"}\\\",\\\"path\\\":\\\"\\\\/submit\\\\/252271255656055\\\"}\",\n  \"fromTable\": \"\",\n  \"appID\": \"\",\n  \"pretty\": \"Name:Trần Huy, Phone Number:(097) 828-1697, Email:tuanhuy227@gmail.com\",\n  \"unread\": \"\",\n  \"parent\": \"\",\n  \"ip\": \"118.70.98.152\"\n}","query":{},"params":{},"contentType":"multipart/form-data; boundary=------------------------6hXTErZafT60SkhXjgwdE0"}
2025-08-16 16:00:45 [INFO]: === PARSED JOTFORM DATA === | {"rawRequest":"{\"slug\":\"submit\\/252271255656055\",\"jsExecutionTracker\":\"build-date-1755334321381=>init-started:1755334321593=>validator-called:1755334321595=>validator-mounted-false:1755334321595=>init-complete:1755334321596=>interval-complete:1755334342333=>onsubmit-fired:1755334843524=>observerSubmitHandler_received-submit-event:1755334843529=>submit-validation-passed:1755334843534=>observerSubmitHandler_validation-passed-submitting-form:1755334843538\",\"submitSource\":\"form\",\"submitDate\":\"1755334843538\",\"buildDate\":\"1755334321381\",\"uploadServerUrl\":\"https:\\/\\/upload.jotform.com\\/upload\",\"eventObserver\":\"1\",\"q3_name\":{\"first\":\"Tr\\u1ea7n\",\"last\":\"Huy\"},\"q4_phoneNumber\":{\"full\":\"(097) 828-1697\"},\"q5_email\":\"tuanhuy227@gmail.com\",\"event_id\":\"1755334321593_252271255656055_gTAshkM\",\"timeToSubmit\":\"20\",\"validatedNewRequiredFieldIDs\":\"{\\\"new\\\":1,\\\"id_3\\\":\\\"Hu\\\",\\\"id_4\\\":\\\"(0\\\",\\\"id_5\\\":\\\"tu\\\"}\",\"path\":\"\\/submit\\/252271255656055\"}","parsedData":{"slug":"submit/252271255656055","jsExecutionTracker":"build-date-1755334321381=>init-started:1755334321593=>validator-called:1755334321595=>validator-mounted-false:1755334321595=>init-complete:1755334321596=>interval-complete:1755334342333=>onsubmit-fired:1755334843524=>observerSubmitHandler_received-submit-event:1755334843529=>submit-validation-passed:1755334843534=>observerSubmitHandler_validation-passed-submitting-form:1755334843538","submitSource":"form","submitDate":"1755334843538","buildDate":"1755334321381","uploadServerUrl":"https://upload.jotform.com/upload","eventObserver":"1","q3_name":{"first":"Trần","last":"Huy"},"q4_phoneNumber":{"full":"(097) 828-1697"},"q5_email":"tuanhuy227@gmail.com","event_id":"1755334321593_252271255656055_gTAshkM","timeToSubmit":"20","validatedNewRequiredFieldIDs":"{\"new\":1,\"id_3\":\"Hu\",\"id_4\":\"(0\",\"id_5\":\"tu\"}","path":"/submit/252271255656055"},"dataKeys":["slug","jsExecutionTracker","submitSource","submitDate","buildDate","uploadServerUrl","eventObserver","q3_name","q4_phoneNumber","q5_email","event_id","timeToSubmit","validatedNewRequiredFieldIDs","path"]}
2025-08-16 16:00:45 [INFO]: Webhook processed: Jotform -> submission | {"source":"Jotform","action":"submission","dataKeys":["slug","jsExecutionTracker","submitSource","submitDate","buildDate","uploadServerUrl","eventObserver","q3_name","q4_phoneNumber","q5_email","event_id","timeToSubmit","validatedNewRequiredFieldIDs","path"]}
2025-08-16 16:00:45 [ERROR]: Invalid webhook payload | {"errors":["Missing submission ID"],"webhookData":{"slug":"submit/252271255656055","jsExecutionTracker":"build-date-1755334321381=>init-started:1755334321593=>validator-called:1755334321595=>validator-mounted-false:1755334321595=>init-complete:1755334321596=>interval-complete:1755334342333=>onsubmit-fired:1755334843524=>observerSubmitHandler_received-submit-event:1755334843529=>submit-validation-passed:1755334843534=>observerSubmitHandler_validation-passed-submitting-form:1755334843538","submitSource":"form","submitDate":"1755334843538","buildDate":"1755334321381","uploadServerUrl":"https://upload.jotform.com/upload","eventObserver":"1","q3_name":{"first":"Trần","last":"Huy"},"q4_phoneNumber":{"full":"(097) 828-1697"},"q5_email":"tuanhuy227@gmail.com","event_id":"1755334321593_252271255656055_gTAshkM","timeToSubmit":"20","validatedNewRequiredFieldIDs":"{\"new\":1,\"id_3\":\"Hu\",\"id_4\":\"(0\",\"id_5\":\"tu\"}","path":"/submit/252271255656055"}}
2025-08-16 16:00:45 [INFO]: Request completed | {"method":"POST","url":"/webhook/jotform","statusCode":400,"duration":15,"ip":"34.136.141.125"}
2025-08-16 16:07:16 [INFO]: Received SIGINT, starting graceful shutdown...
2025-08-16 16:10:52 [INFO]: Middleware setup completed
2025-08-16 16:10:52 [INFO]: Development test routes enabled
2025-08-16 16:10:52 [INFO]: Routes setup completed
2025-08-16 16:10:52 [INFO]: Error handling setup completed
2025-08-16 16:10:52 [INFO]: Validating configuration...
2025-08-16 16:10:52 [INFO]: Testing Jotform connection...
2025-08-16 16:10:52 [INFO]: Jotform API request | {"method":"GET","url":"/form/your_form_id_here"}
2025-08-16 16:10:53 [ERROR]: Jotform API response error Request failed with status code 404 | {"status":404,"url":"/form/your_form_id_here","data":{"responseCode":404,"message":"Requested URL (/form/your_form_id_here) is not available!","content":"","duration":"29.60ms","info":"https://api.jotform.com/docs"}}
2025-08-16 16:10:53 [ERROR]: Failed to get form from Jotform | {"formId":"your_form_id_here","error":"Request failed with status code 404"}
AxiosError: Request failed with status code 404
    at settle (/Users/trantuanhuy/api/jotform-bitrix24-integration/node_modules/axios/dist/node/axios.cjs:2090:12)
    at Unzip.handleStreamEnd (/Users/trantuanhuy/api/jotform-bitrix24-integration/node_modules/axios/dist/node/axios.cjs:3207:11)
    at Unzip.emit (node:events:519:35)
    at endReadableNT (node:internal/streams/readable:1696:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (/Users/trantuanhuy/api/jotform-bitrix24-integration/node_modules/axios/dist/node/axios.cjs:4317:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async JotformService.getForm (/Users/trantuanhuy/api/jotform-bitrix24-integration/src/services/jotformService.js:67:24)
    at async JotformService.validateConnection (/Users/trantuanhuy/api/jotform-bitrix24-integration/src/services/jotformService.js:244:22)
    at async Server.validateConfiguration (/Users/trantuanhuy/api/jotform-bitrix24-integration/src/server.js:220:29)
    at async Server.start (/Users/trantuanhuy/api/jotform-bitrix24-integration/src/server.js:158:7)
2025-08-16 16:10:53 [WARN]: Jotform connection test failed | {"error":"Request failed with status code 404"}
2025-08-16 16:10:53 [INFO]: Testing Bitrix24 connection...
2025-08-16 16:10:53 [INFO]: Bitrix24 API request | {"method":"GET","url":"https://b24-7woulk.bitrix24.vn/rest/1/rg1j0gwz9z74hdqe/crm.lead.fields.json","dataKeys":[]}
2025-08-16 16:10:53 [INFO]: Bitrix24 API response | {"status":200,"url":"https://b24-7woulk.bitrix24.vn/rest/1/rg1j0gwz9z74hdqe/crm.lead.fields.json","hasResult":true}
2025-08-16 16:10:53 [INFO]: Bitrix24 connection validated successfully
2025-08-16 16:10:53 [INFO]: Bitrix24 connection test passed
2025-08-16 16:10:53 [INFO]: Configuration validation completed
2025-08-16 16:10:53 [INFO]: Server started successfully | {"port":"3000","env":"development","pid":78053,"nodeVersion":"v23.10.0"}
2025-08-16 16:11:52 [INFO]: HTTP Request | {"method":"POST","url":"/webhook/jotform","ip":"34.136.141.125","statusCode":200,"duration":"undefinedms","contentLength":"3502"}
2025-08-16 16:11:52 [INFO]: === WEBHOOK REQUEST DEBUG === | {"method":"POST","url":"/webhook/jotform","headers":{"host":"mart-guitars-educated-idea.trycloudflare.com","content-length":"3502","accept":"*/*","accept-encoding":"gzip","cdn-loop":"cloudflare; loops=1; subreqs=1","cf-connecting-ip":"34.136.141.125","cf-ew-via":"15","cf-ipcountry":"US","cf-ray":"96ffce868735230f-HKG","cf-visitor":"{\"scheme\":\"https\"}","cf-warp-tag-id":"60b5b5b8-3782-413e-8ff8-09da4e1e0f82","cf-worker":"trycloudflare.com","connection":"keep-alive","content-type":"multipart/form-data; boundary=------------------------eGeGNA42fKnQIiSuUIbm1b","newrelic":"eyJ2IjpbMCwxXSwiZCI6eyJ0eSI6IkFwcCIsImFjIjoiNjkxNjIwIiwiYXAiOiIxMzE0NDY2Njk5IiwiaWQiOiIyNjFjYTgyMWQ1YzAwZTgzIiwidHIiOiIyYzg1ZWQ4ODcyMTNlOGFiIiwidHgiOiIyYzg1ZWQ4ODcyMTNlOGFiIiwicHIiOjEuNTEwNzIsInNhIjp0cnVlLCJ0aSI6MTc1NTMzNTUxMTk0Mn19","traceparent":"00-00000000000000002c85ed887213e8ab-261ca821d5c00e83-01","tracestate":"691620@nr=0-0-691620-1314466699-261ca821d5c00e83-2c85ed887213e8ab-1-1.510723-1755335511942","x-forwarded-for":"34.136.141.125","x-forwarded-proto":"https"},"body":{"action":"","webhookURL":"https://mart-guitars-educated-idea.trycloudflare.com/webhook/jotform","username":"tuanhuy227","formID":"252271255656055","type":"WEB","customParams":"","product":"","formTitle":"Form","customTitle":"","submissionID":"6311447112513527810","event":"","documentID":"","teamID":"","subject":"","isSilent":"","customBody":"","rawRequest":"{\"slug\":\"submit\\/252271255656055\",\"jsExecutionTracker\":\"build-date-1755335506098=>init-started:1755335506296=>validator-called:1755335506299=>validator-mounted-false:1755335506299=>init-complete:1755335506300=>onsubmit-fired:1755335510763=>observerSubmitHandler_received-submit-event:1755335510764=>submit-validation-passed:1755335510771=>observerSubmitHandler_validation-passed-submitting-form:1755335510775\",\"submitSource\":\"form\",\"submitDate\":\"1755335510775\",\"buildDate\":\"1755335506098\",\"uploadServerUrl\":\"https:\\/\\/upload.jotform.com\\/upload\",\"eventObserver\":\"1\",\"q3_name\":{\"first\":\"Tr\\u1ea7n\",\"last\":\"Huy\"},\"q4_phoneNumber\":{\"full\":\"(097) 828-1697\"},\"q5_email\":\"tuanhuy227@gmail.com\",\"event_id\":\"1755335506296_252271255656055_SPQnM39\",\"timeToSubmit\":\"4\",\"validatedNewRequiredFieldIDs\":\"{\\\"new\\\":1,\\\"id_3\\\":\\\"Hu\\\",\\\"id_4\\\":\\\"(0\\\",\\\"id_5\\\":\\\"tu\\\"}\",\"path\":\"\\/submit\\/252271255656055\"}","fromTable":"","appID":"","pretty":"Name:Trần Huy, Phone Number:(097) 828-1697, Email:tuanhuy227@gmail.com","unread":"","parent":"","ip":"118.70.98.152"},"submissionID":"6311447112513527810","hasRawRequest":true,"contentType":"multipart/form-data; boundary=------------------------eGeGNA42fKnQIiSuUIbm1b"}
2025-08-16 16:11:52 [INFO]: === PARSED FORM DATA === | {"submissionId":"6311447112513527810","formData":{"slug":"submit/252271255656055","jsExecutionTracker":"build-date-1755335506098=>init-started:1755335506296=>validator-called:1755335506299=>validator-mounted-false:1755335506299=>init-complete:1755335506300=>onsubmit-fired:1755335510763=>observerSubmitHandler_received-submit-event:1755335510764=>submit-validation-passed:1755335510771=>observerSubmitHandler_validation-passed-submitting-form:1755335510775","submitSource":"form","submitDate":"1755335510775","buildDate":"1755335506098","uploadServerUrl":"https://upload.jotform.com/upload","eventObserver":"1","q3_name":{"first":"Trần","last":"Huy"},"q4_phoneNumber":{"full":"(097) 828-1697"},"q5_email":"tuanhuy227@gmail.com","event_id":"1755335506296_252271255656055_SPQnM39","timeToSubmit":"4","validatedNewRequiredFieldIDs":"{\"new\":1,\"id_3\":\"Hu\",\"id_4\":\"(0\",\"id_5\":\"tu\"}","path":"/submit/252271255656055"},"hasQ3Name":true,"hasQ4Phone":true,"hasQ5Email":true}
2025-08-16 16:11:52 [INFO]: Processing Jotform webhook | {"submissionId":"6311447112513527810"}
2025-08-16 16:11:52 [INFO]: Parsed Jotform contact data | {"submissionId":"6311447112513527810","contactData":{"fullName":"Trần Huy","phone":"(097) 828-1697","email":"tuanhuy227@gmail.com","submissionId":"6311447112513527810","submittedAt":"2025-08-16T09:11:50.775Z"},"originalFormData":{"q3_name":{"first":"Trần","last":"Huy"},"q4_phoneNumber":{"full":"(097) 828-1697"},"q5_email":"tuanhuy227@gmail.com"}}
2025-08-16 16:11:52 [INFO]: === CONTACT DATA PARSED === | {"submissionId":"6311447112513527810","contactData":{"fullName":"Trần Huy","phone":"(097) 828-1697","email":"tuanhuy227@gmail.com","submissionId":"6311447112513527810","submittedAt":"2025-08-16T09:11:50.775Z"},"hasFullName":true,"hasEmail":true,"hasPhone":true}
2025-08-16 16:11:52 [INFO]: Creating lead in Bitrix24 for submission | {"submissionId":"6311447112513527810","fullName":"Trần Huy","email":"tuanhuy227@gmail.com","phone":"(097) 828-1697"}
2025-08-16 16:11:52 [INFO]: Creating lead in Bitrix24 | {"title":"Lead từ Jotform - Trần Huy","fullName":"Trần Huy","email":"tuanhuy227@gmail.com","phone":"(097) 828-1697","url":"https://b24-7woulk.bitrix24.vn/rest/1/rg1j0gwz9z74hdqe/crm.lead.add.json"}
2025-08-16 16:11:52 [INFO]: Bitrix24 API request | {"method":"POST","url":"https://b24-7woulk.bitrix24.vn/rest/1/rg1j0gwz9z74hdqe/crm.lead.add.json","dataKeys":["FIELDS"]}
2025-08-16 16:11:53 [INFO]: Bitrix24 API response | {"status":200,"url":"https://b24-7woulk.bitrix24.vn/rest/1/rg1j0gwz9z74hdqe/crm.lead.add.json","hasResult":true}
2025-08-16 16:11:53 [INFO]: API call to Bitrix24 | {"service":"Bitrix24","endpoint":"/crm.lead.add","method":"POST","statusCode":200,"duration":"1051ms"}
2025-08-16 16:11:53 [INFO]: Lead created successfully in Bitrix24 | {"leadId":3,"fullName":"Trần Huy","submissionId":"6311447112513527810"}
2025-08-16 16:11:53 [INFO]: Lead created successfully | {"leadId":3,"submissionId":"6311447112513527810","fullName":"Trần Huy"}
2025-08-16 16:11:53 [INFO]: Webhook processed successfully | {"submissionId":"6311447112513527810","leadId":3,"duration":1054}
2025-08-16 16:11:53 [INFO]: Request completed | {"method":"POST","url":"/webhook/jotform","statusCode":200,"duration":1062,"ip":"34.136.141.125"}
2025-08-16 16:22:57 [INFO]: Received SIGINT, starting graceful shutdown...
2025-08-16 16:23:06 [INFO]: Server running on port 3000
2025-08-16 16:23:06 [INFO]: Environment:
2025-08-16 16:23:14 [INFO]: SIGINT received, shutting down gracefully
2025-08-16 16:44:30 [INFO]: Server running on port 3000
2025-08-16 16:44:30 [INFO]: Environment:
2025-08-16 16:50:25 [INFO]: Request received | {"method":"POST","url":"/webhook/jotform","ip":"::1"}
2025-08-16 16:50:25 [INFO]: Jotform webhook received | {"submissionID":"6311470242515337047","hasRawRequest":true,"ip":"::1"}
2025-08-16 16:50:25 [INFO]: Contact data parsed | {"submissionId":"6311470242515337047","fullName":"Trần Huy","email":"tuanhuy227@gmail.com","phone":"(097) 828-1697"}
2025-08-16 16:50:25 [ERROR]: Webhook processing error | {"error":"createLead is not a function","duration":3}
TypeError: createLead is not a function
    at /Users/trantuanhuy/api/jotform-bitrix24-integration/src/routes/webhook.js:107:26
    at Layer.handle [as handle_request] (/Users/trantuanhuy/api/jotform-bitrix24-integration/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/trantuanhuy/api/jotform-bitrix24-integration/node_modules/express/lib/router/route.js:149:13)
    at done (/Users/trantuanhuy/api/jotform-bitrix24-integration/node_modules/multer/lib/make-middleware.js:59:7)
    at indicateDone (/Users/trantuanhuy/api/jotform-bitrix24-integration/node_modules/multer/lib/make-middleware.js:63:68)
    at Multipart.<anonymous> (/Users/trantuanhuy/api/jotform-bitrix24-integration/node_modules/multer/lib/make-middleware.js:187:7)
    at Multipart.emit (node:events:507:28)
    at emitCloseNT (node:internal/streams/destroy:148:10)
    at process.processTicksAndRejections (node:internal/process/task_queues:89:21)
2025-08-16 16:50:25 [INFO]: Request completed | {"method":"POST","url":"/jotform","statusCode":500,"duration":18,"ip":"::1"}
2025-08-16 16:52:05 [INFO]: SIGINT received, shutting down gracefully
2025-08-16 16:52:06 [INFO]: Server running on port 3000
2025-08-16 16:52:06 [INFO]: Environment:
2025-08-16 16:52:17 [INFO]: Request received | {"method":"POST","url":"/webhook/jotform","ip":"::1"}
2025-08-16 16:52:17 [INFO]: Jotform webhook received | {"submissionID":"6311471362517612532","hasRawRequest":true,"ip":"::1"}
2025-08-16 16:52:17 [INFO]: Contact data parsed | {"submissionId":"6311471362517612532","fullName":"Trần Huy","email":"tuanhuy227@gmail.com","phone":"(097) 828-1697"}
2025-08-16 16:52:17 [INFO]: Creating Bitrix24 lead | {"submissionId":"6311471362517612532","leadTitle":"Jotform Lead: Trần Huy","hasName":true,"hasEmail":true,"hasPhone":true}
2025-08-16 16:52:17 [ERROR]: Bitrix24 API call failed | {"method":"crm.lead.add","error":"No access token available. Please authorize first."}
2025-08-16 16:52:17 [WARN]: OAuth2 failed, trying legacy webhook | {"error":"No access token available. Please authorize first."}
2025-08-16 16:52:17 [INFO]: Creating lead via legacy webhook | {"url":"https://b24-7woulk.bitrix24.vn/rest/1/rg1j0gwz9z74hdqe/","submissionId":"6311471362517612532"}
2025-08-16 16:52:17 [ERROR]: Legacy webhook lead creation failed | {"error":"Request failed with status code 401","submissionId":"6311471362517612532"}
2025-08-16 16:52:17 [ERROR]: Failed to create lead in Bitrix24 | {"error":"Request failed with status code 401","submissionId":"6311471362517612532"}
2025-08-16 16:52:17 [ERROR]: Failed to create lead | {"submissionId":"6311471362517612532","error":"Request failed with status code 401","duration":483}
2025-08-16 16:52:17 [INFO]: Request completed | {"method":"POST","url":"/jotform","statusCode":500,"duration":494,"ip":"::1"}
2025-08-16 16:53:11 [INFO]: Request received | {"method":"POST","url":"/webhook/jotform","ip":"::1"}
2025-08-16 16:53:11 [INFO]: Jotform webhook received | {"submissionID":"6311471902515653162","hasRawRequest":true,"ip":"::1"}
2025-08-16 16:53:11 [INFO]: Contact data parsed | {"submissionId":"6311471902515653162","fullName":"Trần Huy","email":"tuanhuy227@gmail.com","phone":"(097) 828-1697"}
2025-08-16 16:53:11 [INFO]: Creating Bitrix24 lead | {"submissionId":"6311471902515653162","leadTitle":"Jotform Lead: Trần Huy","hasName":true,"hasEmail":true,"hasPhone":true}
2025-08-16 16:53:11 [ERROR]: Bitrix24 API call failed | {"method":"crm.lead.add","error":"No access token available. Please authorize first."}
2025-08-16 16:53:11 [WARN]: OAuth2 failed, trying legacy webhook | {"error":"No access token available. Please authorize first."}
2025-08-16 16:53:11 [INFO]: Creating lead via legacy webhook | {"url":"https://b24-7woulk.bitrix24.vn/rest/1/rg1j0gwz9z74hdqe/","submissionId":"6311471902515653162"}
2025-08-16 16:53:12 [ERROR]: Legacy webhook lead creation failed | {"error":"Request failed with status code 401","submissionId":"6311471902515653162"}
2025-08-16 16:53:12 [ERROR]: Failed to create lead in Bitrix24 | {"error":"Request failed with status code 401","submissionId":"6311471902515653162"}
2025-08-16 16:53:12 [ERROR]: Failed to create lead | {"submissionId":"6311471902515653162","error":"Request failed with status code 401","duration":655}
2025-08-16 16:53:12 [INFO]: Request completed | {"method":"POST","url":"/jotform","statusCode":500,"duration":661,"ip":"::1"}
2025-08-16 16:54:34 [INFO]: SIGINT received, shutting down gracefully
2025-08-16 16:54:35 [INFO]: Server running on port 3000
2025-08-16 16:54:35 [INFO]: Environment:
2025-08-16 16:55:05 [INFO]: SIGINT received, shutting down gracefully
2025-08-16 16:55:06 [INFO]: Server running on port 3000
2025-08-16 16:55:06 [INFO]: Environment:
2025-08-16 16:57:52 [INFO]: SIGINT received, shutting down gracefully
2025-08-16 16:59:29 [INFO]: Server running on port 3000
2025-08-16 16:59:29 [INFO]: Environment:
2025-08-16 16:59:39 [INFO]: Request received | {"method":"POST","url":"/webhook/jotform","ip":"::1"}
2025-08-16 16:59:39 [INFO]: Jotform webhook received | {"submissionID":"6311475782516659598","hasRawRequest":true,"ip":"::1"}
2025-08-16 16:59:39 [INFO]: Contact data parsed | {"submissionId":"6311475782516659598","fullName":"Trần Huy","email":"tuanhuy227@gmail.com","phone":"(097) 828-1697"}
2025-08-16 16:59:39 [INFO]: Creating Bitrix24 lead | {"submissionId":"6311475782516659598","leadTitle":"Jotform Lead: Trần Huy","hasName":true,"hasEmail":true,"hasPhone":true}
2025-08-16 16:59:39 [ERROR]: Bitrix24 API call failed | {"method":"crm.lead.add","error":"No access token available. Please authorize first."}
2025-08-16 16:59:39 [WARN]: OAuth2 failed, trying legacy webhook | {"error":"No access token available. Please authorize first."}
2025-08-16 16:59:39 [INFO]: Creating lead via legacy webhook | {"url":"https://b24-7woulk.bitrix24.vn/rest/1/rg1j0gwz9z74hdqe/","submissionId":"6311475782516659598"}
2025-08-16 16:59:39 [ERROR]: Legacy webhook lead creation failed | {"error":"Request failed with status code 401","submissionId":"6311475782516659598"}
2025-08-16 16:59:39 [ERROR]: Failed to create lead in Bitrix24 | {"error":"Request failed with status code 401","submissionId":"6311475782516659598"}
2025-08-16 16:59:39 [ERROR]: Failed to create lead | {"submissionId":"6311475782516659598","error":"Request failed with status code 401","duration":517}
2025-08-16 16:59:39 [INFO]: Request completed | {"method":"POST","url":"/jotform","statusCode":500,"duration":527,"ip":"::1"}
2025-08-16 17:08:55 [INFO]: SIGINT received, shutting down gracefully
2025-08-16 17:08:56 [INFO]: Server running on port 3000
2025-08-16 17:08:56 [INFO]: Environment:
2025-08-16 17:09:13 [INFO]: Request received | {"method":"POST","url":"/webhook/jotform","ip":"::1"}
2025-08-16 17:09:13 [INFO]: Jotform webhook received | {"submissionID":"6311481512519164215","hasRawRequest":true,"ip":"::1"}
2025-08-16 17:09:13 [INFO]: Contact data parsed | {"submissionId":"6311481512519164215","fullName":"Trần Huy","email":"tuanhuy227@gmail.com","phone":"(097) 828-1697"}
2025-08-16 17:09:13 [INFO]: Creating Bitrix24 lead | {"submissionId":"6311481512519164215","leadTitle":"Jotform Lead: Trần Huy","hasName":true,"hasEmail":true,"hasPhone":true}
2025-08-16 17:09:13 [ERROR]: Bitrix24 API call failed | {"method":"crm.lead.add","error":"No access token available. Please authorize first."}
2025-08-16 17:09:13 [WARN]: OAuth2 failed, trying legacy webhook | {"error":"No access token available. Please authorize first."}
2025-08-16 17:09:13 [INFO]: Creating lead via legacy webhook | {"url":"https://b24-7woulk.bitrix24.vn/rest/1/rg1j0gwz9z74hdqe/","submissionId":"6311481512519164215"}
2025-08-16 17:09:13 [ERROR]: Legacy webhook lead creation failed | {"error":"Request failed with status code 401","submissionId":"6311481512519164215"}
2025-08-16 17:09:13 [ERROR]: Failed to create lead in Bitrix24 | {"error":"Request failed with status code 401","submissionId":"6311481512519164215"}
2025-08-16 17:09:13 [ERROR]: Failed to create lead | {"submissionId":"6311481512519164215","error":"Request failed with status code 401","duration":452}
2025-08-16 17:09:13 [INFO]: Request completed | {"method":"POST","url":"/jotform","statusCode":500,"duration":465,"ip":"::1"}
2025-08-16 17:10:01 [INFO]: Request received | {"method":"POST","url":"/oauth/authorize?DOMAIN=b24-7woulk.bitrix24.vn&PROTOCOL=1&LANG=vn&APP_SID=66009d77c7aba717f48fade3729dd207","ip":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"}
2025-08-16 17:10:01 [WARN]: Route not found | {"method":"POST","url":"/?DOMAIN=b24-7woulk.bitrix24.vn&PROTOCOL=1&LANG=vn&APP_SID=66009d77c7aba717f48fade3729dd207","ip":"::1"}
2025-08-16 17:10:01 [INFO]: Request completed | {"method":"POST","url":"/?DOMAIN=b24-7woulk.bitrix24.vn&PROTOCOL=1&LANG=vn&APP_SID=66009d77c7aba717f48fade3729dd207","statusCode":404,"duration":2,"ip":"::1"}
2025-08-16 17:14:27 [INFO]: SIGINT received, shutting down gracefully
2025-08-16 17:14:29 [INFO]: Server running on port 3000
2025-08-16 17:14:29 [INFO]: Environment:
2025-08-16 17:19:02 [INFO]: Request received | {"method":"GET","url":"/webhook/jotform","ip":"::1","userAgent":"Mozilla/5.0 (compatible)"}
2025-08-16 17:19:02 [WARN]: Route not found | {"method":"GET","url":"/","ip":"::1"}
2025-08-16 17:19:02 [INFO]: Request completed | {"method":"GET","url":"/","statusCode":404,"duration":19,"ip":"::1"}
2025-08-16 17:24:14 [INFO]: Request received | {"method":"POST","url":"/webhook/jotform","ip":"::1"}
2025-08-16 17:24:14 [INFO]: Jotform webhook received | {"submissionID":"6311490532514208386","hasRawRequest":true,"ip":"::1"}
2025-08-16 17:24:14 [INFO]: Contact data parsed | {"submissionId":"6311490532514208386","fullName":"Trần Huy","email":"tuanhuy227@gmail.com","phone":"(097) 828-1697"}
2025-08-16 17:24:14 [INFO]: Creating Bitrix24 lead | {"submissionId":"6311490532514208386","leadTitle":"Jotform Lead: Trần Huy","hasName":true,"hasEmail":true,"hasPhone":true}
2025-08-16 17:24:14 [ERROR]: Bitrix24 API call failed | {"method":"crm.lead.add","error":"No access token available. Please authorize first."}
2025-08-16 17:24:14 [WARN]: OAuth2 failed, trying legacy webhook | {"error":"No access token available. Please authorize first."}
2025-08-16 17:24:14 [INFO]: Creating lead via legacy webhook | {"url":"https://b24-7woulk.bitrix24.vn/rest/1/rg1j0gwz9z74hdqe/","submissionId":"6311490532514208386"}
2025-08-16 17:24:14 [ERROR]: Legacy webhook lead creation failed | {"error":"Request failed with status code 401","submissionId":"6311490532514208386"}
2025-08-16 17:24:14 [ERROR]: Failed to create lead in Bitrix24 | {"error":"Request failed with status code 401","submissionId":"6311490532514208386"}
2025-08-16 17:24:14 [ERROR]: Failed to create lead | {"submissionId":"6311490532514208386","error":"Request failed with status code 401","duration":505}
2025-08-16 17:24:14 [INFO]: Request completed | {"method":"POST","url":"/jotform","statusCode":500,"duration":513,"ip":"::1"}
2025-08-16 17:26:53 [INFO]: SIGINT received, shutting down gracefully
2025-08-16 17:32:42 [INFO]: Server running on port 3000
2025-08-16 17:32:42 [INFO]: Environment:
2025-08-16 17:32:55 [INFO]: Request received | {"method":"POST","url":"/webhook/jotform","ip":"::1"}
2025-08-16 17:32:55 [INFO]: Jotform webhook received | {"submissionID":"6311495732511069300","hasRawRequest":true,"ip":"::1"}
2025-08-16 17:32:55 [INFO]: Contact data parsed | {"submissionId":"6311495732511069300","fullName":"Trần Huy","email":"tuanhuy227@gmail.com","phone":"(097) 828-1697"}
2025-08-16 17:32:55 [INFO]: Creating Bitrix24 lead | {"submissionId":"6311495732511069300","leadTitle":"Jotform Lead: Trần Huy","hasName":true,"hasEmail":true,"hasPhone":true}
2025-08-16 17:32:55 [ERROR]: Bitrix24 API call failed | {"method":"crm.lead.add","error":"No access token available. Please authorize first."}
2025-08-16 17:32:55 [WARN]: OAuth2 failed, trying legacy webhook | {"error":"No access token available. Please authorize first."}
2025-08-16 17:32:55 [INFO]: Creating lead via legacy webhook | {"url":"https://b24-7woulk.bitrix24.vn/rest/1/rg1j0gwz9z74hdqe/","submissionId":"6311495732511069300"}
2025-08-16 17:32:55 [ERROR]: Legacy webhook lead creation failed | {"error":"Request failed with status code 401","submissionId":"6311495732511069300"}
2025-08-16 17:32:55 [ERROR]: Failed to create lead in Bitrix24 | {"error":"Request failed with status code 401","submissionId":"6311495732511069300"}
2025-08-16 17:32:55 [ERROR]: Failed to create lead | {"submissionId":"6311495732511069300","error":"Request failed with status code 401","duration":532}
2025-08-16 17:32:55 [INFO]: Request completed | {"method":"POST","url":"/jotform","statusCode":500,"duration":539,"ip":"::1"}
2025-08-16 17:47:08 [INFO]: Request received | {"method":"GET","url":"/oauth/callback","ip":"::1","userAgent":"Mozilla/5.0 (compatible)"}
2025-08-16 17:47:08 [INFO]: OAuth2 callback received | {"hasCode":false,"hasState":false,"hasError":false}
2025-08-16 17:47:08 [INFO]: Request completed | {"method":"GET","url":"/callback","statusCode":400,"duration":23,"ip":"::1"}
2025-08-16 17:47:11 [INFO]: Request received | {"method":"GET","url":"/oauth/callback","ip":"::1","userAgent":"Mozilla/5.0 (compatible)"}
2025-08-16 17:47:11 [INFO]: OAuth2 callback received | {"hasCode":false,"hasState":false,"hasError":false}
2025-08-16 17:47:11 [INFO]: Request completed | {"method":"GET","url":"/callback","statusCode":400,"duration":4,"ip":"::1"}
2025-08-16 17:47:24 [INFO]: Request received | {"method":"GET","url":"/oauth/callback","ip":"::1","userAgent":"Mozilla/5.0 (compatible)"}
2025-08-16 17:47:24 [INFO]: OAuth2 callback received | {"hasCode":false,"hasState":false,"hasError":false}
2025-08-16 17:47:24 [INFO]: Request completed | {"method":"GET","url":"/callback","statusCode":400,"duration":3,"ip":"::1"}
2025-08-16 17:47:54 [INFO]: Request received | {"method":"GET","url":"/oauth/callback","ip":"::1","userAgent":"Mozilla/5.0 (compatible)"}
2025-08-16 17:47:54 [INFO]: OAuth2 callback received | {"hasCode":false,"hasState":false,"hasError":false}
2025-08-16 17:47:54 [INFO]: Request completed | {"method":"GET","url":"/callback","statusCode":400,"duration":2,"ip":"::1"}
2025-08-17 12:20:17 [INFO]: SIGINT received, shutting down gracefully
2025-08-17 12:21:31 [INFO]: Server running on port 3000
2025-08-17 12:21:31 [INFO]: Environment:
2025-08-17 12:22:42 [INFO]: Request received | {"method":"POST","url":"/?DOMAIN=b24-7woulk.bitrix24.vn&PROTOCOL=1&LANG=vn&APP_SID=e3fea32597d12faa0b1da0dc7c4c0dac","ip":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"}
2025-08-17 12:22:42 [INFO]: 🚀 BITRIX24 INSTALLATION REQUEST - FULL DATA | {"headers":{"host":"democracy-sleeve-brunette-confident.trycloudflare.com","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","content-length":"363","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7","accept-encoding":"gzip","accept-language":"vi-VN,vi;q=0.9,fr-FR;q=0.8,fr;q=0.7,en-US;q=0.6,en;q=0.5","cache-control":"max-age=0","cdn-loop":"cloudflare; loops=1; subreqs=1","cf-connecting-ip":"42.113.16.127","cf-ew-via":"15","cf-ipcountry":"VN","cf-ray":"9706bc35e3b8e2e8-HKG","cf-visitor":"{\"scheme\":\"https\"}","cf-warp-tag-id":"f5ea3b18-2ae3-4c7a-80d1-b775ee54de14","cf-worker":"trycloudflare.com","connection":"keep-alive","content-type":"application/x-www-form-urlencoded","origin":"https://b24-7woulk.bitrix24.vn","priority":"u=0, i","referer":"https://b24-7woulk.bitrix24.vn/","sec-ch-ua":"\"Not;A=Brand\";v=\"99\", \"Google Chrome\";v=\"139\", \"Chromium\";v=\"139\"","sec-ch-ua-mobile":"?0","sec-ch-ua-platform":"\"macOS\"","sec-fetch-dest":"iframe","sec-fetch-mode":"navigate","sec-fetch-site":"cross-site","sec-fetch-storage-access":"active","upgrade-insecure-requests":"1","x-forwarded-for":"42.113.16.127","x-forwarded-proto":"https"},"query":{"DOMAIN":"b24-7woulk.bitrix24.vn","PROTOCOL":"1","LANG":"vn","APP_SID":"e3fea32597d12faa0b1da0dc7c4c0dac"},"body":{"AUTH_ID":"3175a168007b412d007b3dd100000001403807f31828aa0cff78bdac1862cb80d2cefd","AUTH_EXPIRES":"3600","REFRESH_ID":"21f4c868007b412d007b3dd1000000014038071b2cae837cd296f6f818d553163a828a","member_id":"78d52900632fa1e9acbd6c03fe41e332","status":"L","PLACEMENT":"DEFAULT","PLACEMENT_OPTIONS":"{\"IFRAME\":\"Y\",\"IFRAME_TYPE\":\"SIDE_SLIDER\",\"any\":\"5\\/\"}"},"rawBody":"{\n  \"AUTH_ID\": \"3175a168007b412d007b3dd100000001403807f31828aa0cff78bdac1862cb80d2cefd\",\n  \"AUTH_EXPIRES\": \"3600\",\n  \"REFRESH_ID\": \"21f4c868007b412d007b3dd1000000014038071b2cae837cd296f6f818d553163a828a\",\n  \"member_id\": \"78d52900632fa1e9acbd6c03fe41e332\",\n  \"status\": \"L\",\n  \"PLACEMENT\": \"DEFAULT\",\n  \"PLACEMENT_OPTIONS\": \"{\\\"IFRAME\\\":\\\"Y\\\",\\\"IFRAME_TYPE\\\":\\\"SIDE_SLIDER\\\",\\\"any\\\":\\\"5\\\\/\\\"}\"\n}","contentType":"application/x-www-form-urlencoded","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","hasAuthData":false,"requestMethod":"POST","originalUrl":"/?DOMAIN=b24-7woulk.bitrix24.vn&PROTOCOL=1&LANG=vn&APP_SID=e3fea32597d12faa0b1da0dc7c4c0dac"}
2025-08-17 12:22:42 [INFO]: Processing traditional installation | {"domain":"b24-7woulk.bitrix24.vn","protocol":"1","language":"vn","appSid":"e3fea32597d12faa0b1da0dc7c4c0dac"}
2025-08-17 12:22:42 [INFO]: Request completed | {"method":"POST","url":"/?DOMAIN=b24-7woulk.bitrix24.vn&PROTOCOL=1&LANG=vn&APP_SID=e3fea32597d12faa0b1da0dc7c4c0dac","statusCode":200,"duration":10,"ip":"::1"}
2025-08-17 12:25:01 [INFO]: SIGINT received, shutting down gracefully
2025-08-17 12:25:02 [INFO]: Server running on port 3000
2025-08-17 12:25:02 [INFO]: Environment:
2025-08-17 12:26:10 [INFO]: Request received | {"method":"POST","url":"/webhook/jotform","ip":"::1"}
2025-08-17 12:26:10 [INFO]: Jotform webhook received | {"submissionID":"6312175687216518628","hasRawRequest":true,"ip":"::1"}
2025-08-17 12:26:10 [INFO]: Contact data parsed | {"submissionId":"6312175687216518628","fullName":"Trần Huy","email":"tuanhuy227@gmail.com","phone":"(097) 828-1697"}
2025-08-17 12:26:10 [INFO]: Creating Bitrix24 lead | {"submissionId":"6312175687216518628","leadTitle":"Jotform Lead: Trần Huy","hasName":true,"hasEmail":true,"hasPhone":true}
2025-08-17 12:26:10 [ERROR]: Bitrix24 API call failed | {"method":"crm.lead.add","error":"No access token available. Please authorize first."}
2025-08-17 12:26:10 [WARN]: OAuth2 failed, trying legacy webhook | {"error":"No access token available. Please authorize first."}
2025-08-17 12:26:10 [INFO]: Creating lead via legacy webhook | {"url":"https://b24-7woulk.bitrix24.vn/rest/1/rg1j0gwz9z74hdqe/","submissionId":"6312175687216518628"}
2025-08-17 12:26:10 [ERROR]: Legacy webhook lead creation failed | {"error":"Request failed with status code 401","submissionId":"6312175687216518628"}
2025-08-17 12:26:10 [ERROR]: Failed to create lead in Bitrix24 | {"error":"Request failed with status code 401","submissionId":"6312175687216518628"}
2025-08-17 12:26:10 [ERROR]: Failed to create lead | {"submissionId":"6312175687216518628","error":"Request failed with status code 401","duration":529}
2025-08-17 12:26:10 [INFO]: Request completed | {"method":"POST","url":"/jotform","statusCode":500,"duration":539,"ip":"::1"}
2025-08-17 12:31:21 [INFO]: SIGINT received, shutting down gracefully
2025-08-17 12:31:22 [INFO]: 📁 NO TOKEN FILE FOUND | {"tokenFile":"/Users/trantuanhuy/api/jotform-bitrix24-integration/data/tokens.json"}
2025-08-17 12:31:22 [INFO]: 📁 NO TOKEN FILE FOUND | {"tokenFile":"/Users/trantuanhuy/api/jotform-bitrix24-integration/data/tokens.json"}
2025-08-17 12:31:22 [INFO]: 📁 NO TOKEN FILE FOUND | {"tokenFile":"/Users/trantuanhuy/api/jotform-bitrix24-integration/data/tokens.json"}
2025-08-17 12:31:22 [INFO]: 📁 NO TOKEN FILE FOUND | {"tokenFile":"/Users/trantuanhuy/api/jotform-bitrix24-integration/data/tokens.json"}
2025-08-17 12:31:22 [INFO]: Server running on port 3000
2025-08-17 12:31:22 [INFO]: Environment:
2025-08-17 12:32:10 [INFO]: Request received | {"method":"POST","url":"/webhook/jotform","ip":"::1"}
2025-08-17 12:32:10 [INFO]: Jotform webhook received | {"submissionID":"6312179307217745782","hasRawRequest":true,"ip":"::1"}
2025-08-17 12:32:10 [INFO]: Contact data parsed | {"submissionId":"6312179307217745782","fullName":"Trần Huy","email":"tuanhuy227@gmail.com","phone":"(097) 828-1697"}
2025-08-17 12:32:10 [INFO]: Creating Bitrix24 lead | {"submissionId":"6312179307217745782","leadTitle":"Jotform Lead: Trần Huy","hasName":true,"hasEmail":true,"hasPhone":true}
2025-08-17 12:32:10 [ERROR]: Bitrix24 API call failed | {"method":"crm.lead.add","error":"No access token available. Please authorize first."}
2025-08-17 12:32:10 [WARN]: OAuth2 failed, trying legacy webhook | {"error":"No access token available. Please authorize first."}
2025-08-17 12:32:10 [INFO]: Creating lead via legacy webhook | {"url":"https://b24-7woulk.bitrix24.vn/rest/1/rg1j0gwz9z74hdqe/","submissionId":"6312179307217745782"}
2025-08-17 12:32:11 [ERROR]: Legacy webhook lead creation failed | {"error":"Request failed with status code 401","submissionId":"6312179307217745782"}
2025-08-17 12:32:11 [ERROR]: Failed to create lead in Bitrix24 | {"error":"Request failed with status code 401","submissionId":"6312179307217745782"}
2025-08-17 12:32:11 [ERROR]: Failed to create lead | {"submissionId":"6312179307217745782","error":"Request failed with status code 401","duration":484}
2025-08-17 12:32:11 [INFO]: Request completed | {"method":"POST","url":"/jotform","statusCode":500,"duration":494,"ip":"::1"}
2025-08-17 15:15:38 [INFO]: SIGINT received, shutting down gracefully
2025-08-17 15:15:39 [INFO]: 📁 NO TOKEN FILE FOUND | {"tokenFile":"/Users/trantuanhuy/api/jotform-bitrix24-integration/data/tokens.json"}
2025-08-17 15:15:39 [INFO]: 📁 NO TOKEN FILE FOUND | {"tokenFile":"/Users/trantuanhuy/api/jotform-bitrix24-integration/data/tokens.json"}
2025-08-17 15:15:39 [INFO]: 📁 NO TOKEN FILE FOUND | {"tokenFile":"/Users/trantuanhuy/api/jotform-bitrix24-integration/data/tokens.json"}
2025-08-17 15:15:39 [INFO]: 📁 NO TOKEN FILE FOUND | {"tokenFile":"/Users/trantuanhuy/api/jotform-bitrix24-integration/data/tokens.json"}
2025-08-17 15:15:39 [INFO]: Server running on port 3000
2025-08-17 15:15:39 [INFO]: Environment:
2025-08-17 15:26:56 [INFO]: Request received | {"method":"POST","url":"/?DOMAIN=b24-7woulk.bitrix24.vn&PROTOCOL=1&LANG=vn&APP_SID=fe0eeffa0a7ae1ac8cd57c99fd9717eb","ip":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"}
2025-08-17 15:26:56 [INFO]: 🚀 BITRIX24 INSTALLATION REQUEST - FULL DATA | {"headers":{"host":"vitamins-former-intelligent-steal.trycloudflare.com","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","content-length":"363","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7","accept-encoding":"gzip","accept-language":"vi-VN,vi;q=0.9,fr-FR;q=0.8,fr;q=0.7,en-US;q=0.6,en;q=0.5","cache-control":"max-age=0","cdn-loop":"cloudflare; loops=1; subreqs=1","cf-connecting-ip":"42.113.16.127","cf-ew-via":"15","cf-ipcountry":"VN","cf-ray":"9707ca1962d709e0-HKG","cf-visitor":"{\"scheme\":\"https\"}","cf-warp-tag-id":"18a3a5e7-72c2-42dd-96c3-a1401dbc9af5","cf-worker":"trycloudflare.com","connection":"keep-alive","content-type":"application/x-www-form-urlencoded","origin":"https://b24-7woulk.bitrix24.vn","priority":"u=0, i","referer":"https://b24-7woulk.bitrix24.vn/","sec-ch-ua":"\"Not;A=Brand\";v=\"99\", \"Google Chrome\";v=\"139\", \"Chromium\";v=\"139\"","sec-ch-ua-mobile":"?0","sec-ch-ua-platform":"\"macOS\"","sec-fetch-dest":"iframe","sec-fetch-mode":"navigate","sec-fetch-site":"cross-site","sec-fetch-storage-access":"active","upgrade-insecure-requests":"1","x-forwarded-for":"42.113.16.127","x-forwarded-proto":"https"},"query":{"DOMAIN":"b24-7woulk.bitrix24.vn","PROTOCOL":"1","LANG":"vn","APP_SID":"fe0eeffa0a7ae1ac8cd57c99fd9717eb"},"body":{"AUTH_ID":"60a0a168007b4179007b3dd1000000014038078bc32d8f6f87558ca267b8c79946a9a0","AUTH_EXPIRES":"3600","REFRESH_ID":"501fc968007b4179007b3dd1000000014038071f4fd45f30b3919e1584f3191869430a","member_id":"78d52900632fa1e9acbd6c03fe41e332","status":"L","PLACEMENT":"DEFAULT","PLACEMENT_OPTIONS":"{\"IFRAME\":\"Y\",\"IFRAME_TYPE\":\"SIDE_SLIDER\",\"any\":\"7\\/\"}"},"rawBody":"{\n  \"AUTH_ID\": \"60a0a168007b4179007b3dd1000000014038078bc32d8f6f87558ca267b8c79946a9a0\",\n  \"AUTH_EXPIRES\": \"3600\",\n  \"REFRESH_ID\": \"501fc968007b4179007b3dd1000000014038071f4fd45f30b3919e1584f3191869430a\",\n  \"member_id\": \"78d52900632fa1e9acbd6c03fe41e332\",\n  \"status\": \"L\",\n  \"PLACEMENT\": \"DEFAULT\",\n  \"PLACEMENT_OPTIONS\": \"{\\\"IFRAME\\\":\\\"Y\\\",\\\"IFRAME_TYPE\\\":\\\"SIDE_SLIDER\\\",\\\"any\\\":\\\"7\\\\/\\\"}\"\n}","contentType":"application/x-www-form-urlencoded","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","hasAuthData":false,"requestMethod":"POST","originalUrl":"/?DOMAIN=b24-7woulk.bitrix24.vn&PROTOCOL=1&LANG=vn&APP_SID=fe0eeffa0a7ae1ac8cd57c99fd9717eb"}
2025-08-17 15:26:56 [INFO]: 🎯 PROCESSING INSTALLATION WITH DIRECT AUTH DATA | {"authId":"60a0a168007b4179007b...","refreshId":"501fc968007b4179007b...","authExpires":"3600","memberId":"78d52900632fa1e9acbd6c03fe41e332","status":"L","domain":"b24-7woulk.bitrix24.vn","placement":"DEFAULT","placementOptions":"{\"IFRAME\":\"Y\",\"IFRAME_TYPE\":\"SIDE_SLIDER\",\"any\":\"7\\/\"}"}
2025-08-17 15:26:56 [INFO]: Processing installation auth data | {"hasAccessToken":true,"hasRefreshToken":true,"domain":"b24-7woulk.bitrix24.vn","status":"L","expiresIn":"3600"}
2025-08-17 15:26:56 [INFO]: 💾 TOKENS SAVED TO FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-17T09:26:56.885Z","hasAccessToken":true,"hasRefreshToken":true}
2025-08-17 15:26:56 [INFO]: 💾 TOKENS SAVED TO PERSISTENT STORAGE | {"domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-17 15:26:56 [INFO]: ✅ SIMPLIFIED AUTH PROCESSED SUCCESSFULLY | {"domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332","status":"L","hasAccessToken":true,"hasRefreshToken":true,"clientEndpoint":"https://b24-7woulk.bitrix24.vn/rest/","serverEndpoint":"https://oauth.bitrix.info/rest/"}
2025-08-17 15:26:56 [INFO]: Request completed | {"method":"POST","url":"/?DOMAIN=b24-7woulk.bitrix24.vn&PROTOCOL=1&LANG=vn&APP_SID=fe0eeffa0a7ae1ac8cd57c99fd9717eb","statusCode":200,"duration":15,"ip":"::1"}
2025-08-17 15:28:05 [INFO]: Request received | {"method":"POST","url":"/webhook/jotform","ip":"::1"}
2025-08-17 15:28:05 [INFO]: Jotform webhook received | {"submissionID":"6312284847217533039","hasRawRequest":true,"ip":"::1"}
2025-08-17 15:28:05 [INFO]: Contact data parsed | {"submissionId":"6312284847217533039","fullName":"Trần Huy","email":"tuanhuy227@gmail.com","phone":"(097) 828-1697"}
2025-08-17 15:28:05 [INFO]: Creating Bitrix24 lead | {"submissionId":"6312284847217533039","leadTitle":"Jotform Lead: Trần Huy","hasName":true,"hasEmail":true,"hasPhone":true}
2025-08-17 15:28:05 [ERROR]: Bitrix24 API call failed | {"method":"crm.lead.add","error":"No access token available. Please authorize first."}
2025-08-17 15:28:05 [WARN]: OAuth2 failed, trying legacy webhook | {"error":"No access token available. Please authorize first."}
2025-08-17 15:28:05 [INFO]: Creating lead via legacy webhook | {"url":"https://b24-7woulk.bitrix24.vn/rest/1/rg1j0gwz9z74hdqe/","submissionId":"6312284847217533039"}
2025-08-17 15:28:05 [ERROR]: Legacy webhook lead creation failed | {"error":"Request failed with status code 401","submissionId":"6312284847217533039"}
2025-08-17 15:28:05 [ERROR]: Failed to create lead in Bitrix24 | {"error":"Request failed with status code 401","submissionId":"6312284847217533039"}
2025-08-17 15:28:05 [ERROR]: Failed to create lead | {"submissionId":"6312284847217533039","error":"Request failed with status code 401","duration":547}
2025-08-17 15:28:05 [INFO]: Request completed | {"method":"POST","url":"/jotform","statusCode":500,"duration":555,"ip":"::1"}
2025-08-17 15:29:02 [INFO]: Request received | {"method":"GET","url":"/oauth/authorize","ip":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"}
2025-08-17 15:29:02 [INFO]: Generated OAuth2 authorization URL | {"url":"https://b24-7woulk.bitrix24.vn/oauth/authorize/?client_id=local.68a057ddc375a4.06266669&state=rnd2gmo7igis59gjum2r","clientId":"local.68a057ddc375a4.06266669","domain":"b24-7woulk.bitrix24.vn","state":"rnd2gmo7igis59gjum2r"}
2025-08-17 15:29:02 [INFO]: Redirecting to Bitrix24 OAuth2 authorization | {"authUrl":"https://b24-7woulk.bitrix24.vn/oauth/authorize/?client_id=local.68a057ddc375a4.06266669&state=rnd2gm..."}
2025-08-17 15:29:02 [INFO]: Request completed | {"method":"GET","url":"/authorize","statusCode":200,"duration":9,"ip":"::1"}
2025-08-17 15:29:03 [INFO]: Request received | {"method":"GET","url":"/favicon.ico","ip":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"}
2025-08-17 15:29:03 [WARN]: Route not found | {"method":"GET","url":"/","ip":"::1"}
2025-08-17 15:29:03 [INFO]: Request completed | {"method":"GET","url":"/","statusCode":404,"duration":2,"ip":"::1"}
2025-08-17 15:29:17 [INFO]: Request received | {"method":"GET","url":"/oauth/authorize","ip":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"}
2025-08-17 15:29:17 [INFO]: Generated OAuth2 authorization URL | {"url":"https://b24-7woulk.bitrix24.vn/oauth/authorize/?client_id=local.68a057ddc375a4.06266669&state=83m7cwvuxkh0msd1xskdhrd","clientId":"local.68a057ddc375a4.06266669","domain":"b24-7woulk.bitrix24.vn","state":"83m7cwvuxkh0msd1xskdhrd"}
2025-08-17 15:29:17 [INFO]: Redirecting to Bitrix24 OAuth2 authorization | {"authUrl":"https://b24-7woulk.bitrix24.vn/oauth/authorize/?client_id=local.68a057ddc375a4.06266669&state=83m7cw..."}
2025-08-17 15:29:17 [INFO]: Request completed | {"method":"GET","url":"/authorize","statusCode":200,"duration":2,"ip":"::1"}
2025-08-17 15:29:47 [INFO]: Request received | {"method":"POST","url":"/webhook/jotform","ip":"::1"}
2025-08-17 15:29:47 [INFO]: Jotform webhook received | {"submissionID":"6312285867215409953","hasRawRequest":true,"ip":"::1"}
2025-08-17 15:29:47 [INFO]: Contact data parsed | {"submissionId":"6312285867215409953","fullName":"Trần Huy","email":"tuanhuy227@gmail.com","phone":"(097) 828-1697"}
2025-08-17 15:29:47 [INFO]: Creating Bitrix24 lead | {"submissionId":"6312285867215409953","leadTitle":"Jotform Lead: Trần Huy","hasName":true,"hasEmail":true,"hasPhone":true}
2025-08-17 15:29:47 [ERROR]: Bitrix24 API call failed | {"method":"crm.lead.add","error":"No access token available. Please authorize first."}
2025-08-17 15:29:47 [WARN]: OAuth2 failed, trying legacy webhook | {"error":"No access token available. Please authorize first."}
2025-08-17 15:29:47 [INFO]: Creating lead via legacy webhook | {"url":"https://b24-7woulk.bitrix24.vn/rest/1/rg1j0gwz9z74hdqe/","submissionId":"6312285867215409953"}
2025-08-17 15:29:47 [ERROR]: Legacy webhook lead creation failed | {"error":"Request failed with status code 401","submissionId":"6312285867215409953"}
2025-08-17 15:29:47 [ERROR]: Failed to create lead in Bitrix24 | {"error":"Request failed with status code 401","submissionId":"6312285867215409953"}
2025-08-17 15:29:47 [ERROR]: Failed to create lead | {"submissionId":"6312285867215409953","error":"Request failed with status code 401","duration":490}
2025-08-17 15:29:47 [INFO]: Request completed | {"method":"POST","url":"/jotform","statusCode":500,"duration":494,"ip":"::1"}
2025-08-17 15:30:12 [INFO]: SIGINT received, shutting down gracefully
2025-08-17 15:34:08 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-17T09:26:56.885Z","isExpired":false,"hasAccessToken":true,"hasRefreshToken":true}
2025-08-17 15:34:08 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":true,"hasRefreshToken":true,"expiresAt":"2025-08-17T09:26:56.885Z"}
2025-08-17 15:34:08 [INFO]: Tokens updated manually | {"hasAccessToken":true,"hasRefreshToken":true}
2025-08-17 15:34:08 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-17T09:26:56.885Z","isExpired":false,"hasAccessToken":true,"hasRefreshToken":true}
2025-08-17 15:34:08 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":true,"hasRefreshToken":true,"expiresAt":"2025-08-17T09:26:56.885Z"}
2025-08-17 15:34:08 [INFO]: Tokens updated manually | {"hasAccessToken":true,"hasRefreshToken":true}
2025-08-17 15:34:08 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-17T09:26:56.885Z","isExpired":false,"hasAccessToken":true,"hasRefreshToken":true}
2025-08-17 15:34:08 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":true,"hasRefreshToken":true,"expiresAt":"2025-08-17T09:26:56.885Z"}
2025-08-17 15:34:08 [INFO]: Tokens updated manually | {"hasAccessToken":true,"hasRefreshToken":true}
2025-08-17 15:34:08 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-17T09:26:56.885Z","isExpired":false,"hasAccessToken":true,"hasRefreshToken":true}
2025-08-17 15:34:08 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":true,"hasRefreshToken":true,"expiresAt":"2025-08-17T09:26:56.885Z"}
2025-08-17 15:34:08 [INFO]: Tokens updated manually | {"hasAccessToken":true,"hasRefreshToken":true}
2025-08-17 15:34:08 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-17T09:26:56.885Z","isExpired":false,"hasAccessToken":true,"hasRefreshToken":true}
2025-08-17 15:34:08 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":true,"hasRefreshToken":true,"expiresAt":"2025-08-17T09:26:56.885Z"}
2025-08-17 15:34:08 [INFO]: Tokens updated manually | {"hasAccessToken":true,"hasRefreshToken":true}
2025-08-17 15:38:01 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-17T09:26:56.885Z","isExpired":false,"hasAccessToken":true,"hasRefreshToken":true}
2025-08-17 15:38:01 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":true,"hasRefreshToken":true,"expiresAt":"2025-08-17T09:26:56.885Z"}
2025-08-17 15:38:01 [INFO]: Tokens updated manually | {"hasAccessToken":true,"hasRefreshToken":true}
2025-08-17 15:38:01 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-17T09:26:56.885Z","isExpired":false,"hasAccessToken":true,"hasRefreshToken":true}
2025-08-17 15:38:01 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":true,"hasRefreshToken":true,"expiresAt":"2025-08-17T09:26:56.885Z"}
2025-08-17 15:38:01 [INFO]: Tokens updated manually | {"hasAccessToken":true,"hasRefreshToken":true}
2025-08-17 15:38:01 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-17T09:26:56.885Z","isExpired":false,"hasAccessToken":true,"hasRefreshToken":true}
2025-08-17 15:38:01 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":true,"hasRefreshToken":true,"expiresAt":"2025-08-17T09:26:56.885Z"}
2025-08-17 15:38:01 [INFO]: Tokens updated manually | {"hasAccessToken":true,"hasRefreshToken":true}
2025-08-17 15:38:01 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-17T09:26:56.885Z","isExpired":false,"hasAccessToken":true,"hasRefreshToken":true}
2025-08-17 15:38:01 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":true,"hasRefreshToken":true,"expiresAt":"2025-08-17T09:26:56.885Z"}
2025-08-17 15:38:01 [INFO]: Tokens updated manually | {"hasAccessToken":true,"hasRefreshToken":true}
2025-08-17 15:38:01 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-17T09:26:56.885Z","isExpired":false,"hasAccessToken":true,"hasRefreshToken":true}
2025-08-17 15:38:01 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":true,"hasRefreshToken":true,"expiresAt":"2025-08-17T09:26:56.885Z"}
2025-08-17 15:38:01 [INFO]: Tokens updated manually | {"hasAccessToken":true,"hasRefreshToken":true}
2025-08-17 15:38:09 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-17T09:26:56.885Z","isExpired":false,"hasAccessToken":true,"hasRefreshToken":true}
2025-08-17 15:38:09 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":true,"hasRefreshToken":true,"expiresAt":"2025-08-17T09:26:56.885Z"}
2025-08-17 15:38:09 [INFO]: Tokens updated manually | {"hasAccessToken":true,"hasRefreshToken":true}
2025-08-17 15:38:09 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-17T09:26:56.885Z","isExpired":false,"hasAccessToken":true,"hasRefreshToken":true}
2025-08-17 15:38:09 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":true,"hasRefreshToken":true,"expiresAt":"2025-08-17T09:26:56.885Z"}
2025-08-17 15:38:09 [INFO]: Tokens updated manually | {"hasAccessToken":true,"hasRefreshToken":true}
2025-08-17 15:38:09 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-17T09:26:56.885Z","isExpired":false,"hasAccessToken":true,"hasRefreshToken":true}
2025-08-17 15:38:09 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":true,"hasRefreshToken":true,"expiresAt":"2025-08-17T09:26:56.885Z"}
2025-08-17 15:38:09 [INFO]: Tokens updated manually | {"hasAccessToken":true,"hasRefreshToken":true}
2025-08-17 15:38:09 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-17T09:26:56.885Z","isExpired":false,"hasAccessToken":true,"hasRefreshToken":true}
2025-08-17 15:38:09 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":true,"hasRefreshToken":true,"expiresAt":"2025-08-17T09:26:56.885Z"}
2025-08-17 15:38:09 [INFO]: Tokens updated manually | {"hasAccessToken":true,"hasRefreshToken":true}
2025-08-17 15:38:09 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-17T09:26:56.885Z","isExpired":false,"hasAccessToken":true,"hasRefreshToken":true}
2025-08-17 15:38:09 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":true,"hasRefreshToken":true,"expiresAt":"2025-08-17T09:26:56.885Z"}
2025-08-17 15:38:09 [INFO]: Tokens updated manually | {"hasAccessToken":true,"hasRefreshToken":true}
2025-08-17 15:38:09 [INFO]: Server running on port 3000
2025-08-17 15:38:09 [INFO]: Environment:
2025-08-17 15:38:27 [INFO]: Request received | {"method":"POST","url":"/webhook/jotform","ip":"::1"}
2025-08-17 15:38:27 [INFO]: Jotform webhook received | {"submissionID":"6312291057217204316","hasRawRequest":true,"ip":"::1"}
2025-08-17 15:38:27 [INFO]: Contact data parsed | {"submissionId":"6312291057217204316","fullName":"Trần Huy","email":"tuanhuy227@gmail.com","phone":"(097) 828-1697"}
2025-08-17 15:38:27 [INFO]: Creating Bitrix24 lead | {"submissionId":"6312291057217204316","leadTitle":"Jotform Lead: Trần Huy","hasName":true,"hasEmail":true,"hasPhone":true}
2025-08-17 15:38:27 [INFO]: Making Bitrix24 API call | {"method":"crm.lead.add","url":"https://b24-7woulk.bitrix24.vn/rest/crm.lead.add","hasAccessToken":true,"paramsCount":1}
2025-08-17 15:38:28 [INFO]: Bitrix24 API call successful | {"method":"crm.lead.add","hasResult":true,"time":{"start":1755419907.702542,"finish":1755419908.729403,"duration":1.0268609523773193,"processing":0.9874038696289062,"date_start":"2025-08-17T11:38:27+03:00","date_finish":"2025-08-17T11:38:28+03:00","operating_reset_at":1755420507,"operating":0.9873909950256348}}
2025-08-17 15:38:28 [INFO]: Lead created successfully in Bitrix24 | {"leadId":5,"submissionId":"6312291057217204316","method":"OAuth2"}
2025-08-17 15:38:28 [INFO]: Lead created successfully | {"submissionId":"6312291057217204316","leadId":5,"duration":1562}
2025-08-17 15:38:28 [INFO]: Request completed | {"method":"POST","url":"/jotform","statusCode":200,"duration":1593,"ip":"::1"}
2025-08-17 16:02:34 [INFO]: SIGINT received, shutting down gracefully
2025-08-17 16:02:35 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-17T09:26:56.885Z","isExpired":false,"hasAccessToken":true,"hasRefreshToken":true}
2025-08-17 16:02:35 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":true,"hasRefreshToken":true,"expiresAt":"2025-08-17T09:26:56.885Z"}
2025-08-17 16:02:35 [INFO]: Tokens updated manually | {"hasAccessToken":true,"hasRefreshToken":true}
2025-08-17 16:02:35 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-17T09:26:56.885Z","isExpired":false,"hasAccessToken":true,"hasRefreshToken":true}
2025-08-17 16:02:35 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":true,"hasRefreshToken":true,"expiresAt":"2025-08-17T09:26:56.885Z"}
2025-08-17 16:02:35 [INFO]: Tokens updated manually | {"hasAccessToken":true,"hasRefreshToken":true}
2025-08-17 16:02:35 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-17T09:26:56.885Z","isExpired":false,"hasAccessToken":true,"hasRefreshToken":true}
2025-08-17 16:02:35 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":true,"hasRefreshToken":true,"expiresAt":"2025-08-17T09:26:56.885Z"}
2025-08-17 16:02:35 [INFO]: Tokens updated manually | {"hasAccessToken":true,"hasRefreshToken":true}
2025-08-17 16:02:35 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-17T09:26:56.885Z","isExpired":false,"hasAccessToken":true,"hasRefreshToken":true}
2025-08-17 16:02:35 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":true,"hasRefreshToken":true,"expiresAt":"2025-08-17T09:26:56.885Z"}
2025-08-17 16:02:35 [INFO]: Tokens updated manually | {"hasAccessToken":true,"hasRefreshToken":true}
2025-08-17 16:02:35 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-17T09:26:56.885Z","isExpired":false,"hasAccessToken":true,"hasRefreshToken":true}
2025-08-17 16:02:35 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":true,"hasRefreshToken":true,"expiresAt":"2025-08-17T09:26:56.885Z"}
2025-08-17 16:02:35 [INFO]: Tokens updated manually | {"hasAccessToken":true,"hasRefreshToken":true}
2025-08-17 16:02:35 [INFO]: Server running on port 3000
2025-08-17 16:02:35 [INFO]: Environment:
2025-08-17 16:03:45 [INFO]: Request received | {"method":"POST","url":"/webhook/jotform","ip":"::1"}
2025-08-17 16:03:45 [INFO]: Jotform webhook received | {"submissionID":"6312306247217209963","hasRawRequest":true,"ip":"::1"}
2025-08-17 16:03:45 [INFO]: Contact data parsed | {"submissionId":"6312306247217209963","fullName":"Trần123 Huy","email":"tuanhuy227@gmail.com","phone":"(097) 828-1697"}
2025-08-17 16:03:45 [INFO]: Creating Bitrix24 lead | {"submissionId":"6312306247217209963","leadTitle":"Jotform Lead: Trần123 Huy","hasName":true,"hasEmail":true,"hasPhone":true}
2025-08-17 16:03:45 [INFO]: Making Bitrix24 API call | {"method":"crm.lead.add","url":"https://b24-7woulk.bitrix24.vn/rest/crm.lead.add","hasAccessToken":true,"paramsCount":1}
2025-08-17 16:03:46 [INFO]: Bitrix24 API call successful | {"method":"crm.lead.add","hasResult":true,"time":{"start":1755421425.581019,"finish":1755421426.547997,"duration":0.9669780731201172,"processing":0.7976019382476807,"date_start":"2025-08-17T12:03:45+03:00","date_finish":"2025-08-17T12:03:46+03:00","operating_reset_at":1755422025,"operating":0.79758620262146}}
2025-08-17 16:03:46 [INFO]: Lead created successfully in Bitrix24 | {"leadId":7,"submissionId":"6312306247217209963","method":"OAuth2"}
2025-08-17 16:03:46 [INFO]: Lead created successfully | {"submissionId":"6312306247217209963","leadId":7,"duration":1462}
2025-08-17 16:03:46 [INFO]: Request completed | {"method":"POST","url":"/jotform","statusCode":200,"duration":1477,"ip":"::1"}
2025-08-17 16:07:58 [INFO]: Request received | {"method":"POST","url":"/webhook/jotform","ip":"::1"}
2025-08-17 16:07:58 [INFO]: Jotform webhook received | {"submissionID":"6312308777215993983","hasRawRequest":true,"ip":"::1"}
2025-08-17 16:07:58 [INFO]: Contact data parsed | {"submissionId":"6312308777215993983","fullName":"Trần Huy","email":"tuanhuy227@gmail.com","phone":"(097) 828-1697"}
2025-08-17 16:07:58 [INFO]: Creating Bitrix24 lead | {"submissionId":"6312308777215993983","leadTitle":"Jotform Lead: Trần Huy","hasName":true,"hasEmail":true,"hasPhone":true}
2025-08-17 16:07:58 [INFO]: Making Bitrix24 API call | {"method":"crm.lead.add","url":"https://b24-7woulk.bitrix24.vn/rest/crm.lead.add","hasAccessToken":true,"paramsCount":1}
2025-08-17 16:07:59 [INFO]: Bitrix24 API call successful | {"method":"crm.lead.add","hasResult":true,"time":{"start":1755421678.935368,"finish":1755421679.633072,"duration":0.6977038383483887,"processing":0.6706020832061768,"date_start":"2025-08-17T12:07:58+03:00","date_finish":"2025-08-17T12:07:59+03:00","operating_reset_at":1755422278,"operating":1.4681711196899414}}
2025-08-17 16:07:59 [INFO]: Lead created successfully in Bitrix24 | {"leadId":9,"submissionId":"6312308777215993983","method":"OAuth2"}
2025-08-17 16:07:59 [INFO]: Lead created successfully | {"submissionId":"6312308777215993983","leadId":9,"duration":1139}
2025-08-17 16:07:59 [INFO]: Request completed | {"method":"POST","url":"/jotform","statusCode":200,"duration":1144,"ip":"::1"}
2025-08-17 16:18:12 [INFO]: SIGINT received, shutting down gracefully
2025-08-21 22:49:33 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":"2025-08-17T09:26:56.885Z","now":"2025-08-21T15:49:33.840Z"}
2025-08-21 22:49:33 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-17T09:26:56.885Z","isExpired":true,"hasAccessToken":true,"hasRefreshToken":true}
2025-08-21 22:49:33 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":true,"hasRefreshToken":true,"expiresAt":"2025-08-17T09:26:56.885Z"}
2025-08-21 22:49:33 [INFO]: Tokens updated manually | {"hasAccessToken":true,"hasRefreshToken":true}
2025-08-21 22:49:33 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":"2025-08-17T09:26:56.885Z","now":"2025-08-21T15:49:33.842Z"}
2025-08-21 22:49:33 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-17T09:26:56.885Z","isExpired":true,"hasAccessToken":true,"hasRefreshToken":true}
2025-08-21 22:49:33 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":true,"hasRefreshToken":true,"expiresAt":"2025-08-17T09:26:56.885Z"}
2025-08-21 22:49:33 [INFO]: Tokens updated manually | {"hasAccessToken":true,"hasRefreshToken":true}
2025-08-21 22:49:33 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":"2025-08-17T09:26:56.885Z","now":"2025-08-21T15:49:33.843Z"}
2025-08-21 22:49:33 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-17T09:26:56.885Z","isExpired":true,"hasAccessToken":true,"hasRefreshToken":true}
2025-08-21 22:49:33 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":true,"hasRefreshToken":true,"expiresAt":"2025-08-17T09:26:56.885Z"}
2025-08-21 22:49:33 [INFO]: Tokens updated manually | {"hasAccessToken":true,"hasRefreshToken":true}
2025-08-21 22:49:33 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":"2025-08-17T09:26:56.885Z","now":"2025-08-21T15:49:33.844Z"}
2025-08-21 22:49:33 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-17T09:26:56.885Z","isExpired":true,"hasAccessToken":true,"hasRefreshToken":true}
2025-08-21 22:49:33 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":true,"hasRefreshToken":true,"expiresAt":"2025-08-17T09:26:56.885Z"}
2025-08-21 22:49:33 [INFO]: Tokens updated manually | {"hasAccessToken":true,"hasRefreshToken":true}
2025-08-21 22:49:33 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":"2025-08-17T09:26:56.885Z","now":"2025-08-21T15:49:33.845Z"}
2025-08-21 22:49:33 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-17T09:26:56.885Z","isExpired":true,"hasAccessToken":true,"hasRefreshToken":true}
2025-08-21 22:49:33 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":true,"hasRefreshToken":true,"expiresAt":"2025-08-17T09:26:56.885Z"}
2025-08-21 22:49:33 [INFO]: Tokens updated manually | {"hasAccessToken":true,"hasRefreshToken":true}
2025-08-21 23:06:16 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":"2025-08-17T09:26:56.885Z","now":"2025-08-21T16:06:16.600Z"}
2025-08-21 23:06:16 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-17T09:26:56.885Z","isExpired":true,"hasAccessToken":true,"hasRefreshToken":true}
2025-08-21 23:06:16 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":true,"hasRefreshToken":true,"expiresAt":"2025-08-17T09:26:56.885Z"}
2025-08-21 23:06:16 [INFO]: Tokens updated manually | {"hasAccessToken":true,"hasRefreshToken":true}
2025-08-21 23:06:16 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":"2025-08-17T09:26:56.885Z","now":"2025-08-21T16:06:16.602Z"}
2025-08-21 23:06:16 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-17T09:26:56.885Z","isExpired":true,"hasAccessToken":true,"hasRefreshToken":true}
2025-08-21 23:06:16 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":true,"hasRefreshToken":true,"expiresAt":"2025-08-17T09:26:56.885Z"}
2025-08-21 23:06:16 [INFO]: Tokens updated manually | {"hasAccessToken":true,"hasRefreshToken":true}
2025-08-21 23:06:16 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":"2025-08-17T09:26:56.885Z","now":"2025-08-21T16:06:16.603Z"}
2025-08-21 23:06:16 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-17T09:26:56.885Z","isExpired":true,"hasAccessToken":true,"hasRefreshToken":true}
2025-08-21 23:06:16 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":true,"hasRefreshToken":true,"expiresAt":"2025-08-17T09:26:56.885Z"}
2025-08-21 23:06:16 [INFO]: Tokens updated manually | {"hasAccessToken":true,"hasRefreshToken":true}
2025-08-21 23:06:16 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":"2025-08-17T09:26:56.885Z","now":"2025-08-21T16:06:16.604Z"}
2025-08-21 23:06:16 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-17T09:26:56.885Z","isExpired":true,"hasAccessToken":true,"hasRefreshToken":true}
2025-08-21 23:06:16 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":true,"hasRefreshToken":true,"expiresAt":"2025-08-17T09:26:56.885Z"}
2025-08-21 23:06:16 [INFO]: Tokens updated manually | {"hasAccessToken":true,"hasRefreshToken":true}
2025-08-21 23:06:16 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":"2025-08-17T09:26:56.885Z","now":"2025-08-21T16:06:16.605Z"}
2025-08-21 23:06:16 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-17T09:26:56.885Z","isExpired":true,"hasAccessToken":true,"hasRefreshToken":true}
2025-08-21 23:06:16 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":true,"hasRefreshToken":true,"expiresAt":"2025-08-17T09:26:56.885Z"}
2025-08-21 23:06:16 [INFO]: Tokens updated manually | {"hasAccessToken":true,"hasRefreshToken":true}
2025-08-21 23:06:19 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":"2025-08-17T09:26:56.885Z","now":"2025-08-21T16:06:19.905Z"}
2025-08-21 23:06:19 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-17T09:26:56.885Z","isExpired":true,"hasAccessToken":true,"hasRefreshToken":true}
2025-08-21 23:06:19 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":true,"hasRefreshToken":true,"expiresAt":"2025-08-17T09:26:56.885Z"}
2025-08-21 23:06:19 [INFO]: Tokens updated manually | {"hasAccessToken":true,"hasRefreshToken":true}
2025-08-21 23:06:19 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":"2025-08-17T09:26:56.885Z","now":"2025-08-21T16:06:19.907Z"}
2025-08-21 23:06:19 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-17T09:26:56.885Z","isExpired":true,"hasAccessToken":true,"hasRefreshToken":true}
2025-08-21 23:06:19 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":true,"hasRefreshToken":true,"expiresAt":"2025-08-17T09:26:56.885Z"}
2025-08-21 23:06:19 [INFO]: Tokens updated manually | {"hasAccessToken":true,"hasRefreshToken":true}
2025-08-21 23:06:19 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":"2025-08-17T09:26:56.885Z","now":"2025-08-21T16:06:19.908Z"}
2025-08-21 23:06:19 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-17T09:26:56.885Z","isExpired":true,"hasAccessToken":true,"hasRefreshToken":true}
2025-08-21 23:06:19 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":true,"hasRefreshToken":true,"expiresAt":"2025-08-17T09:26:56.885Z"}
2025-08-21 23:06:19 [INFO]: Tokens updated manually | {"hasAccessToken":true,"hasRefreshToken":true}
2025-08-21 23:06:19 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":"2025-08-17T09:26:56.885Z","now":"2025-08-21T16:06:19.908Z"}
2025-08-21 23:06:19 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-17T09:26:56.885Z","isExpired":true,"hasAccessToken":true,"hasRefreshToken":true}
2025-08-21 23:06:19 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":true,"hasRefreshToken":true,"expiresAt":"2025-08-17T09:26:56.885Z"}
2025-08-21 23:06:19 [INFO]: Tokens updated manually | {"hasAccessToken":true,"hasRefreshToken":true}
2025-08-21 23:06:19 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":"2025-08-17T09:26:56.885Z","now":"2025-08-21T16:06:19.909Z"}
2025-08-21 23:06:19 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-17T09:26:56.885Z","isExpired":true,"hasAccessToken":true,"hasRefreshToken":true}
2025-08-21 23:06:19 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":true,"hasRefreshToken":true,"expiresAt":"2025-08-17T09:26:56.885Z"}
2025-08-21 23:06:19 [INFO]: Tokens updated manually | {"hasAccessToken":true,"hasRefreshToken":true}
2025-08-21 23:06:48 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":"2025-08-17T09:26:56.885Z","now":"2025-08-21T16:06:48.917Z"}
2025-08-21 23:06:48 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-17T09:26:56.885Z","isExpired":true,"hasAccessToken":true,"hasRefreshToken":true}
2025-08-21 23:06:48 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":true,"hasRefreshToken":true,"expiresAt":"2025-08-17T09:26:56.885Z"}
2025-08-21 23:06:48 [INFO]: Tokens updated manually | {"hasAccessToken":true,"hasRefreshToken":true}
2025-08-21 23:06:48 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":"2025-08-17T09:26:56.885Z","now":"2025-08-21T16:06:48.919Z"}
2025-08-21 23:06:48 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-17T09:26:56.885Z","isExpired":true,"hasAccessToken":true,"hasRefreshToken":true}
2025-08-21 23:06:48 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":true,"hasRefreshToken":true,"expiresAt":"2025-08-17T09:26:56.885Z"}
2025-08-21 23:06:48 [INFO]: Tokens updated manually | {"hasAccessToken":true,"hasRefreshToken":true}
2025-08-21 23:06:48 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":"2025-08-17T09:26:56.885Z","now":"2025-08-21T16:06:48.920Z"}
2025-08-21 23:06:48 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-17T09:26:56.885Z","isExpired":true,"hasAccessToken":true,"hasRefreshToken":true}
2025-08-21 23:06:48 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":true,"hasRefreshToken":true,"expiresAt":"2025-08-17T09:26:56.885Z"}
2025-08-21 23:06:48 [INFO]: Tokens updated manually | {"hasAccessToken":true,"hasRefreshToken":true}
2025-08-21 23:06:48 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":"2025-08-17T09:26:56.885Z","now":"2025-08-21T16:06:48.921Z"}
2025-08-21 23:06:48 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-17T09:26:56.885Z","isExpired":true,"hasAccessToken":true,"hasRefreshToken":true}
2025-08-21 23:06:48 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":true,"hasRefreshToken":true,"expiresAt":"2025-08-17T09:26:56.885Z"}
2025-08-21 23:06:48 [INFO]: Tokens updated manually | {"hasAccessToken":true,"hasRefreshToken":true}
2025-08-21 23:06:48 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":"2025-08-17T09:26:56.885Z","now":"2025-08-21T16:06:48.922Z"}
2025-08-21 23:06:48 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-17T09:26:56.885Z","isExpired":true,"hasAccessToken":true,"hasRefreshToken":true}
2025-08-21 23:06:48 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":true,"hasRefreshToken":true,"expiresAt":"2025-08-17T09:26:56.885Z"}
2025-08-21 23:06:48 [INFO]: Tokens updated manually | {"hasAccessToken":true,"hasRefreshToken":true}
2025-08-21 23:07:47 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":null,"now":"2025-08-21T16:07:47.294Z"}
2025-08-21 23:07:47 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":null,"isExpired":true,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-21 23:07:47 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":false,"hasRefreshToken":false,"expiresAt":null}
2025-08-21 23:07:47 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-21 23:07:47 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":null,"now":"2025-08-21T16:07:47.296Z"}
2025-08-21 23:07:47 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":null,"isExpired":true,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-21 23:07:47 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":false,"hasRefreshToken":false,"expiresAt":null}
2025-08-21 23:07:47 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-21 23:07:47 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":null,"now":"2025-08-21T16:07:47.297Z"}
2025-08-21 23:07:47 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":null,"isExpired":true,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-21 23:07:47 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":false,"hasRefreshToken":false,"expiresAt":null}
2025-08-21 23:07:47 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-21 23:07:47 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":null,"now":"2025-08-21T16:07:47.298Z"}
2025-08-21 23:07:47 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":null,"isExpired":true,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-21 23:07:47 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":false,"hasRefreshToken":false,"expiresAt":null}
2025-08-21 23:07:47 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-21 23:07:47 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":null,"now":"2025-08-21T16:07:47.299Z"}
2025-08-21 23:07:47 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":null,"isExpired":true,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-21 23:07:47 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":false,"hasRefreshToken":false,"expiresAt":null}
2025-08-21 23:07:47 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-21 23:08:07 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":null,"now":"2025-08-21T16:08:07.380Z"}
2025-08-21 23:08:07 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":null,"isExpired":true,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-21 23:08:07 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":false,"hasRefreshToken":false,"expiresAt":null}
2025-08-21 23:08:07 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-21 23:08:07 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":null,"now":"2025-08-21T16:08:07.383Z"}
2025-08-21 23:08:07 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":null,"isExpired":true,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-21 23:08:07 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":false,"hasRefreshToken":false,"expiresAt":null}
2025-08-21 23:08:07 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-21 23:08:07 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":null,"now":"2025-08-21T16:08:07.383Z"}
2025-08-21 23:08:07 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":null,"isExpired":true,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-21 23:08:07 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":false,"hasRefreshToken":false,"expiresAt":null}
2025-08-21 23:08:07 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-21 23:08:07 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":null,"now":"2025-08-21T16:08:07.384Z"}
2025-08-21 23:08:07 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":null,"isExpired":true,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-21 23:08:07 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":false,"hasRefreshToken":false,"expiresAt":null}
2025-08-21 23:08:07 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-21 23:08:07 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":null,"now":"2025-08-21T16:08:07.385Z"}
2025-08-21 23:08:07 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":null,"isExpired":true,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-21 23:08:07 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":false,"hasRefreshToken":false,"expiresAt":null}
2025-08-21 23:08:07 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-21 23:08:09 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":null,"now":"2025-08-21T16:08:09.124Z"}
2025-08-21 23:08:09 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":null,"isExpired":true,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-21 23:08:09 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":false,"hasRefreshToken":false,"expiresAt":null}
2025-08-21 23:08:09 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-21 23:08:09 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":null,"now":"2025-08-21T16:08:09.127Z"}
2025-08-21 23:08:09 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":null,"isExpired":true,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-21 23:08:09 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":false,"hasRefreshToken":false,"expiresAt":null}
2025-08-21 23:08:09 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-21 23:08:09 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":null,"now":"2025-08-21T16:08:09.127Z"}
2025-08-21 23:08:09 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":null,"isExpired":true,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-21 23:08:09 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":false,"hasRefreshToken":false,"expiresAt":null}
2025-08-21 23:08:09 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-21 23:08:09 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":null,"now":"2025-08-21T16:08:09.128Z"}
2025-08-21 23:08:09 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":null,"isExpired":true,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-21 23:08:09 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":false,"hasRefreshToken":false,"expiresAt":null}
2025-08-21 23:08:09 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-21 23:08:09 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":null,"now":"2025-08-21T16:08:09.128Z"}
2025-08-21 23:08:09 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":null,"isExpired":true,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-21 23:08:09 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":false,"hasRefreshToken":false,"expiresAt":null}
2025-08-21 23:08:09 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:02:48 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":null,"now":"2025-08-21T17:02:48.413Z"}
2025-08-22 00:02:48 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":null,"isExpired":true,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:02:48 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":false,"hasRefreshToken":false,"expiresAt":null}
2025-08-22 00:02:48 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:02:48 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":null,"now":"2025-08-21T17:02:48.415Z"}
2025-08-22 00:02:48 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":null,"isExpired":true,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:02:48 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":false,"hasRefreshToken":false,"expiresAt":null}
2025-08-22 00:02:48 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:02:48 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":null,"now":"2025-08-21T17:02:48.416Z"}
2025-08-22 00:02:48 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":null,"isExpired":true,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:02:48 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":false,"hasRefreshToken":false,"expiresAt":null}
2025-08-22 00:02:48 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:02:48 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":null,"now":"2025-08-21T17:02:48.416Z"}
2025-08-22 00:02:48 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":null,"isExpired":true,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:02:48 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":false,"hasRefreshToken":false,"expiresAt":null}
2025-08-22 00:02:48 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:02:48 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":null,"now":"2025-08-21T17:02:48.417Z"}
2025-08-22 00:02:48 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":null,"isExpired":true,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:02:48 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":false,"hasRefreshToken":false,"expiresAt":null}
2025-08-22 00:02:48 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:03:08 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":null,"now":"2025-08-21T17:03:08.251Z"}
2025-08-22 00:03:08 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":null,"isExpired":true,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:03:08 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":false,"hasRefreshToken":false,"expiresAt":null}
2025-08-22 00:03:08 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:03:08 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":null,"now":"2025-08-21T17:03:08.253Z"}
2025-08-22 00:03:08 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":null,"isExpired":true,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:03:08 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":false,"hasRefreshToken":false,"expiresAt":null}
2025-08-22 00:03:08 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:03:08 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":null,"now":"2025-08-21T17:03:08.254Z"}
2025-08-22 00:03:08 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":null,"isExpired":true,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:03:08 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":false,"hasRefreshToken":false,"expiresAt":null}
2025-08-22 00:03:08 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:03:08 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":null,"now":"2025-08-21T17:03:08.255Z"}
2025-08-22 00:03:08 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":null,"isExpired":true,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:03:08 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":false,"hasRefreshToken":false,"expiresAt":null}
2025-08-22 00:03:08 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:03:08 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":null,"now":"2025-08-21T17:03:08.255Z"}
2025-08-22 00:03:08 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":null,"isExpired":true,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:03:08 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":false,"hasRefreshToken":false,"expiresAt":null}
2025-08-22 00:03:08 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:04:31 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":null,"now":"2025-08-21T17:04:31.127Z"}
2025-08-22 00:04:31 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":null,"isExpired":true,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:04:31 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":false,"hasRefreshToken":false,"expiresAt":null}
2025-08-22 00:04:31 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:04:31 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":null,"now":"2025-08-21T17:04:31.130Z"}
2025-08-22 00:04:31 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":null,"isExpired":true,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:04:31 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":false,"hasRefreshToken":false,"expiresAt":null}
2025-08-22 00:04:31 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:04:31 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":null,"now":"2025-08-21T17:04:31.131Z"}
2025-08-22 00:04:31 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":null,"isExpired":true,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:04:31 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":false,"hasRefreshToken":false,"expiresAt":null}
2025-08-22 00:04:31 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:04:31 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":null,"now":"2025-08-21T17:04:31.131Z"}
2025-08-22 00:04:31 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":null,"isExpired":true,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:04:31 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":false,"hasRefreshToken":false,"expiresAt":null}
2025-08-22 00:04:31 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:04:31 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":null,"now":"2025-08-21T17:04:31.132Z"}
2025-08-22 00:04:31 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":null,"isExpired":true,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:04:31 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":false,"hasRefreshToken":false,"expiresAt":null}
2025-08-22 00:04:31 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:04:37 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":null,"now":"2025-08-21T17:04:37.383Z"}
2025-08-22 00:04:37 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":null,"isExpired":true,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:04:37 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":false,"hasRefreshToken":false,"expiresAt":null}
2025-08-22 00:04:37 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:04:37 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":null,"now":"2025-08-21T17:04:37.386Z"}
2025-08-22 00:04:37 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":null,"isExpired":true,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:04:37 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":false,"hasRefreshToken":false,"expiresAt":null}
2025-08-22 00:04:37 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:04:37 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":null,"now":"2025-08-21T17:04:37.387Z"}
2025-08-22 00:04:37 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":null,"isExpired":true,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:04:37 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":false,"hasRefreshToken":false,"expiresAt":null}
2025-08-22 00:04:37 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:04:37 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":null,"now":"2025-08-21T17:04:37.388Z"}
2025-08-22 00:04:37 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":null,"isExpired":true,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:04:37 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":false,"hasRefreshToken":false,"expiresAt":null}
2025-08-22 00:04:37 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:04:37 [WARN]: ⏰ TOKEN EXPIRED | {"expiresAt":null,"now":"2025-08-21T17:04:37.388Z"}
2025-08-22 00:04:37 [INFO]: 📖 TOKENS LOADED FROM FILE | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":null,"isExpired":true,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:04:37 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"domain":"b24-7woulk.bitrix24.vn","hasAccessToken":false,"hasRefreshToken":false,"expiresAt":null}
2025-08-22 00:04:37 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:05:00 [INFO]: 📖 TOKENS LOADED FROM FILE | {"isExpired":false,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:05:00 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:05:00 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:05:00 [INFO]: 📖 TOKENS LOADED FROM FILE | {"isExpired":false,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:05:00 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:05:00 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:05:00 [INFO]: 📖 TOKENS LOADED FROM FILE | {"isExpired":false,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:05:00 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:05:00 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:05:00 [INFO]: 📖 TOKENS LOADED FROM FILE | {"isExpired":false,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:05:00 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:05:00 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:05:00 [INFO]: 📖 TOKENS LOADED FROM FILE | {"isExpired":false,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:05:00 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:05:00 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:05:19 [INFO]: 📖 TOKENS LOADED FROM FILE | {"isExpired":false,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:05:19 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:05:19 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:05:19 [INFO]: 📖 TOKENS LOADED FROM FILE | {"isExpired":false,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:05:19 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:05:19 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:05:19 [INFO]: 📖 TOKENS LOADED FROM FILE | {"isExpired":false,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:05:19 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:05:19 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:05:19 [INFO]: 📖 TOKENS LOADED FROM FILE | {"isExpired":false,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:05:19 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:05:19 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:05:19 [INFO]: 📖 TOKENS LOADED FROM FILE | {"isExpired":false,"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:05:19 [INFO]: 🔄 LOADING SAVED TOKENS INTO SERVICE | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:05:19 [INFO]: Tokens updated manually | {"hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 00:06:50 [INFO]: 📁 NO VALID TOKENS IN FILE
2025-08-22 00:06:50 [INFO]: 📁 NO VALID TOKENS IN FILE
2025-08-22 00:06:50 [INFO]: 📁 NO VALID TOKENS IN FILE
2025-08-22 00:06:50 [INFO]: 📁 NO VALID TOKENS IN FILE
2025-08-22 00:06:50 [INFO]: 📁 NO VALID TOKENS IN FILE
2025-08-22 00:07:14 [INFO]: 📁 NO VALID TOKENS IN FILE
2025-08-22 00:07:14 [INFO]: 📁 NO VALID TOKENS IN FILE
2025-08-22 00:07:14 [INFO]: 📁 NO VALID TOKENS IN FILE
2025-08-22 00:07:14 [INFO]: 📁 NO VALID TOKENS IN FILE
2025-08-22 00:07:14 [INFO]: 📁 NO VALID TOKENS IN FILE
2025-08-22 00:08:08 [INFO]: 📁 NO VALID TOKENS IN FILE
2025-08-22 00:08:08 [INFO]: 📁 NO VALID TOKENS IN FILE
2025-08-22 00:08:08 [INFO]: 📁 NO VALID TOKENS IN FILE
2025-08-22 00:08:08 [INFO]: 📁 NO VALID TOKENS IN FILE
2025-08-22 00:08:08 [INFO]: 📁 NO VALID TOKENS IN FILE
2025-08-22 00:08:22 [INFO]: 📁 NO VALID TOKENS IN FILE
2025-08-22 00:08:22 [INFO]: 📁 NO VALID TOKENS IN FILE
2025-08-22 00:08:22 [INFO]: 📁 NO VALID TOKENS IN FILE
2025-08-22 00:08:22 [INFO]: 📁 NO VALID TOKENS IN FILE
2025-08-22 00:08:22 [INFO]: 📁 NO VALID TOKENS IN FILE
2025-08-22 00:12:42 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 00:13:00 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 00:13:15 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 00:13:29 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 00:14:28 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 00:16:25 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 00:16:25 [INFO]: Server running on port 3000
2025-08-22 00:16:25 [INFO]: Environment:
2025-08-22 00:16:37 [INFO]: Request received | {"method":"GET","url":"/","ip":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36 Edg/139.0.0.0"}
2025-08-22 00:16:38 [INFO]: Request completed | {"method":"GET","url":"/","statusCode":200,"duration":19,"ip":"::1"}
2025-08-22 00:16:40 [INFO]: Request received | {"method":"GET","url":"/","ip":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36 Edg/139.0.0.0"}
2025-08-22 00:16:40 [INFO]: Request completed | {"method":"GET","url":"/","statusCode":304,"duration":1,"ip":"::1"}
2025-08-22 09:33:30 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 09:33:30 [INFO]: Server running on port 3000
2025-08-22 09:33:30 [INFO]: Environment:
2025-08-22 09:33:34 [INFO]: Request received | {"method":"GET","url":"/","ip":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"}
2025-08-22 09:33:34 [INFO]: Request completed | {"method":"GET","url":"/","statusCode":200,"duration":7,"ip":"::1"}
2025-08-22 09:33:34 [INFO]: Request received | {"method":"GET","url":"/favicon.ico","ip":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"}
2025-08-22 09:33:34 [WARN]: Route not found | {"method":"GET","url":"/","ip":"::1"}
2025-08-22 09:33:34 [INFO]: Request completed | {"method":"GET","url":"/","statusCode":404,"duration":2,"ip":"::1"}
2025-08-22 09:34:53 [INFO]: Request received | {"method":"POST","url":"/?DOMAIN=b24-7woulk.bitrix24.vn&PROTOCOL=1&LANG=vn&APP_SID=e68093335dead8880d315c4a19b9ba63","ip":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"}
2025-08-22 09:34:53 [INFO]: 🚀 BITRIX24 INSTALLATION REQUEST - FULL DATA | {"headers":{"host":"localhost:3000","connection":"keep-alive","content-length":"364","cache-control":"max-age=0","sec-ch-ua":"\"Not;A=Brand\";v=\"99\", \"Google Chrome\";v=\"139\", \"Chromium\";v=\"139\"","sec-ch-ua-mobile":"?0","sec-ch-ua-platform":"\"macOS\"","origin":"null","content-type":"application/x-www-form-urlencoded","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7","sec-fetch-site":"cross-site","sec-fetch-mode":"navigate","sec-fetch-dest":"iframe","sec-fetch-storage-access":"active","accept-encoding":"gzip, deflate, br, zstd","accept-language":"vi-VN,vi;q=0.9,fr-FR;q=0.8,fr;q=0.7,en-US;q=0.6,en;q=0.5"},"query":{"DOMAIN":"b24-7woulk.bitrix24.vn","PROTOCOL":"1","LANG":"vn","APP_SID":"e68093335dead8880d315c4a19b9ba63"},"body":{"AUTH_ID":"5de5a768007b68e5007b3dd100000001403807c1e293d8b6e18a6b30812e307fd064f8","AUTH_EXPIRES":"3600","REFRESH_ID":"4d64cf68007b68e5007b3dd10000000140380776a2a47e716aecc8c3722d57967cbd07","member_id":"78d52900632fa1e9acbd6c03fe41e332","status":"L","PLACEMENT":"DEFAULT","PLACEMENT_OPTIONS":"{\"IFRAME\":\"Y\",\"IFRAME_TYPE\":\"SIDE_SLIDER\",\"any\":\"25\\/\"}"},"rawBody":"{\n  \"AUTH_ID\": \"5de5a768007b68e5007b3dd100000001403807c1e293d8b6e18a6b30812e307fd064f8\",\n  \"AUTH_EXPIRES\": \"3600\",\n  \"REFRESH_ID\": \"4d64cf68007b68e5007b3dd10000000140380776a2a47e716aecc8c3722d57967cbd07\",\n  \"member_id\": \"78d52900632fa1e9acbd6c03fe41e332\",\n  \"status\": \"L\",\n  \"PLACEMENT\": \"DEFAULT\",\n  \"PLACEMENT_OPTIONS\": \"{\\\"IFRAME\\\":\\\"Y\\\",\\\"IFRAME_TYPE\\\":\\\"SIDE_SLIDER\\\",\\\"any\\\":\\\"25\\\\/\\\"}\"\n}","contentType":"application/x-www-form-urlencoded","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","hasAuthData":false,"requestMethod":"POST","originalUrl":"/?DOMAIN=b24-7woulk.bitrix24.vn&PROTOCOL=1&LANG=vn&APP_SID=e68093335dead8880d315c4a19b9ba63"}
2025-08-22 09:34:53 [INFO]: 🎯 PROCESSING INSTALLATION WITH DIRECT AUTH DATA | {"authId":"5de5a768007b68e5007b...","refreshId":"4d64cf68007b68e5007b...","authExpires":"3600","memberId":"78d52900632fa1e9acbd6c03fe41e332","status":"L","domain":"b24-7woulk.bitrix24.vn","placement":"DEFAULT","placementOptions":"{\"IFRAME\":\"Y\",\"IFRAME_TYPE\":\"SIDE_SLIDER\",\"any\":\"25\\/\"}"}
2025-08-22 09:34:53 [ERROR]: App installation error | {"error":"bitrix24Service.processInstallationAuth is not a function","query":{"DOMAIN":"b24-7woulk.bitrix24.vn","PROTOCOL":"1","LANG":"vn","APP_SID":"e68093335dead8880d315c4a19b9ba63"},"body":{"AUTH_ID":"5de5a768007b68e5007b3dd100000001403807c1e293d8b6e18a6b30812e307fd064f8","AUTH_EXPIRES":"3600","REFRESH_ID":"4d64cf68007b68e5007b3dd10000000140380776a2a47e716aecc8c3722d57967cbd07","member_id":"78d52900632fa1e9acbd6c03fe41e332","status":"L","PLACEMENT":"DEFAULT","PLACEMENT_OPTIONS":"{\"IFRAME\":\"Y\",\"IFRAME_TYPE\":\"SIDE_SLIDER\",\"any\":\"25\\/\"}"}}
TypeError: bitrix24Service.processInstallationAuth is not a function
    at /Users/tuanhuytran/jotform-bitrix24-integration/src/routes/install.js:119:38
    at Layer.handle [as handle_request] (/Users/tuanhuytran/jotform-bitrix24-integration/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/tuanhuytran/jotform-bitrix24-integration/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/Users/tuanhuytran/jotform-bitrix24-integration/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/Users/tuanhuytran/jotform-bitrix24-integration/node_modules/express/lib/router/layer.js:95:5)
    at /Users/tuanhuytran/jotform-bitrix24-integration/node_modules/express/lib/router/index.js:284:15
    at Function.process_params (/Users/tuanhuytran/jotform-bitrix24-integration/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/tuanhuytran/jotform-bitrix24-integration/node_modules/express/lib/router/index.js:280:10)
    at Function.handle (/Users/tuanhuytran/jotform-bitrix24-integration/node_modules/express/lib/router/index.js:175:3)
    at router (/Users/tuanhuytran/jotform-bitrix24-integration/node_modules/express/lib/router/index.js:47:12)
2025-08-22 09:34:53 [INFO]: Request completed | {"method":"POST","url":"/?DOMAIN=b24-7woulk.bitrix24.vn&PROTOCOL=1&LANG=vn&APP_SID=e68093335dead8880d315c4a19b9ba63","statusCode":500,"duration":4,"ip":"::1"}
2025-08-22 09:39:10 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 09:39:10 [INFO]: Server running on port 3000
2025-08-22 09:39:10 [INFO]: Environment:
2025-08-22 09:39:19 [INFO]: Request received | {"method":"GET","url":"/","ip":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"}
2025-08-22 09:39:19 [INFO]: Request completed | {"method":"GET","url":"/","statusCode":304,"duration":4,"ip":"::1"}
2025-08-22 09:39:42 [INFO]: Request received | {"method":"POST","url":"/?DOMAIN=b24-7woulk.bitrix24.vn&PROTOCOL=1&LANG=vn&APP_SID=ef1650bae9c58382206b0167908e8955","ip":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"}
2025-08-22 09:39:42 [INFO]: 🚀 BITRIX24 INSTALLATION REQUEST - FULL DATA | {"headers":{"host":"localhost:3000","connection":"keep-alive","content-length":"364","cache-control":"max-age=0","sec-ch-ua":"\"Not;A=Brand\";v=\"99\", \"Google Chrome\";v=\"139\", \"Chromium\";v=\"139\"","sec-ch-ua-mobile":"?0","sec-ch-ua-platform":"\"macOS\"","origin":"null","content-type":"application/x-www-form-urlencoded","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7","sec-fetch-site":"cross-site","sec-fetch-mode":"navigate","sec-fetch-dest":"iframe","sec-fetch-storage-access":"active","accept-encoding":"gzip, deflate, br, zstd","accept-language":"vi-VN,vi;q=0.9,fr-FR;q=0.8,fr;q=0.7,en-US;q=0.6,en;q=0.5"},"query":{"DOMAIN":"b24-7woulk.bitrix24.vn","PROTOCOL":"1","LANG":"vn","APP_SID":"ef1650bae9c58382206b0167908e8955"},"body":{"AUTH_ID":"7ee6a768007b68e5007b3dd100000001403807cbba7ddce02ef55872c6ea505251a39f","AUTH_EXPIRES":"3600","REFRESH_ID":"6e65cf68007b68e5007b3dd1000000014038079ee01a19b78a830effd2ef6632f69a45","member_id":"78d52900632fa1e9acbd6c03fe41e332","status":"L","PLACEMENT":"DEFAULT","PLACEMENT_OPTIONS":"{\"IFRAME\":\"Y\",\"IFRAME_TYPE\":\"SIDE_SLIDER\",\"any\":\"25\\/\"}"},"rawBody":"{\n  \"AUTH_ID\": \"7ee6a768007b68e5007b3dd100000001403807cbba7ddce02ef55872c6ea505251a39f\",\n  \"AUTH_EXPIRES\": \"3600\",\n  \"REFRESH_ID\": \"6e65cf68007b68e5007b3dd1000000014038079ee01a19b78a830effd2ef6632f69a45\",\n  \"member_id\": \"78d52900632fa1e9acbd6c03fe41e332\",\n  \"status\": \"L\",\n  \"PLACEMENT\": \"DEFAULT\",\n  \"PLACEMENT_OPTIONS\": \"{\\\"IFRAME\\\":\\\"Y\\\",\\\"IFRAME_TYPE\\\":\\\"SIDE_SLIDER\\\",\\\"any\\\":\\\"25\\\\/\\\"}\"\n}","contentType":"application/x-www-form-urlencoded","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","hasAuthData":false,"requestMethod":"POST","originalUrl":"/?DOMAIN=b24-7woulk.bitrix24.vn&PROTOCOL=1&LANG=vn&APP_SID=ef1650bae9c58382206b0167908e8955"}
2025-08-22 09:39:42 [INFO]: 🎯 PROCESSING INSTALLATION WITH DIRECT AUTH DATA | {"authId":"7ee6a768007b68e5007b...","refreshId":"6e65cf68007b68e5007b...","authExpires":"3600","memberId":"78d52900632fa1e9acbd6c03fe41e332","status":"L","domain":"b24-7woulk.bitrix24.vn","placement":"DEFAULT","placementOptions":"{\"IFRAME\":\"Y\",\"IFRAME_TYPE\":\"SIDE_SLIDER\",\"any\":\"25\\/\"}"}
2025-08-22 09:39:42 [ERROR]: App installation error | {"error":"bitrix24Service.processInstallationAuth is not a function","query":{"DOMAIN":"b24-7woulk.bitrix24.vn","PROTOCOL":"1","LANG":"vn","APP_SID":"ef1650bae9c58382206b0167908e8955"},"body":{"AUTH_ID":"7ee6a768007b68e5007b3dd100000001403807cbba7ddce02ef55872c6ea505251a39f","AUTH_EXPIRES":"3600","REFRESH_ID":"6e65cf68007b68e5007b3dd1000000014038079ee01a19b78a830effd2ef6632f69a45","member_id":"78d52900632fa1e9acbd6c03fe41e332","status":"L","PLACEMENT":"DEFAULT","PLACEMENT_OPTIONS":"{\"IFRAME\":\"Y\",\"IFRAME_TYPE\":\"SIDE_SLIDER\",\"any\":\"25\\/\"}"}}
TypeError: bitrix24Service.processInstallationAuth is not a function
    at /Users/tuanhuytran/jotform-bitrix24-integration/src/routes/install.js:119:38
    at Layer.handle [as handle_request] (/Users/tuanhuytran/jotform-bitrix24-integration/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/tuanhuytran/jotform-bitrix24-integration/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/Users/tuanhuytran/jotform-bitrix24-integration/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/Users/tuanhuytran/jotform-bitrix24-integration/node_modules/express/lib/router/layer.js:95:5)
    at /Users/tuanhuytran/jotform-bitrix24-integration/node_modules/express/lib/router/index.js:284:15
    at Function.process_params (/Users/tuanhuytran/jotform-bitrix24-integration/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/tuanhuytran/jotform-bitrix24-integration/node_modules/express/lib/router/index.js:280:10)
    at Function.handle (/Users/tuanhuytran/jotform-bitrix24-integration/node_modules/express/lib/router/index.js:175:3)
    at router (/Users/tuanhuytran/jotform-bitrix24-integration/node_modules/express/lib/router/index.js:47:12)
2025-08-22 09:39:42 [INFO]: Request completed | {"method":"POST","url":"/?DOMAIN=b24-7woulk.bitrix24.vn&PROTOCOL=1&LANG=vn&APP_SID=ef1650bae9c58382206b0167908e8955","statusCode":500,"duration":5,"ip":"::1"}
2025-08-22 09:40:21 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 09:40:21 [INFO]: Server running on port 3000
2025-08-22 09:40:21 [INFO]: Environment:
2025-08-22 09:40:37 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 09:40:37 [INFO]: Server running on port 3000
2025-08-22 09:40:37 [INFO]: Environment:
2025-08-22 09:40:38 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 09:40:38 [INFO]: Server running on port 3000
2025-08-22 09:40:38 [INFO]: Environment:
2025-08-22 09:40:47 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 09:40:47 [INFO]: Server running on port 3000
2025-08-22 09:40:47 [INFO]: Environment:
2025-08-22 09:40:59 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 09:40:59 [INFO]: Server running on port 3000
2025-08-22 09:40:59 [INFO]: Environment:
2025-08-22 09:41:52 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 09:41:52 [INFO]: Server running on port 3000
2025-08-22 09:41:52 [INFO]: Environment:
2025-08-22 09:41:54 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 09:41:54 [INFO]: Server running on port 3000
2025-08-22 09:41:54 [INFO]: Environment:
2025-08-22 09:42:06 [INFO]: Request received | {"method":"POST","url":"/?DOMAIN=b24-7woulk.bitrix24.vn&PROTOCOL=1&LANG=vn&APP_SID=07c7c609e9bdd02d112c25a6d9b5d3c8","ip":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"}
2025-08-22 09:42:06 [INFO]: 🚀 BITRIX24 INSTALLATION REQUEST - FULL DATA | {"headers":{"host":"localhost:3000","connection":"keep-alive","content-length":"364","cache-control":"max-age=0","sec-ch-ua":"\"Not;A=Brand\";v=\"99\", \"Google Chrome\";v=\"139\", \"Chromium\";v=\"139\"","sec-ch-ua-mobile":"?0","sec-ch-ua-platform":"\"macOS\"","origin":"null","content-type":"application/x-www-form-urlencoded","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7","sec-fetch-site":"cross-site","sec-fetch-mode":"navigate","sec-fetch-dest":"iframe","sec-fetch-storage-access":"active","accept-encoding":"gzip, deflate, br, zstd","accept-language":"vi-VN,vi;q=0.9,fr-FR;q=0.8,fr;q=0.7,en-US;q=0.6,en;q=0.5"},"query":{"DOMAIN":"b24-7woulk.bitrix24.vn","PROTOCOL":"1","LANG":"vn","APP_SID":"07c7c609e9bdd02d112c25a6d9b5d3c8"},"body":{"AUTH_ID":"0ee7a768007b68e5007b3dd100000001403807b758c0611ca547c88e0b7b4737137fda","AUTH_EXPIRES":"3600","REFRESH_ID":"fe65cf68007b68e5007b3dd1000000014038079aaa7e6a4ee07971d2a0268b6ff8b212","member_id":"78d52900632fa1e9acbd6c03fe41e332","status":"L","PLACEMENT":"DEFAULT","PLACEMENT_OPTIONS":"{\"IFRAME\":\"Y\",\"IFRAME_TYPE\":\"SIDE_SLIDER\",\"any\":\"25\\/\"}"},"rawBody":"{\n  \"AUTH_ID\": \"0ee7a768007b68e5007b3dd100000001403807b758c0611ca547c88e0b7b4737137fda\",\n  \"AUTH_EXPIRES\": \"3600\",\n  \"REFRESH_ID\": \"fe65cf68007b68e5007b3dd1000000014038079aaa7e6a4ee07971d2a0268b6ff8b212\",\n  \"member_id\": \"78d52900632fa1e9acbd6c03fe41e332\",\n  \"status\": \"L\",\n  \"PLACEMENT\": \"DEFAULT\",\n  \"PLACEMENT_OPTIONS\": \"{\\\"IFRAME\\\":\\\"Y\\\",\\\"IFRAME_TYPE\\\":\\\"SIDE_SLIDER\\\",\\\"any\\\":\\\"25\\\\/\\\"}\"\n}","contentType":"application/x-www-form-urlencoded","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","hasAuthData":false,"requestMethod":"POST","originalUrl":"/?DOMAIN=b24-7woulk.bitrix24.vn&PROTOCOL=1&LANG=vn&APP_SID=07c7c609e9bdd02d112c25a6d9b5d3c8"}
2025-08-22 09:42:06 [INFO]: 🎯 PROCESSING INSTALLATION WITH DIRECT AUTH DATA | {"authId":"0ee7a768007b68e5007b...","refreshId":"fe65cf68007b68e5007b...","authExpires":"3600","memberId":"78d52900632fa1e9acbd6c03fe41e332","status":"L","domain":"b24-7woulk.bitrix24.vn","placement":"DEFAULT","placementOptions":"{\"IFRAME\":\"Y\",\"IFRAME_TYPE\":\"SIDE_SLIDER\",\"any\":\"25\\/\"}"}
2025-08-22 09:42:06 [INFO]: 🎯 Processing installation auth data | {"hasAccessToken":true,"hasRefreshToken":true,"domain":"b24-7woulk.bitrix24.vn","expiresIn":"3600","method":"simplified_auth"}
2025-08-22 09:42:06 [INFO]: 🔄 Normalized auth data | {"access_token":"0ee7a768007b68e5007b3dd100000001403807b758c0611ca547c88e0b7b4737137fda","refresh_token":"fe65cf68007b68e5007b3dd1000000014038079aaa7e6a4ee07971d2a0268b6ff8b212","expires_in":"3600","domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","member_id":"78d52900632fa1e9acbd6c03fe41e332","status":"L","client_endpoint":"https://b24-7woulk.bitrix24.vn/rest/","server_endpoint":"https://oauth.bitrix.info/rest/"}
2025-08-22 09:42:06 [INFO]: 🔧 Processing simplified auth | {"domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332","authExpires":"3600","fullAuthData":{"access_token":"0ee7a768007b68e5007b3dd100000001403807b758c0611ca547c88e0b7b4737137fda","refresh_token":"fe65cf68007b68e5007b3dd1000000014038079aaa7e6a4ee07971d2a0268b6ff8b212","expires_in":"3600","domain":"b24-7woulk.bitrix24.vn","member_id":"78d52900632fa1e9acbd6c03fe41e332","status":"L","client_endpoint":"https://b24-7woulk.bitrix24.vn/rest/","server_endpoint":"https://oauth.bitrix.info/rest/","method":"simplified_auth","authExpires":"3600"}}
2025-08-22 09:42:06 [INFO]: 🔑 Generated access token for simplified auth | {"domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 09:42:06 [INFO]: 🔑 Generated access token for simplified auth | {"tokenLength":184,"domain":"b24-7woulk.bitrix24.vn"}
2025-08-22 09:42:06 [INFO]: 💾 Saving simplified auth token to database | {"tokenData":{"access_token":"***MASKED***","expires_in":3600,"expires_at":"2025-08-22T03:42:06.559Z","domain":"b24-7woulk.bitrix24.vn","member_id":"78d52900632fa1e9acbd6c03fe41e332","status":"L","method":"simplified_auth","created_at":"2025-08-22T02:42:06.559Z","updated_at":"2025-08-22T02:42:06.559Z"}}
2025-08-22 09:42:06 [INFO]: 💾 Token saved to database | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-22T03:42:06.559Z","method":"simplified_auth"}
2025-08-22 09:42:06 [INFO]: 💾 Simplified auth token saved successfully | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-22T03:42:06.559Z","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 09:42:06 [INFO]: ✅ SIMPLIFIED AUTH PROCESSED SUCCESSFULLY | {"domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332","hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 09:42:06 [INFO]: Request completed | {"method":"POST","url":"/?DOMAIN=b24-7woulk.bitrix24.vn&PROTOCOL=1&LANG=vn&APP_SID=07c7c609e9bdd02d112c25a6d9b5d3c8","statusCode":200,"duration":9,"ip":"::1"}
2025-08-22 09:42:06 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 09:42:06 [INFO]: Server running on port 3000
2025-08-22 09:42:06 [INFO]: Environment:
2025-08-22 10:56:23 [INFO]: Request received | {"method":"POST","url":"/webhook/jotform","ip":"::ffff:127.0.0.1"}
2025-08-22 10:56:23 [INFO]: Jotform webhook received | {"submissionID":"6316441824346810568","hasRawRequest":true,"ip":"::ffff:127.0.0.1"}
2025-08-22 10:56:23 [INFO]: Contact data parsed | {"submissionId":"6316441824346810568","fullName":"Huy Tran","email":"tuanhuy227@gmail.com","phone":"(097) 828-1798"}
2025-08-22 10:56:23 [INFO]: Creating Bitrix24 lead | {"submissionId":"6316441824346810568","leadTitle":"Jotform Lead: Huy Tran","hasName":true,"hasEmail":true,"hasPhone":true}
2025-08-22 10:56:23 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"crm.lead.add","hasParams":true}
2025-08-22 10:56:23 [WARN]: ⏰ Token in database is expired | {"expiresAt":"2025-08-22T03:42:06.559Z","now":"2025-08-22T03:56:23.487Z"}
2025-08-22 10:56:23 [INFO]: 📖 Token loaded from database | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-22T03:42:06.559Z","isExpired":true,"method":"simplified_auth"}
2025-08-22 10:56:23 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"crm.lead.add","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 10:56:24 [ERROR]: HTTP Response Error Request failed with status code 401 | {"status":401,"url":"https://b24-7woulk.bitrix24.vn/rest/78d52900632fa1e9acbd6c03fe41e332/A9JsDdpo3L1nCpCKdqzSAOa82jZjvcQ2IpJ4y0edvrXumZTPw4/crm.lead.add","data":{"error":"INVALID_CREDENTIALS","error_description":"Invalid request credentials"}}
2025-08-22 10:56:24 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/78d52900632fa1e9acbd6c03fe41e332/A9JsDdpo3L1nCpCKdqzSAOa82jZjvcQ2IpJ4y0edvrXumZTPw4/crm.lead.add","error":"Request failed with status code 401"}
2025-08-22 10:56:24 [ERROR]: ❌ Simplified auth API call failed | {"method":"crm.lead.add","error":"Request failed with status code 401","response":{"error":"INVALID_CREDENTIALS","error_description":"Invalid request credentials"}}
2025-08-22 10:56:24 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"crm.lead.add","error":"Request failed with status code 401","response":{"error":"INVALID_CREDENTIALS","error_description":"Invalid request credentials"},"status":401}
2025-08-22 10:56:24 [ERROR]: Error creating Bitrix24 lead | {"error":"Bitrix24 API call failed: Request failed with status code 401","submissionId":"6316441824346810568"}
2025-08-22 10:56:24 [ERROR]: Failed to create lead | {"submissionId":"6316441824346810568","error":"Bitrix24 API call failed: Request failed with status code 401","duration":784}
2025-08-22 10:56:24 [INFO]: Request completed | {"method":"POST","url":"/jotform","statusCode":500,"duration":816,"ip":"::ffff:127.0.0.1"}
2025-08-22 10:57:25 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 10:57:25 [INFO]: Server running on port 3000
2025-08-22 10:57:25 [INFO]: Environment:
2025-08-22 10:57:32 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 10:57:32 [INFO]: Server running on port 3000
2025-08-22 10:57:32 [INFO]: Environment:
2025-08-22 10:57:35 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 10:57:35 [INFO]: Server running on port 3000
2025-08-22 10:57:35 [INFO]: Environment:
2025-08-22 10:57:45 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 10:57:45 [INFO]: Server running on port 3000
2025-08-22 10:57:45 [INFO]: Environment:
2025-08-22 10:57:50 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 10:57:50 [INFO]: Server running on port 3000
2025-08-22 10:57:50 [INFO]: Environment:
2025-08-22 10:57:55 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 10:57:55 [INFO]: Server running on port 3000
2025-08-22 10:57:55 [INFO]: Environment:
2025-08-22 10:58:03 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 10:58:03 [INFO]: Server running on port 3000
2025-08-22 10:58:03 [INFO]: Environment:
2025-08-22 10:58:08 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 10:58:08 [INFO]: Server running on port 3000
2025-08-22 10:58:08 [INFO]: Environment:
2025-08-22 10:58:10 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 10:58:10 [INFO]: Server running on port 3000
2025-08-22 10:58:10 [INFO]: Environment:
2025-08-22 10:58:15 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 10:58:15 [INFO]: Server running on port 3000
2025-08-22 10:58:15 [INFO]: Environment:
2025-08-22 10:58:17 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 10:58:17 [INFO]: Server running on port 3000
2025-08-22 10:58:17 [INFO]: Environment:
2025-08-22 10:59:49 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 10:59:49 [INFO]: Server running on port 3000
2025-08-22 10:59:49 [INFO]: Environment:
2025-08-22 11:00:30 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:00:30 [INFO]: Server running on port 3000
2025-08-22 11:00:30 [INFO]: Environment:
2025-08-22 11:01:18 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:01:18 [INFO]: Server running on port 3000
2025-08-22 11:01:18 [INFO]: Environment:
2025-08-22 11:01:18 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:01:18 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:01:30 [INFO]: Server running on port 3000
2025-08-22 11:01:30 [INFO]: Environment:
2025-08-22 11:01:30 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:01:30 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:01:30 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:01:30 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:01:30 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:01:30 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:01:30 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:01:30 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:01:30 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:01:30 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:01:30 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:01:30 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:01:30 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:01:30 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:01:30 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:01:30 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:01:30 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:01:30 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:01:30 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:01:30 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:01:30 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:01:30 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:01:30 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:01:30 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:01:30 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:01:39 [INFO]: Server running on port 3000
2025-08-22 11:01:39 [INFO]: Environment:
2025-08-22 11:01:39 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:01:39 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:01:39 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:01:39 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:01:39 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:01:39 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:01:39 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:01:39 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:01:39 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:01:39 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:01:39 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:01:39 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:01:39 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:01:39 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:01:39 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:01:39 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:01:39 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:01:39 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:01:39 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:01:39 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:01:54 [INFO]: Server running on port 3000
2025-08-22 11:01:54 [INFO]: Environment:
2025-08-22 11:01:54 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:01:54 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:01:54 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:01:54 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:01:54 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:01:54 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:01:54 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:01:54 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:01:54 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:01:54 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:01:54 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:01:54 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:01:54 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:01:54 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:01:54 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:01:54 [INFO]: Server running on port 3000
2025-08-22 11:01:54 [INFO]: Environment:
2025-08-22 11:01:54 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:01:54 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:01:54 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:01:54 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:01:54 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:01:54 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:01:54 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:01:54 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:01:54 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:01:54 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:01:54 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:01:54 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:01:54 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:01:54 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:01:54 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:02:05 [INFO]: Server running on port 3000
2025-08-22 11:02:05 [INFO]: Environment:
2025-08-22 11:02:05 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:02:05 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:02:05 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:02:05 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:02:05 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:02:05 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:02:05 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:02:05 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:02:05 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:02:05 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:02:05 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:02:05 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:02:05 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:02:05 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:02:05 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:02:06 [INFO]: Server running on port 3000
2025-08-22 11:02:06 [INFO]: Environment:
2025-08-22 11:02:06 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:02:06 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:02:06 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:02:06 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:02:06 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:02:06 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:02:06 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:02:06 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:02:06 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:02:06 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:02:06 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:02:06 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:02:06 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:02:06 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:02:06 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:02:13 [INFO]: Server running on port 3000
2025-08-22 11:02:13 [INFO]: Environment:
2025-08-22 11:02:13 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:02:13 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:02:13 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:02:13 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:02:13 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:02:13 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:02:13 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:02:13 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:02:13 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:02:13 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:02:13 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:02:13 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:02:13 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:02:13 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:02:13 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:02:15 [INFO]: Server running on port 3000
2025-08-22 11:02:15 [INFO]: Environment:
2025-08-22 11:02:15 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:02:15 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:02:15 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:02:15 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:02:15 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:02:15 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:02:15 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:02:15 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:02:15 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:02:15 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:02:15 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:02:15 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:02:15 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:02:15 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:02:15 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:02:16 [INFO]: Server running on port 3000
2025-08-22 11:02:16 [INFO]: Environment:
2025-08-22 11:02:16 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:02:16 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:02:16 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:02:16 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:02:16 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:02:16 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:02:16 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:02:16 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:02:16 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:02:16 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:02:16 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:02:16 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:02:16 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:02:16 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:02:16 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:02:30 [INFO]: Server running on port 3000
2025-08-22 11:02:30 [INFO]: Environment:
2025-08-22 11:02:30 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:02:30 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:02:30 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:02:30 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:02:30 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:02:30 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:02:30 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:02:30 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:02:30 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:02:30 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:02:30 [INFO]: Server running on port 3000
2025-08-22 11:02:30 [INFO]: Environment:
2025-08-22 11:02:30 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:02:30 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:02:30 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:02:30 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:02:30 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:02:30 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:02:30 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:02:30 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:02:30 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:02:30 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:02:46 [INFO]: Server running on port 3000
2025-08-22 11:02:46 [INFO]: Environment:
2025-08-22 11:02:46 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:02:46 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:02:46 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:02:46 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:02:46 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:02:46 [INFO]: Server running on port 3000
2025-08-22 11:02:46 [INFO]: Environment:
2025-08-22 11:02:46 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:02:46 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:02:46 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:02:46 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:02:46 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:03:34 [INFO]: Server running on port 3000
2025-08-22 11:03:34 [INFO]: Environment:
2025-08-22 11:03:34 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:03:34 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:03:34 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:03:34 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:03:34 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:03:36 [INFO]: Server running on port 3000
2025-08-22 11:03:36 [INFO]: Environment:
2025-08-22 11:03:36 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:03:36 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:03:36 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:03:36 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:03:36 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:03:47 [INFO]: Server running on port 3000
2025-08-22 11:03:47 [INFO]: Environment:
2025-08-22 11:04:26 [INFO]: Server running on port 3000
2025-08-22 11:04:26 [INFO]: Environment:
2025-08-22 11:04:27 [INFO]: Server running on port 3000
2025-08-22 11:04:27 [INFO]: Environment:
2025-08-22 11:04:27 [INFO]: Server running on port 3000
2025-08-22 11:04:27 [INFO]: Environment:
2025-08-22 11:04:40 [INFO]: Server running on port 3000
2025-08-22 11:04:40 [INFO]: Environment:
2025-08-22 11:04:59 [INFO]: Server running on port 3000
2025-08-22 11:04:59 [INFO]: Environment:
2025-08-22 11:05:01 [INFO]: Server running on port 3000
2025-08-22 11:05:01 [INFO]: Environment:
2025-08-22 11:05:10 [INFO]: Server running on port 3000
2025-08-22 11:05:10 [INFO]: Environment:
2025-08-22 11:05:11 [INFO]: Server running on port 3000
2025-08-22 11:05:11 [INFO]: Environment:
2025-08-22 11:05:25 [INFO]: Server running on port 3000
2025-08-22 11:05:25 [INFO]: Environment:
2025-08-22 11:05:27 [INFO]: Server running on port 3000
2025-08-22 11:05:27 [INFO]: Environment:
2025-08-22 11:05:46 [INFO]: Server running on port 3000
2025-08-22 11:05:46 [INFO]: Environment:
2025-08-22 11:05:47 [INFO]: Server running on port 3000
2025-08-22 11:05:47 [INFO]: Environment:
2025-08-22 11:05:59 [INFO]: Server running on port 3000
2025-08-22 11:05:59 [INFO]: Environment:
2025-08-22 11:06:00 [INFO]: Server running on port 3000
2025-08-22 11:06:00 [INFO]: Environment:
2025-08-22 11:06:10 [INFO]: Server running on port 3000
2025-08-22 11:06:10 [INFO]: Environment:
2025-08-22 11:06:12 [INFO]: Server running on port 3000
2025-08-22 11:06:12 [INFO]: Environment:
2025-08-22 11:06:18 [INFO]: Server running on port 3000
2025-08-22 11:06:18 [INFO]: Environment:
2025-08-22 11:06:20 [INFO]: Server running on port 3000
2025-08-22 11:06:20 [INFO]: Environment:
2025-08-22 11:06:37 [INFO]: Server running on port 3000
2025-08-22 11:06:37 [INFO]: Environment:
2025-08-22 11:08:48 [INFO]: Server running on port 3000
2025-08-22 11:08:48 [INFO]: Environment:
2025-08-22 11:08:55 [INFO]: Server running on port 3000
2025-08-22 11:08:55 [INFO]: Environment:
2025-08-22 11:08:56 [INFO]: Server running on port 3000
2025-08-22 11:08:56 [INFO]: Environment:
2025-08-22 11:09:15 [INFO]: Server running on port 3000
2025-08-22 11:09:15 [INFO]: Environment:
2025-08-22 11:09:17 [INFO]: Server running on port 3000
2025-08-22 11:09:17 [INFO]: Environment:
2025-08-22 11:09:22 [INFO]: Server running on port 3000
2025-08-22 11:09:22 [INFO]: Environment:
2025-08-22 11:09:23 [INFO]: Server running on port 3000
2025-08-22 11:09:23 [INFO]: Environment:
2025-08-22 11:09:29 [INFO]: Server running on port 3000
2025-08-22 11:09:29 [INFO]: Environment:
2025-08-22 11:09:36 [INFO]: Server running on port 3000
2025-08-22 11:09:36 [INFO]: Environment:
2025-08-22 11:13:24 [INFO]: Server running on port 3000
2025-08-22 11:13:24 [INFO]: Environment:
2025-08-22 11:14:31 [INFO]: Server running on port 3000
2025-08-22 11:14:31 [INFO]: Environment:
2025-08-22 11:14:32 [INFO]: Server running on port 3000
2025-08-22 11:14:32 [INFO]: Environment:
2025-08-22 11:14:43 [INFO]: Server running on port 3000
2025-08-22 11:14:43 [INFO]: Environment:
2025-08-22 11:14:45 [INFO]: Server running on port 3000
2025-08-22 11:14:45 [INFO]: Environment:
2025-08-22 11:15:08 [INFO]: Server running on port 3000
2025-08-22 11:15:08 [INFO]: Environment:
2025-08-22 11:15:10 [INFO]: Server running on port 3000
2025-08-22 11:15:10 [INFO]: Environment:
2025-08-22 11:15:52 [INFO]: Server running on port 3000
2025-08-22 11:15:52 [INFO]: Environment:
2025-08-22 11:15:55 [INFO]: Server running on port 3000
2025-08-22 11:15:55 [INFO]: Environment:
2025-08-22 11:16:09 [INFO]: Request received | {"method":"GET","url":"/","ip":"::ffff:127.0.0.1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"}
2025-08-22 11:16:09 [INFO]: Request completed | {"method":"GET","url":"/","statusCode":200,"duration":3,"ip":"::ffff:127.0.0.1"}
2025-08-22 11:16:10 [INFO]: Request received | {"method":"GET","url":"/favicon.ico","ip":"::ffff:127.0.0.1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"}
2025-08-22 11:16:10 [WARN]: Route not found | {"method":"GET","url":"/","ip":"::ffff:127.0.0.1"}
2025-08-22 11:16:10 [INFO]: Request completed | {"method":"GET","url":"/","statusCode":404,"duration":4,"ip":"::ffff:127.0.0.1"}
2025-08-22 11:16:35 [INFO]: Request received | {"method":"POST","url":"/?DOMAIN=b24-7woulk.bitrix24.vn&PROTOCOL=1&LANG=vn&APP_SID=8dc926673e1643dd5c79927fe632f0bc","ip":"::ffff:127.0.0.1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"}
2025-08-22 11:16:35 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:16:35 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:16:35 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:16:35 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:16:35 [INFO]: 🚀 BITRIX24 INSTALLATION REQUEST - FULL DATA | {"headers":{"host":"pens-measure-cgi-byte.trycloudflare.com","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","content-length":"364","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7","accept-encoding":"gzip","accept-language":"vi-VN,vi;q=0.9,fr-FR;q=0.8,fr;q=0.7,en-US;q=0.6,en;q=0.5","cache-control":"max-age=0","cdn-loop":"cloudflare; loops=1; subreqs=1","cf-connecting-ip":"14.224.204.205","cf-ew-via":"15","cf-ipcountry":"VN","cf-ray":"972f8e3cf31b8582-HKG","cf-visitor":"{\"scheme\":\"https\"}","cf-warp-tag-id":"203c2c4b-75be-41d2-8778-b256cc9450f3","cf-worker":"trycloudflare.com","connection":"keep-alive","content-type":"application/x-www-form-urlencoded","origin":"https://b24-7woulk.bitrix24.vn","priority":"u=0, i","referer":"https://b24-7woulk.bitrix24.vn/","sec-ch-ua":"\"Not;A=Brand\";v=\"99\", \"Google Chrome\";v=\"139\", \"Chromium\";v=\"139\"","sec-ch-ua-mobile":"?0","sec-ch-ua-platform":"\"macOS\"","sec-fetch-dest":"iframe","sec-fetch-mode":"navigate","sec-fetch-site":"cross-site","sec-fetch-storage-access":"active","upgrade-insecure-requests":"1","x-forwarded-for":"14.224.204.205","x-forwarded-proto":"https"},"query":{"DOMAIN":"b24-7woulk.bitrix24.vn","PROTOCOL":"1","LANG":"vn","APP_SID":"8dc926673e1643dd5c79927fe632f0bc"},"body":{"AUTH_ID":"31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325","AUTH_EXPIRES":"3600","REFRESH_ID":"217ccf68007b692f007b3dd100000001403807dbe87965e16a9eda4ce069771a8571c0","member_id":"78d52900632fa1e9acbd6c03fe41e332","status":"L","PLACEMENT":"DEFAULT","PLACEMENT_OPTIONS":"{\"IFRAME\":\"Y\",\"IFRAME_TYPE\":\"SIDE_SLIDER\",\"any\":\"27\\/\"}"},"rawBody":"{\n  \"AUTH_ID\": \"31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325\",\n  \"AUTH_EXPIRES\": \"3600\",\n  \"REFRESH_ID\": \"217ccf68007b692f007b3dd100000001403807dbe87965e16a9eda4ce069771a8571c0\",\n  \"member_id\": \"78d52900632fa1e9acbd6c03fe41e332\",\n  \"status\": \"L\",\n  \"PLACEMENT\": \"DEFAULT\",\n  \"PLACEMENT_OPTIONS\": \"{\\\"IFRAME\\\":\\\"Y\\\",\\\"IFRAME_TYPE\\\":\\\"SIDE_SLIDER\\\",\\\"any\\\":\\\"27\\\\/\\\"}\"\n}","contentType":"application/x-www-form-urlencoded","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","hasAuthData":false,"requestMethod":"POST","originalUrl":"/?DOMAIN=b24-7woulk.bitrix24.vn&PROTOCOL=1&LANG=vn&APP_SID=8dc926673e1643dd5c79927fe632f0bc"}
2025-08-22 11:16:35 [INFO]: 🎯 PROCESSING INSTALLATION WITH DIRECT AUTH DATA | {"authId":"31fda768007b692f007b...","refreshId":"217ccf68007b692f007b...","authExpires":"3600","memberId":"78d52900632fa1e9acbd6c03fe41e332","status":"L","domain":"b24-7woulk.bitrix24.vn","placement":"DEFAULT","placementOptions":"{\"IFRAME\":\"Y\",\"IFRAME_TYPE\":\"SIDE_SLIDER\",\"any\":\"27\\/\"}"}
2025-08-22 11:16:35 [INFO]: 🎯 Processing installation auth data | {"hasAccessToken":true,"hasRefreshToken":true,"domain":"b24-7woulk.bitrix24.vn","expiresIn":"3600","method":"simplified_auth"}
2025-08-22 11:16:35 [INFO]: 🔄 Normalized auth data | {"access_token":"31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325","refresh_token":"217ccf68007b692f007b3dd100000001403807dbe87965e16a9eda4ce069771a8571c0","expires_in":"3600","domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","member_id":"78d52900632fa1e9acbd6c03fe41e332","status":"L","client_endpoint":"https://b24-7woulk.bitrix24.vn/rest/","server_endpoint":"https://oauth.bitrix.info/rest/"}
2025-08-22 11:16:35 [INFO]: 🔧 Processing simplified auth | {"domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332","authExpires":"3600","fullAuthData":{"access_token":"31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325","refresh_token":"217ccf68007b692f007b3dd100000001403807dbe87965e16a9eda4ce069771a8571c0","expires_in":"3600","domain":"b24-7woulk.bitrix24.vn","member_id":"78d52900632fa1e9acbd6c03fe41e332","status":"L","client_endpoint":"https://b24-7woulk.bitrix24.vn/rest/","server_endpoint":"https://oauth.bitrix.info/rest/","method":"simplified_auth","authExpires":"3600"}}
2025-08-22 11:16:35 [INFO]: 🔑 Using provided AUTH_ID for simplified auth | {"domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332","tokenLength":70}
2025-08-22 11:16:35 [INFO]: 🔑 Generated access token for simplified auth | {"tokenLength":70,"domain":"b24-7woulk.bitrix24.vn"}
2025-08-22 11:16:35 [INFO]: 💾 Saving simplified auth token to database | {"tokenData":{"access_token":"***MASKED***","expires_in":null,"expires_at":null,"domain":"b24-7woulk.bitrix24.vn","member_id":"78d52900632fa1e9acbd6c03fe41e332","status":"L","method":"simplified_auth","created_at":"2025-08-22T04:16:35.458Z","updated_at":"2025-08-22T04:16:35.458Z"}}
2025-08-22 11:16:35 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:16:35 [INFO]: 💾 Token saved to database | {"id":1,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth"}
2025-08-22 11:16:35 [INFO]: 💾 Simplified auth token saved successfully | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":null,"memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:16:35 [INFO]: ✅ SIMPLIFIED AUTH PROCESSED SUCCESSFULLY | {"domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332","hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 11:16:35 [INFO]: Request completed | {"method":"POST","url":"/?DOMAIN=b24-7woulk.bitrix24.vn&PROTOCOL=1&LANG=vn&APP_SID=8dc926673e1643dd5c79927fe632f0bc","statusCode":200,"duration":23,"ip":"::ffff:127.0.0.1"}
2025-08-22 11:17:05 [INFO]: Request received | {"method":"POST","url":"/webhook/jotform","ip":"::ffff:127.0.0.1"}
2025-08-22 11:17:05 [INFO]: Jotform webhook received | {"submissionID":"6316454245029029858","hasRawRequest":true,"ip":"::ffff:127.0.0.1"}
2025-08-22 11:17:05 [INFO]: Contact data parsed | {"submissionId":"6316454245029029858","fullName":"Huy Tran","email":"tuanhuy227@gmail.com","phone":"(097) 828-1798"}
2025-08-22 11:17:05 [INFO]: Creating Bitrix24 lead | {"submissionId":"6316454245029029858","leadTitle":"Jotform Lead: Huy Tran","hasName":true,"hasEmail":true,"hasPhone":true}
2025-08-22 11:17:05 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"crm.lead.add","hasParams":true}
2025-08-22 11:17:05 [INFO]: 📖 Token loaded from database | {"id":1,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:17:05 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"crm.lead.add","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:17:06 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325/crm.lead.add","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:17:06 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325/crm.lead.add","error":"Request failed with status code 404"}
2025-08-22 11:17:06 [ERROR]: ❌ Simplified auth API call failed | {"method":"crm.lead.add","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:17:06 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"crm.lead.add","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:17:06 [ERROR]: Error creating Bitrix24 lead | {"error":"Bitrix24 API call failed: Request failed with status code 404","submissionId":"6316454245029029858"}
2025-08-22 11:17:06 [ERROR]: Failed to create lead | {"submissionId":"6316454245029029858","error":"Bitrix24 API call failed: Request failed with status code 404","duration":718}
2025-08-22 11:17:06 [INFO]: Request completed | {"method":"POST","url":"/jotform","statusCode":500,"duration":726,"ip":"::ffff:127.0.0.1"}
2025-08-22 11:18:23 [INFO]: Server running on port 3000
2025-08-22 11:18:23 [INFO]: Environment:
2025-08-22 11:18:31 [INFO]: Server running on port 3000
2025-08-22 11:18:31 [INFO]: Environment:
2025-08-22 11:18:35 [INFO]: Server running on port 3000
2025-08-22 11:18:35 [INFO]: Environment:
2025-08-22 11:18:45 [INFO]: Request received | {"method":"GET","url":"/api/status","ip":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"}
2025-08-22 11:18:45 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:18:45 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:18:45 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:18:45 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:18:45 [INFO]: API: Getting status
2025-08-22 11:18:45 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:18:45 [INFO]: 📖 Token loaded from database | {"id":1,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:18:45 [INFO]: Request completed | {"method":"GET","url":"/status","statusCode":200,"duration":15,"ip":"::1"}
2025-08-22 11:19:07 [INFO]: Request received | {"method":"GET","url":"/api/status","ip":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"}
2025-08-22 11:19:07 [INFO]: API: Getting status
2025-08-22 11:19:07 [INFO]: 📖 Token loaded from database | {"id":1,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:19:07 [INFO]: Request completed | {"method":"GET","url":"/status","statusCode":200,"duration":7,"ip":"::1"}
2025-08-22 11:20:18 [INFO]: Server running on port 3000
2025-08-22 11:20:18 [INFO]: Environment:
2025-08-22 11:20:20 [INFO]: Request received | {"method":"POST","url":"/webhook/test","ip":"::1","userAgent":"curl/8.6.0"}
2025-08-22 11:20:20 [INFO]: Test webhook called
2025-08-22 11:20:20 [ERROR]: Test webhook error | {"error":"Cannot read properties of undefined (reading 'createLead')"}
2025-08-22 11:20:20 [INFO]: Request completed | {"method":"POST","url":"/test","statusCode":500,"duration":4,"ip":"::1"}
2025-08-22 11:20:36 [INFO]: Server running on port 3000
2025-08-22 11:20:36 [INFO]: Environment:
2025-08-22 11:20:39 [INFO]: Server running on port 3000
2025-08-22 11:20:39 [INFO]: Environment:
2025-08-22 11:20:52 [INFO]: Request received | {"method":"POST","url":"/webhook/test","ip":"::1","userAgent":"curl/8.6.0"}
2025-08-22 11:20:52 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:20:52 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:20:52 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:20:52 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:20:52 [INFO]: Test webhook called
2025-08-22 11:20:52 [INFO]: 🔍 Testing available API methods
2025-08-22 11:20:52 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"user.current","hasParams":false}
2025-08-22 11:20:52 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:20:52 [INFO]: 📖 Token loaded from database | {"id":1,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:20:52 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"user.current","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:20:52 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325/user.current","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:20:52 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325/user.current","error":"Request failed with status code 404"}
2025-08-22 11:20:52 [ERROR]: ❌ Simplified auth API call failed | {"method":"user.current","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:20:52 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"user.current","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:20:52 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"crm.lead.fields","hasParams":false}
2025-08-22 11:20:52 [INFO]: 📖 Token loaded from database | {"id":1,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:20:52 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"crm.lead.fields","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:20:53 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325/crm.lead.fields","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:20:53 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325/crm.lead.fields","error":"Request failed with status code 404"}
2025-08-22 11:20:53 [ERROR]: ❌ Simplified auth API call failed | {"method":"crm.lead.fields","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:20:53 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"crm.lead.fields","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:20:53 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"crm.lead.add","hasParams":false}
2025-08-22 11:20:53 [INFO]: 📖 Token loaded from database | {"id":1,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:20:53 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"crm.lead.add","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:20:53 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325/crm.lead.add","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:20:53 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325/crm.lead.add","error":"Request failed with status code 404"}
2025-08-22 11:20:53 [ERROR]: ❌ Simplified auth API call failed | {"method":"crm.lead.add","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:20:53 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"crm.lead.add","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:20:53 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"crm.contact.fields","hasParams":false}
2025-08-22 11:20:53 [INFO]: 📖 Token loaded from database | {"id":1,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:20:53 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"crm.contact.fields","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:20:53 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325/crm.contact.fields","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:20:53 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325/crm.contact.fields","error":"Request failed with status code 404"}
2025-08-22 11:20:53 [ERROR]: ❌ Simplified auth API call failed | {"method":"crm.contact.fields","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:20:53 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"crm.contact.fields","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:20:53 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"crm.contact.add","hasParams":false}
2025-08-22 11:20:53 [INFO]: 📖 Token loaded from database | {"id":1,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:20:53 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"crm.contact.add","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:20:54 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325/crm.contact.add","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:20:54 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325/crm.contact.add","error":"Request failed with status code 404"}
2025-08-22 11:20:54 [ERROR]: ❌ Simplified auth API call failed | {"method":"crm.contact.add","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:20:54 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"crm.contact.add","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:20:54 [INFO]: 📊 Available methods test results | {"user.current":{"success":false,"error":"Bitrix24 API call failed: Request failed with status code 404"},"crm.lead.fields":{"success":false,"error":"Bitrix24 API call failed: Request failed with status code 404"},"crm.lead.add":{"success":false,"error":"Bitrix24 API call failed: Request failed with status code 404"},"crm.contact.fields":{"success":false,"error":"Bitrix24 API call failed: Request failed with status code 404"},"crm.contact.add":{"success":false,"error":"Bitrix24 API call failed: Request failed with status code 404"}}
2025-08-22 11:20:54 [WARN]: ⚠️ crm.lead.add method not available, trying alternative methods
2025-08-22 11:20:54 [INFO]: Request completed | {"method":"POST","url":"/test","statusCode":500,"duration":2163,"ip":"::1"}
2025-08-22 11:21:00 [INFO]: Request received | {"method":"GET","url":"/api/test-methods","ip":"::1","userAgent":"curl/8.6.0"}
2025-08-22 11:21:00 [INFO]: API: Testing available Bitrix24 methods
2025-08-22 11:21:00 [INFO]: 🔍 Testing available API methods
2025-08-22 11:21:00 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"user.current","hasParams":false}
2025-08-22 11:21:00 [INFO]: 📖 Token loaded from database | {"id":1,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:21:00 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"user.current","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:21:01 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325/user.current","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:21:01 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325/user.current","error":"Request failed with status code 404"}
2025-08-22 11:21:01 [ERROR]: ❌ Simplified auth API call failed | {"method":"user.current","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:21:01 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"user.current","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:21:01 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"crm.lead.fields","hasParams":false}
2025-08-22 11:21:01 [INFO]: 📖 Token loaded from database | {"id":1,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:21:01 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"crm.lead.fields","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:21:01 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325/crm.lead.fields","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:21:01 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325/crm.lead.fields","error":"Request failed with status code 404"}
2025-08-22 11:21:01 [ERROR]: ❌ Simplified auth API call failed | {"method":"crm.lead.fields","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:21:01 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"crm.lead.fields","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:21:01 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"crm.lead.add","hasParams":false}
2025-08-22 11:21:01 [INFO]: 📖 Token loaded from database | {"id":1,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:21:01 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"crm.lead.add","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:21:01 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325/crm.lead.add","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:21:01 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325/crm.lead.add","error":"Request failed with status code 404"}
2025-08-22 11:21:01 [ERROR]: ❌ Simplified auth API call failed | {"method":"crm.lead.add","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:21:01 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"crm.lead.add","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:21:01 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"crm.contact.fields","hasParams":false}
2025-08-22 11:21:01 [INFO]: 📖 Token loaded from database | {"id":1,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:21:01 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"crm.contact.fields","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:21:02 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325/crm.contact.fields","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:21:02 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325/crm.contact.fields","error":"Request failed with status code 404"}
2025-08-22 11:21:02 [ERROR]: ❌ Simplified auth API call failed | {"method":"crm.contact.fields","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:21:02 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"crm.contact.fields","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:21:02 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"crm.contact.add","hasParams":false}
2025-08-22 11:21:02 [INFO]: 📖 Token loaded from database | {"id":1,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:21:02 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"crm.contact.add","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:21:02 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325/crm.contact.add","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:21:02 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325/crm.contact.add","error":"Request failed with status code 404"}
2025-08-22 11:21:02 [ERROR]: ❌ Simplified auth API call failed | {"method":"crm.contact.add","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:21:02 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"crm.contact.add","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:21:02 [INFO]: 📊 Available methods test results | {"user.current":{"success":false,"error":"Bitrix24 API call failed: Request failed with status code 404"},"crm.lead.fields":{"success":false,"error":"Bitrix24 API call failed: Request failed with status code 404"},"crm.lead.add":{"success":false,"error":"Bitrix24 API call failed: Request failed with status code 404"},"crm.contact.fields":{"success":false,"error":"Bitrix24 API call failed: Request failed with status code 404"},"crm.contact.add":{"success":false,"error":"Bitrix24 API call failed: Request failed with status code 404"}}
2025-08-22 11:21:02 [INFO]: Request completed | {"method":"GET","url":"/test-methods","statusCode":200,"duration":1909,"ip":"::1"}
2025-08-22 11:24:12 [INFO]: Server running on port 3000
2025-08-22 11:24:12 [INFO]: Environment:
2025-08-22 11:24:28 [INFO]: Server running on port 3000
2025-08-22 11:24:28 [INFO]: Environment:
2025-08-22 11:24:41 [INFO]: Server running on port 3000
2025-08-22 11:24:41 [INFO]: Environment:
2025-08-22 11:24:53 [INFO]: Server running on port 3000
2025-08-22 11:24:53 [INFO]: Environment:
2025-08-22 11:25:05 [INFO]: Request received | {"method":"GET","url":"/api/status","ip":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"}
2025-08-22 11:25:05 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:25:05 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:25:05 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:25:05 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:25:05 [INFO]: API: Getting status
2025-08-22 11:25:05 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:25:05 [INFO]: 📖 Token loaded from database | {"id":1,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:25:05 [INFO]: Request completed | {"method":"GET","url":"/status","statusCode":200,"duration":25,"ip":"::1"}
2025-08-22 11:27:01 [INFO]: Request received | {"method":"GET","url":"/api/status","ip":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"}
2025-08-22 11:27:01 [INFO]: API: Getting status
2025-08-22 11:27:01 [INFO]: 📖 Token loaded from database | {"id":1,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:27:01 [INFO]: Request completed | {"method":"GET","url":"/status","statusCode":200,"duration":5,"ip":"::1"}
2025-08-22 11:28:18 [INFO]: Request received | {"method":"POST","url":"/webhook/jotform","ip":"::ffff:127.0.0.1"}
2025-08-22 11:28:18 [INFO]: Jotform webhook received | {"submissionID":"6316460970216318085","hasRawRequest":true,"ip":"::ffff:127.0.0.1"}
2025-08-22 11:28:18 [INFO]: Contact data parsed | {"submissionId":"6316460970216318085","fullName":"Huy Tran","email":"tuanhuy227@gmail.com","phone":"(097) 828-1798"}
2025-08-22 11:28:18 [INFO]: 🔍 Testing available API methods
2025-08-22 11:28:18 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"user.current","hasParams":false}
2025-08-22 11:28:18 [INFO]: 📖 Token loaded from database | {"id":1,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:28:18 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"user.current","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:28:19 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325/user.current","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:28:19 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325/user.current","error":"Request failed with status code 404"}
2025-08-22 11:28:19 [ERROR]: ❌ Simplified auth API call failed | {"method":"user.current","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:28:19 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"user.current","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:28:19 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"crm.lead.fields","hasParams":false}
2025-08-22 11:28:19 [INFO]: 📖 Token loaded from database | {"id":1,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:28:19 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"crm.lead.fields","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:28:19 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325/crm.lead.fields","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:28:19 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325/crm.lead.fields","error":"Request failed with status code 404"}
2025-08-22 11:28:19 [ERROR]: ❌ Simplified auth API call failed | {"method":"crm.lead.fields","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:28:19 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"crm.lead.fields","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:28:19 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"crm.lead.add","hasParams":false}
2025-08-22 11:28:19 [INFO]: 📖 Token loaded from database | {"id":1,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:28:19 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"crm.lead.add","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:28:20 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325/crm.lead.add","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:28:20 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325/crm.lead.add","error":"Request failed with status code 404"}
2025-08-22 11:28:20 [ERROR]: ❌ Simplified auth API call failed | {"method":"crm.lead.add","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:28:20 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"crm.lead.add","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:28:20 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"crm.contact.fields","hasParams":false}
2025-08-22 11:28:20 [INFO]: 📖 Token loaded from database | {"id":1,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:28:20 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"crm.contact.fields","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:28:20 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325/crm.contact.fields","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:28:20 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325/crm.contact.fields","error":"Request failed with status code 404"}
2025-08-22 11:28:20 [ERROR]: ❌ Simplified auth API call failed | {"method":"crm.contact.fields","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:28:20 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"crm.contact.fields","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:28:20 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"crm.contact.add","hasParams":false}
2025-08-22 11:28:20 [INFO]: 📖 Token loaded from database | {"id":1,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:28:20 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"crm.contact.add","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:28:20 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325/crm.contact.add","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:28:20 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325/crm.contact.add","error":"Request failed with status code 404"}
2025-08-22 11:28:20 [ERROR]: ❌ Simplified auth API call failed | {"method":"crm.contact.add","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:28:20 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"crm.contact.add","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:28:20 [INFO]: 📊 Available methods test results | {"user.current":{"success":false,"error":"Bitrix24 API call failed: Request failed with status code 404"},"crm.lead.fields":{"success":false,"error":"Bitrix24 API call failed: Request failed with status code 404"},"crm.lead.add":{"success":false,"error":"Bitrix24 API call failed: Request failed with status code 404"},"crm.contact.fields":{"success":false,"error":"Bitrix24 API call failed: Request failed with status code 404"},"crm.contact.add":{"success":false,"error":"Bitrix24 API call failed: Request failed with status code 404"}}
2025-08-22 11:28:20 [WARN]: ⚠️ crm.lead.add method not available, trying alternative methods
2025-08-22 11:28:20 [ERROR]: Failed to create lead | {"submissionId":"6316460970216318085","error":"No CRM methods available","duration":1902}
2025-08-22 11:28:20 [INFO]: Request completed | {"method":"POST","url":"/jotform","statusCode":500,"duration":1913,"ip":"::ffff:127.0.0.1"}
2025-08-22 11:29:13 [INFO]: Request received | {"method":"GET","url":"/oauth/authorize?domain=b24-7woulk.bitrix24.vn","ip":"::1","userAgent":"curl/8.6.0"}
2025-08-22 11:29:13 [INFO]: 🔗 Generated OAuth 2.0 authorization URL | {"domain":"b24-7woulk.bitrix24.vn","clientId":"***","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback","scope":"crm"}
2025-08-22 11:29:13 [INFO]: Redirecting to Bitrix24 OAuth2 authorization | {"domain":"b24-7woulk.bitrix24.vn","authUrl":"https://b24-7woulk.bitrix24.vn/oauth/authorize/?client_id=local.68a19222cfb9c9.90124999&response_typ..."}
2025-08-22 11:29:13 [INFO]: Request completed | {"method":"GET","url":"/authorize?domain=b24-7woulk.bitrix24.vn","statusCode":200,"duration":2,"ip":"::1"}
2025-08-22 11:29:27 [INFO]: Server running on port 3000
2025-08-22 11:29:27 [INFO]: Environment:
2025-08-22 11:29:33 [INFO]: Server running on port 3000
2025-08-22 11:29:33 [INFO]: Environment:
2025-08-22 11:29:34 [INFO]: Server running on port 3000
2025-08-22 11:29:34 [INFO]: Environment:
2025-08-22 11:29:38 [INFO]: Server running on port 3000
2025-08-22 11:29:38 [INFO]: Environment:
2025-08-22 11:30:07 [INFO]: Server running on port 3000
2025-08-22 11:30:07 [INFO]: Environment:
2025-08-22 11:30:13 [INFO]: Request received | {"method":"GET","url":"/api/status","ip":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"}
2025-08-22 11:30:13 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:30:13 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:30:13 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:30:13 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:30:13 [INFO]: API: Getting status
2025-08-22 11:30:13 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:30:13 [INFO]: 📖 Token loaded from database | {"id":1,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:30:13 [INFO]: Request completed | {"method":"GET","url":"/status","statusCode":200,"duration":21,"ip":"::1"}
2025-08-22 11:30:35 [INFO]: Request received | {"method":"POST","url":"/webhook/jotform","ip":"::ffff:127.0.0.1"}
2025-08-22 11:30:36 [INFO]: Jotform webhook received | {"submissionID":"6316462340215943524","hasRawRequest":true,"ip":"::ffff:127.0.0.1"}
2025-08-22 11:30:36 [INFO]: Contact data parsed | {"submissionId":"6316462340215943524","fullName":"Huy Tran","email":"tuanhuy227@gmail.com","phone":"(097) 828-1798"}
2025-08-22 11:30:36 [INFO]: 🔍 Testing available API methods
2025-08-22 11:30:36 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"user.current","hasParams":false}
2025-08-22 11:30:36 [INFO]: 📖 Token loaded from database | {"id":1,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:30:36 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"user.current","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:30:36 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325/user.current","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:30:36 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325/user.current","error":"Request failed with status code 404"}
2025-08-22 11:30:36 [ERROR]: ❌ Simplified auth API call failed | {"method":"user.current","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:30:36 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"user.current","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:30:36 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"crm.lead.fields","hasParams":false}
2025-08-22 11:30:36 [INFO]: 📖 Token loaded from database | {"id":1,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:30:36 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"crm.lead.fields","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:30:36 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325/crm.lead.fields","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:30:36 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325/crm.lead.fields","error":"Request failed with status code 404"}
2025-08-22 11:30:36 [ERROR]: ❌ Simplified auth API call failed | {"method":"crm.lead.fields","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:30:36 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"crm.lead.fields","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:30:36 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"crm.lead.add","hasParams":false}
2025-08-22 11:30:36 [INFO]: 📖 Token loaded from database | {"id":1,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:30:36 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"crm.lead.add","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:30:37 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325/crm.lead.add","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:30:37 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325/crm.lead.add","error":"Request failed with status code 404"}
2025-08-22 11:30:37 [ERROR]: ❌ Simplified auth API call failed | {"method":"crm.lead.add","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:30:37 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"crm.lead.add","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:30:37 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"crm.contact.fields","hasParams":false}
2025-08-22 11:30:37 [INFO]: 📖 Token loaded from database | {"id":1,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:30:37 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"crm.contact.fields","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:30:37 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325/crm.contact.fields","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:30:37 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325/crm.contact.fields","error":"Request failed with status code 404"}
2025-08-22 11:30:37 [ERROR]: ❌ Simplified auth API call failed | {"method":"crm.contact.fields","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:30:37 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"crm.contact.fields","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:30:37 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"crm.contact.add","hasParams":false}
2025-08-22 11:30:37 [INFO]: 📖 Token loaded from database | {"id":1,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:30:37 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"crm.contact.add","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:30:37 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325/crm.contact.add","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:30:37 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/31fda768007b692f007b3dd100000001403807d847ae256e0682f200615f791bfc5325/crm.contact.add","error":"Request failed with status code 404"}
2025-08-22 11:30:37 [ERROR]: ❌ Simplified auth API call failed | {"method":"crm.contact.add","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:30:37 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"crm.contact.add","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:30:37 [INFO]: 📊 Available methods test results | {"user.current":{"success":false,"error":"Bitrix24 API call failed: Request failed with status code 404"},"crm.lead.fields":{"success":false,"error":"Bitrix24 API call failed: Request failed with status code 404"},"crm.lead.add":{"success":false,"error":"Bitrix24 API call failed: Request failed with status code 404"},"crm.contact.fields":{"success":false,"error":"Bitrix24 API call failed: Request failed with status code 404"},"crm.contact.add":{"success":false,"error":"Bitrix24 API call failed: Request failed with status code 404"}}
2025-08-22 11:30:37 [WARN]: ⚠️ crm.lead.add method not available, trying alternative methods
2025-08-22 11:30:37 [ERROR]: Failed to create lead | {"submissionId":"6316462340215943524","error":"No CRM methods available","duration":1808}
2025-08-22 11:30:37 [INFO]: Request completed | {"method":"POST","url":"/jotform","statusCode":500,"duration":1817,"ip":"::ffff:127.0.0.1"}
2025-08-22 11:31:08 [INFO]: Server running on port 3000
2025-08-22 11:31:08 [INFO]: Environment:
2025-08-22 11:31:19 [INFO]: Server running on port 3000
2025-08-22 11:31:19 [INFO]: Environment:
2025-08-22 11:31:26 [INFO]: Request received | {"method":"GET","url":"/api/test-token","ip":"::1","userAgent":"curl/8.6.0"}
2025-08-22 11:31:26 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:31:26 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:31:26 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:31:26 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:31:26 [INFO]: API: Testing current token
2025-08-22 11:31:26 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:31:26 [INFO]: 📖 Token loaded from database | {"id":1,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:31:26 [INFO]: Request completed | {"method":"GET","url":"/test-token","statusCode":200,"duration":8,"ip":"::1"}
2025-08-22 11:31:34 [INFO]: Request received | {"method":"GET","url":"/api/status","ip":"::1","userAgent":"curl/8.6.0"}
2025-08-22 11:31:34 [INFO]: API: Getting status
2025-08-22 11:31:34 [INFO]: 📖 Token loaded from database | {"id":1,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:31:34 [INFO]: Request completed | {"method":"GET","url":"/status","statusCode":200,"duration":4,"ip":"::1"}
2025-08-22 11:31:43 [INFO]: Server running on port 3000
2025-08-22 11:31:43 [INFO]: Environment:
2025-08-22 11:31:43 [INFO]: Server running on port 3000
2025-08-22 11:31:43 [INFO]: Environment:
2025-08-22 11:32:27 [INFO]: Server running on port 3000
2025-08-22 11:32:27 [INFO]: Environment:
2025-08-22 11:32:32 [INFO]: Server running on port 3000
2025-08-22 11:32:32 [INFO]: Environment:
2025-08-22 11:32:58 [INFO]: Request received | {"method":"GET","url":"/api/status","ip":"::1","userAgent":"curl/8.6.0"}
2025-08-22 11:32:58 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:32:58 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:32:58 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:32:58 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:32:58 [INFO]: API: Getting status
2025-08-22 11:32:58 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:32:58 [INFO]: 📖 Token loaded from database | {"id":1,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:32:58 [INFO]: Request completed | {"method":"GET","url":"/status","statusCode":200,"duration":9,"ip":"::1"}
2025-08-22 11:33:06 [INFO]: Request received | {"method":"DELETE","url":"/api/token","ip":"::1","userAgent":"curl/8.6.0"}
2025-08-22 11:33:06 [INFO]: API: Clearing current token
2025-08-22 11:33:16 [INFO]: Server running on port 3000
2025-08-22 11:33:16 [INFO]: Environment:
2025-08-22 11:33:17 [INFO]: Server running on port 3000
2025-08-22 11:33:17 [INFO]: Environment:
2025-08-22 11:33:23 [INFO]: Request received | {"method":"POST","url":"/api/token/clear","ip":"::1","userAgent":"curl/8.6.0"}
2025-08-22 11:33:23 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:33:23 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:33:23 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:33:23 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:33:23 [INFO]: API: Clearing current token
2025-08-22 11:33:23 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:33:40 [INFO]: Server running on port 3000
2025-08-22 11:33:40 [INFO]: Environment:
2025-08-22 11:35:20 [INFO]: Server running on port 3000
2025-08-22 11:35:20 [INFO]: Environment:
2025-08-22 11:35:29 [INFO]: Server running on port 3000
2025-08-22 11:35:29 [INFO]: Environment:
2025-08-22 11:35:34 [INFO]: Server running on port 3000
2025-08-22 11:35:34 [INFO]: Environment:
2025-08-22 11:35:40 [INFO]: Server running on port 3000
2025-08-22 11:35:40 [INFO]: Environment:
2025-08-22 11:35:47 [INFO]: Server running on port 3000
2025-08-22 11:35:47 [INFO]: Environment:
2025-08-22 11:35:58 [INFO]: Server running on port 3000
2025-08-22 11:35:58 [INFO]: Environment:
2025-08-22 11:36:26 [INFO]: Request received | {"method":"GET","url":"/oauth/test?domain=b24-7woulk.bitrix24.vn","ip":"::1","userAgent":"curl/8.6.0"}
2025-08-22 11:36:26 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:36:26 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:36:26 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:36:26 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:36:26 [INFO]: Testing OAuth 2.0 configuration | {"domain":"b24-7woulk.bitrix24.vn","hasClientId":true,"hasClientSecret":true,"redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:36:26 [INFO]: 🔗 Generated OAuth 2.0 authorization URL | {"domain":"b24-7woulk.bitrix24.vn","clientId":"***","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback","scope":"crm"}
2025-08-22 11:36:26 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:37:42 [INFO]: Server running on port 3000
2025-08-22 11:37:42 [INFO]: Environment:
2025-08-22 11:37:46 [INFO]: Server running on port 3000
2025-08-22 11:37:46 [INFO]: Environment:
2025-08-22 11:37:53 [INFO]: Server running on port 3000
2025-08-22 11:37:53 [INFO]: Environment:
2025-08-22 11:37:58 [INFO]: Server running on port 3000
2025-08-22 11:37:58 [INFO]: Environment:
2025-08-22 11:38:04 [INFO]: Server running on port 3000
2025-08-22 11:38:04 [INFO]: Environment:
2025-08-22 11:39:06 [INFO]: Server running on port 3000
2025-08-22 11:39:06 [INFO]: Environment:
2025-08-22 11:39:19 [INFO]: Server running on port 3000
2025-08-22 11:39:19 [INFO]: Environment:
2025-08-22 11:39:21 [INFO]: Server running on port 3000
2025-08-22 11:39:21 [INFO]: Environment:
2025-08-22 11:39:46 [INFO]: Server running on port 3000
2025-08-22 11:39:46 [INFO]: Environment:
2025-08-22 11:39:50 [INFO]: Server running on port 3000
2025-08-22 11:39:50 [INFO]: Environment:
2025-08-22 11:40:17 [INFO]: Request received | {"method":"GET","url":"/api/simplified-auth-test","ip":"::1","userAgent":"curl/8.6.0"}
2025-08-22 11:40:17 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:40:17 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:40:17 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:40:17 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:40:17 [INFO]: API: Testing simplified auth capabilities
2025-08-22 11:40:17 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:40:17 [INFO]: 📁 No token found in database
2025-08-22 11:40:17 [INFO]: 🔍 Testing available API methods
2025-08-22 11:40:17 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"user.current","hasParams":false}
2025-08-22 11:40:17 [INFO]: 📁 No token found in database
2025-08-22 11:40:17 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"user.current","error":"No access token available. Please complete OAuth authorization."}
2025-08-22 11:40:18 [INFO]: 🔄 Calling Bitrix24 API (attempt 2) | {"method":"user.current","hasParams":false}
2025-08-22 11:40:18 [INFO]: 📁 No token found in database
2025-08-22 11:40:18 [ERROR]: ❌ Bitrix24 API call failed (attempt 2) | {"method":"user.current","error":"No access token available. Please complete OAuth authorization."}
2025-08-22 11:40:20 [INFO]: 🔄 Calling Bitrix24 API (attempt 3) | {"method":"user.current","hasParams":false}
2025-08-22 11:40:20 [INFO]: 📁 No token found in database
2025-08-22 11:40:20 [ERROR]: ❌ Bitrix24 API call failed (attempt 3) | {"method":"user.current","error":"No access token available. Please complete OAuth authorization."}
2025-08-22 11:40:20 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"crm.lead.fields","hasParams":false}
2025-08-22 11:40:20 [INFO]: 📁 No token found in database
2025-08-22 11:40:20 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"crm.lead.fields","error":"No access token available. Please complete OAuth authorization."}
2025-08-22 11:40:21 [INFO]: 🔄 Calling Bitrix24 API (attempt 2) | {"method":"crm.lead.fields","hasParams":false}
2025-08-22 11:40:21 [INFO]: 📁 No token found in database
2025-08-22 11:40:21 [ERROR]: ❌ Bitrix24 API call failed (attempt 2) | {"method":"crm.lead.fields","error":"No access token available. Please complete OAuth authorization."}
2025-08-22 11:40:23 [INFO]: 🔄 Calling Bitrix24 API (attempt 3) | {"method":"crm.lead.fields","hasParams":false}
2025-08-22 11:40:23 [INFO]: 📁 No token found in database
2025-08-22 11:40:23 [ERROR]: ❌ Bitrix24 API call failed (attempt 3) | {"method":"crm.lead.fields","error":"No access token available. Please complete OAuth authorization."}
2025-08-22 11:40:23 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"crm.lead.add","hasParams":false}
2025-08-22 11:40:23 [INFO]: 📁 No token found in database
2025-08-22 11:40:23 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"crm.lead.add","error":"No access token available. Please complete OAuth authorization."}
2025-08-22 11:40:24 [INFO]: 🔄 Calling Bitrix24 API (attempt 2) | {"method":"crm.lead.add","hasParams":false}
2025-08-22 11:40:24 [INFO]: 📁 No token found in database
2025-08-22 11:40:24 [ERROR]: ❌ Bitrix24 API call failed (attempt 2) | {"method":"crm.lead.add","error":"No access token available. Please complete OAuth authorization."}
2025-08-22 11:40:26 [INFO]: 🔄 Calling Bitrix24 API (attempt 3) | {"method":"crm.lead.add","hasParams":false}
2025-08-22 11:40:26 [INFO]: 📁 No token found in database
2025-08-22 11:40:26 [ERROR]: ❌ Bitrix24 API call failed (attempt 3) | {"method":"crm.lead.add","error":"No access token available. Please complete OAuth authorization."}
2025-08-22 11:40:26 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"crm.contact.fields","hasParams":false}
2025-08-22 11:40:26 [INFO]: 📁 No token found in database
2025-08-22 11:40:26 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"crm.contact.fields","error":"No access token available. Please complete OAuth authorization."}
2025-08-22 11:40:27 [INFO]: 🔄 Calling Bitrix24 API (attempt 2) | {"method":"crm.contact.fields","hasParams":false}
2025-08-22 11:40:27 [INFO]: 📁 No token found in database
2025-08-22 11:40:27 [ERROR]: ❌ Bitrix24 API call failed (attempt 2) | {"method":"crm.contact.fields","error":"No access token available. Please complete OAuth authorization."}
2025-08-22 11:40:29 [INFO]: 🔄 Calling Bitrix24 API (attempt 3) | {"method":"crm.contact.fields","hasParams":false}
2025-08-22 11:40:29 [INFO]: 📁 No token found in database
2025-08-22 11:40:29 [ERROR]: ❌ Bitrix24 API call failed (attempt 3) | {"method":"crm.contact.fields","error":"No access token available. Please complete OAuth authorization."}
2025-08-22 11:40:29 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"crm.contact.add","hasParams":false}
2025-08-22 11:40:29 [INFO]: 📁 No token found in database
2025-08-22 11:40:29 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"crm.contact.add","error":"No access token available. Please complete OAuth authorization."}
2025-08-22 11:40:30 [INFO]: 🔄 Calling Bitrix24 API (attempt 2) | {"method":"crm.contact.add","hasParams":false}
2025-08-22 11:40:30 [INFO]: 📁 No token found in database
2025-08-22 11:40:30 [ERROR]: ❌ Bitrix24 API call failed (attempt 2) | {"method":"crm.contact.add","error":"No access token available. Please complete OAuth authorization."}
2025-08-22 11:40:32 [INFO]: 🔄 Calling Bitrix24 API (attempt 3) | {"method":"crm.contact.add","hasParams":false}
2025-08-22 11:40:32 [INFO]: 📁 No token found in database
2025-08-22 11:40:32 [ERROR]: ❌ Bitrix24 API call failed (attempt 3) | {"method":"crm.contact.add","error":"No access token available. Please complete OAuth authorization."}
2025-08-22 11:40:32 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"app.info","hasParams":false}
2025-08-22 11:40:32 [INFO]: 📁 No token found in database
2025-08-22 11:40:32 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"app.info","error":"No access token available. Please complete OAuth authorization."}
2025-08-22 11:40:33 [INFO]: 🔄 Calling Bitrix24 API (attempt 2) | {"method":"app.info","hasParams":false}
2025-08-22 11:40:33 [INFO]: 📁 No token found in database
2025-08-22 11:40:33 [ERROR]: ❌ Bitrix24 API call failed (attempt 2) | {"method":"app.info","error":"No access token available. Please complete OAuth authorization."}
2025-08-22 11:40:35 [INFO]: 🔄 Calling Bitrix24 API (attempt 3) | {"method":"app.info","hasParams":false}
2025-08-22 11:40:35 [INFO]: 📁 No token found in database
2025-08-22 11:40:35 [ERROR]: ❌ Bitrix24 API call failed (attempt 3) | {"method":"app.info","error":"No access token available. Please complete OAuth authorization."}
2025-08-22 11:40:35 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"placement.bind","hasParams":false}
2025-08-22 11:40:35 [INFO]: 📁 No token found in database
2025-08-22 11:40:35 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"placement.bind","error":"No access token available. Please complete OAuth authorization."}
2025-08-22 11:40:36 [INFO]: 🔄 Calling Bitrix24 API (attempt 2) | {"method":"placement.bind","hasParams":false}
2025-08-22 11:40:36 [INFO]: 📁 No token found in database
2025-08-22 11:40:36 [ERROR]: ❌ Bitrix24 API call failed (attempt 2) | {"method":"placement.bind","error":"No access token available. Please complete OAuth authorization."}
2025-08-22 11:40:38 [INFO]: 🔄 Calling Bitrix24 API (attempt 3) | {"method":"placement.bind","hasParams":false}
2025-08-22 11:40:38 [INFO]: 📁 No token found in database
2025-08-22 11:40:38 [ERROR]: ❌ Bitrix24 API call failed (attempt 3) | {"method":"placement.bind","error":"No access token available. Please complete OAuth authorization."}
2025-08-22 11:40:38 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"placement.unbind","hasParams":false}
2025-08-22 11:40:38 [INFO]: 📁 No token found in database
2025-08-22 11:40:38 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"placement.unbind","error":"No access token available. Please complete OAuth authorization."}
2025-08-22 11:40:39 [INFO]: 🔄 Calling Bitrix24 API (attempt 2) | {"method":"placement.unbind","hasParams":false}
2025-08-22 11:40:39 [INFO]: 📁 No token found in database
2025-08-22 11:40:39 [ERROR]: ❌ Bitrix24 API call failed (attempt 2) | {"method":"placement.unbind","error":"No access token available. Please complete OAuth authorization."}
2025-08-22 11:40:41 [INFO]: 🔄 Calling Bitrix24 API (attempt 3) | {"method":"placement.unbind","hasParams":false}
2025-08-22 11:40:41 [INFO]: 📁 No token found in database
2025-08-22 11:40:41 [ERROR]: ❌ Bitrix24 API call failed (attempt 3) | {"method":"placement.unbind","error":"No access token available. Please complete OAuth authorization."}
2025-08-22 11:40:41 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"event.bind","hasParams":false}
2025-08-22 11:40:41 [INFO]: 📁 No token found in database
2025-08-22 11:40:41 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"event.bind","error":"No access token available. Please complete OAuth authorization."}
2025-08-22 11:40:42 [INFO]: 🔄 Calling Bitrix24 API (attempt 2) | {"method":"event.bind","hasParams":false}
2025-08-22 11:40:42 [INFO]: 📁 No token found in database
2025-08-22 11:40:42 [ERROR]: ❌ Bitrix24 API call failed (attempt 2) | {"method":"event.bind","error":"No access token available. Please complete OAuth authorization."}
2025-08-22 11:40:44 [INFO]: 🔄 Calling Bitrix24 API (attempt 3) | {"method":"event.bind","hasParams":false}
2025-08-22 11:40:44 [INFO]: 📁 No token found in database
2025-08-22 11:40:44 [ERROR]: ❌ Bitrix24 API call failed (attempt 3) | {"method":"event.bind","error":"No access token available. Please complete OAuth authorization."}
2025-08-22 11:40:44 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"event.unbind","hasParams":false}
2025-08-22 11:40:44 [INFO]: 📁 No token found in database
2025-08-22 11:40:44 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"event.unbind","error":"No access token available. Please complete OAuth authorization."}
2025-08-22 11:40:45 [INFO]: 🔄 Calling Bitrix24 API (attempt 2) | {"method":"event.unbind","hasParams":false}
2025-08-22 11:40:45 [INFO]: 📁 No token found in database
2025-08-22 11:40:45 [ERROR]: ❌ Bitrix24 API call failed (attempt 2) | {"method":"event.unbind","error":"No access token available. Please complete OAuth authorization."}
2025-08-22 11:40:47 [INFO]: 🔄 Calling Bitrix24 API (attempt 3) | {"method":"event.unbind","hasParams":false}
2025-08-22 11:40:47 [INFO]: 📁 No token found in database
2025-08-22 11:40:47 [ERROR]: ❌ Bitrix24 API call failed (attempt 3) | {"method":"event.unbind","error":"No access token available. Please complete OAuth authorization."}
2025-08-22 11:40:47 [INFO]: 📊 Available methods test results | {"user.current":{"success":false,"error":"Bitrix24 API call failed: No access token available. Please complete OAuth authorization."},"crm.lead.fields":{"success":false,"error":"Bitrix24 API call failed: No access token available. Please complete OAuth authorization."},"crm.lead.add":{"success":false,"error":"Bitrix24 API call failed: No access token available. Please complete OAuth authorization."},"crm.contact.fields":{"success":false,"error":"Bitrix24 API call failed: No access token available. Please complete OAuth authorization."},"crm.contact.add":{"success":false,"error":"Bitrix24 API call failed: No access token available. Please complete OAuth authorization."},"app.info":{"success":false,"error":"Bitrix24 API call failed: No access token available. Please complete OAuth authorization."},"placement.bind":{"success":false,"error":"Bitrix24 API call failed: No access token available. Please complete OAuth authorization."},"placement.unbind":{"success":false,"error":"Bitrix24 API call failed: No access token available. Please complete OAuth authorization."},"event.bind":{"success":false,"error":"Bitrix24 API call failed: No access token available. Please complete OAuth authorization."},"event.unbind":{"success":false,"error":"Bitrix24 API call failed: No access token available. Please complete OAuth authorization."}}
2025-08-22 11:40:47 [INFO]: Request completed | {"method":"GET","url":"/simplified-auth-test","statusCode":200,"duration":30104,"ip":"::1"}
2025-08-22 11:42:30 [INFO]: Request received | {"method":"POST","url":"/?DOMAIN=b24-7woulk.bitrix24.vn&PROTOCOL=1&LANG=vn&APP_SID=147dd445c4aae9940bc625c67f8c030b","ip":"::ffff:127.0.0.1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"}
2025-08-22 11:42:30 [INFO]: 🚀 BITRIX24 INSTALLATION REQUEST - FULL DATA | {"headers":{"host":"pens-measure-cgi-byte.trycloudflare.com","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","content-length":"364","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7","accept-encoding":"gzip","accept-language":"vi-VN,vi;q=0.9,fr-FR;q=0.8,fr;q=0.7,en-US;q=0.6,en;q=0.5","cache-control":"max-age=0","cdn-loop":"cloudflare; loops=1; subreqs=1","cf-connecting-ip":"14.224.204.205","cf-ew-via":"15","cf-ipcountry":"VN","cf-ray":"972fb43200190495-HKG","cf-visitor":"{\"scheme\":\"https\"}","cf-warp-tag-id":"203c2c4b-75be-41d2-8778-b256cc9450f3","cf-worker":"trycloudflare.com","connection":"keep-alive","content-type":"application/x-www-form-urlencoded","origin":"https://b24-7woulk.bitrix24.vn","priority":"u=0, i","referer":"https://b24-7woulk.bitrix24.vn/","sec-ch-ua":"\"Not;A=Brand\";v=\"99\", \"Google Chrome\";v=\"139\", \"Chromium\";v=\"139\"","sec-ch-ua-mobile":"?0","sec-ch-ua-platform":"\"macOS\"","sec-fetch-dest":"iframe","sec-fetch-mode":"navigate","sec-fetch-site":"cross-site","sec-fetch-storage-access":"active","upgrade-insecure-requests":"1","x-forwarded-for":"14.224.204.205","x-forwarded-proto":"https"},"query":{"DOMAIN":"b24-7woulk.bitrix24.vn","PROTOCOL":"1","LANG":"vn","APP_SID":"147dd445c4aae9940bc625c67f8c030b"},"body":{"AUTH_ID":"4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7","AUTH_EXPIRES":"3600","REFRESH_ID":"3482cf68007b6943007b3dd10000000140380726c5e8d81fe29c18324f9b0ef2115f6a","member_id":"78d52900632fa1e9acbd6c03fe41e332","status":"L","PLACEMENT":"DEFAULT","PLACEMENT_OPTIONS":"{\"IFRAME\":\"Y\",\"IFRAME_TYPE\":\"SIDE_SLIDER\",\"any\":\"29\\/\"}"},"rawBody":"{\n  \"AUTH_ID\": \"4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7\",\n  \"AUTH_EXPIRES\": \"3600\",\n  \"REFRESH_ID\": \"3482cf68007b6943007b3dd10000000140380726c5e8d81fe29c18324f9b0ef2115f6a\",\n  \"member_id\": \"78d52900632fa1e9acbd6c03fe41e332\",\n  \"status\": \"L\",\n  \"PLACEMENT\": \"DEFAULT\",\n  \"PLACEMENT_OPTIONS\": \"{\\\"IFRAME\\\":\\\"Y\\\",\\\"IFRAME_TYPE\\\":\\\"SIDE_SLIDER\\\",\\\"any\\\":\\\"29\\\\/\\\"}\"\n}","contentType":"application/x-www-form-urlencoded","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","hasAuthData":false,"requestMethod":"POST","originalUrl":"/?DOMAIN=b24-7woulk.bitrix24.vn&PROTOCOL=1&LANG=vn&APP_SID=147dd445c4aae9940bc625c67f8c030b"}
2025-08-22 11:42:30 [INFO]: 🎯 PROCESSING INSTALLATION WITH DIRECT AUTH DATA | {"authId":"4403a868007b6943007b...","refreshId":"3482cf68007b6943007b...","authExpires":"3600","memberId":"78d52900632fa1e9acbd6c03fe41e332","status":"L","domain":"b24-7woulk.bitrix24.vn","placement":"DEFAULT","placementOptions":"{\"IFRAME\":\"Y\",\"IFRAME_TYPE\":\"SIDE_SLIDER\",\"any\":\"29\\/\"}"}
2025-08-22 11:42:30 [INFO]: 🎯 Processing installation auth data | {"hasAccessToken":true,"hasRefreshToken":true,"domain":"b24-7woulk.bitrix24.vn","expiresIn":"3600","method":"simplified_auth"}
2025-08-22 11:42:30 [INFO]: 🔄 Normalized auth data | {"access_token":"4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7","refresh_token":"3482cf68007b6943007b3dd10000000140380726c5e8d81fe29c18324f9b0ef2115f6a","expires_in":"3600","domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","member_id":"78d52900632fa1e9acbd6c03fe41e332","status":"L","client_endpoint":"https://b24-7woulk.bitrix24.vn/rest/","server_endpoint":"https://oauth.bitrix.info/rest/"}
2025-08-22 11:42:30 [INFO]: 🔧 Processing simplified auth | {"domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332","authExpires":"3600","fullAuthData":{"access_token":"4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7","refresh_token":"3482cf68007b6943007b3dd10000000140380726c5e8d81fe29c18324f9b0ef2115f6a","expires_in":"3600","domain":"b24-7woulk.bitrix24.vn","member_id":"78d52900632fa1e9acbd6c03fe41e332","status":"L","client_endpoint":"https://b24-7woulk.bitrix24.vn/rest/","server_endpoint":"https://oauth.bitrix.info/rest/","method":"simplified_auth","authExpires":"3600"}}
2025-08-22 11:42:30 [INFO]: 🔑 Using provided AUTH_ID for simplified auth | {"domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332","tokenLength":70}
2025-08-22 11:42:30 [INFO]: 🔑 Generated access token for simplified auth | {"tokenLength":70,"domain":"b24-7woulk.bitrix24.vn"}
2025-08-22 11:42:30 [INFO]: 💾 Saving simplified auth token to database | {"tokenData":{"access_token":"***MASKED***","expires_in":null,"expires_at":null,"domain":"b24-7woulk.bitrix24.vn","member_id":"78d52900632fa1e9acbd6c03fe41e332","status":"L","method":"simplified_auth","created_at":"2025-08-22T04:42:30.231Z","updated_at":"2025-08-22T04:42:30.231Z"}}
2025-08-22 11:42:30 [INFO]: 💾 Token saved to database | {"id":2,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth"}
2025-08-22 11:42:30 [INFO]: 💾 Simplified auth token saved successfully | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":null,"memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:42:30 [INFO]: ✅ SIMPLIFIED AUTH PROCESSED SUCCESSFULLY | {"domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332","hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 11:42:30 [INFO]: Request completed | {"method":"POST","url":"/?DOMAIN=b24-7woulk.bitrix24.vn&PROTOCOL=1&LANG=vn&APP_SID=147dd445c4aae9940bc625c67f8c030b","statusCode":200,"duration":34,"ip":"::ffff:127.0.0.1"}
2025-08-22 11:43:03 [INFO]: Request received | {"method":"POST","url":"/webhook/jotform","ip":"::ffff:127.0.0.1"}
2025-08-22 11:43:03 [INFO]: Jotform webhook received | {"submissionID":"6316469820214755499","hasRawRequest":true,"ip":"::ffff:127.0.0.1"}
2025-08-22 11:43:03 [INFO]: Contact data parsed | {"submissionId":"6316469820214755499","fullName":"Huy Tran","email":"tuanhuy227@gmail.com","phone":"(097) 828-1798"}
2025-08-22 11:43:03 [INFO]: 🔍 Testing available API methods
2025-08-22 11:43:03 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"user.current","hasParams":false}
2025-08-22 11:43:03 [INFO]: 📖 Token loaded from database | {"id":2,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:43:03 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"user.current","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:43:03 [INFO]: 🔗 Using webhook URL | {"webhookUrl":"https://b24-7woulk.bitrix24.vn/rest/***MASKED***/user.current","method":"user.current","hasParams":false}
2025-08-22 11:43:04 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/user.current","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:43:04 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/user.current","error":"Request failed with status code 404"}
2025-08-22 11:43:04 [ERROR]: ❌ Simplified auth API call failed | {"method":"user.current","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:43:04 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"user.current","error":"Method 'user.current' not available with simplified auth. This method requires OAuth 2.0 with CRM scope."}
2025-08-22 11:43:05 [INFO]: 🔄 Calling Bitrix24 API (attempt 2) | {"method":"user.current","hasParams":false}
2025-08-22 11:43:05 [INFO]: 📖 Token loaded from database | {"id":2,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:43:05 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"user.current","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:43:05 [INFO]: 🔗 Using webhook URL | {"webhookUrl":"https://b24-7woulk.bitrix24.vn/rest/***MASKED***/user.current","method":"user.current","hasParams":false}
2025-08-22 11:43:06 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/user.current","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:43:06 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/user.current","error":"Request failed with status code 404"}
2025-08-22 11:43:06 [ERROR]: ❌ Simplified auth API call failed | {"method":"user.current","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:43:06 [ERROR]: ❌ Bitrix24 API call failed (attempt 2) | {"method":"user.current","error":"Method 'user.current' not available with simplified auth. This method requires OAuth 2.0 with CRM scope."}
2025-08-22 11:43:08 [INFO]: 🔄 Calling Bitrix24 API (attempt 3) | {"method":"user.current","hasParams":false}
2025-08-22 11:43:08 [INFO]: 📖 Token loaded from database | {"id":2,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:43:08 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"user.current","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:43:08 [INFO]: 🔗 Using webhook URL | {"webhookUrl":"https://b24-7woulk.bitrix24.vn/rest/***MASKED***/user.current","method":"user.current","hasParams":false}
2025-08-22 11:43:08 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/user.current","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:43:08 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/user.current","error":"Request failed with status code 404"}
2025-08-22 11:43:08 [ERROR]: ❌ Simplified auth API call failed | {"method":"user.current","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:43:08 [ERROR]: ❌ Bitrix24 API call failed (attempt 3) | {"method":"user.current","error":"Method 'user.current' not available with simplified auth. This method requires OAuth 2.0 with CRM scope."}
2025-08-22 11:43:08 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"crm.lead.fields","hasParams":false}
2025-08-22 11:43:08 [INFO]: 📖 Token loaded from database | {"id":2,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:43:08 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"crm.lead.fields","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:43:08 [INFO]: 🔗 Using webhook URL | {"webhookUrl":"https://b24-7woulk.bitrix24.vn/rest/***MASKED***/crm.lead.fields","method":"crm.lead.fields","hasParams":false}
2025-08-22 11:43:08 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.lead.fields","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:43:08 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.lead.fields","error":"Request failed with status code 404"}
2025-08-22 11:43:08 [ERROR]: ❌ Simplified auth API call failed | {"method":"crm.lead.fields","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:43:08 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"crm.lead.fields","error":"Method 'crm.lead.fields' not available with simplified auth. This method requires OAuth 2.0 with CRM scope."}
2025-08-22 11:43:09 [INFO]: 🔄 Calling Bitrix24 API (attempt 2) | {"method":"crm.lead.fields","hasParams":false}
2025-08-22 11:43:09 [INFO]: 📖 Token loaded from database | {"id":2,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:43:09 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"crm.lead.fields","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:43:09 [INFO]: 🔗 Using webhook URL | {"webhookUrl":"https://b24-7woulk.bitrix24.vn/rest/***MASKED***/crm.lead.fields","method":"crm.lead.fields","hasParams":false}
2025-08-22 11:43:10 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.lead.fields","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:43:10 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.lead.fields","error":"Request failed with status code 404"}
2025-08-22 11:43:10 [ERROR]: ❌ Simplified auth API call failed | {"method":"crm.lead.fields","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:43:10 [ERROR]: ❌ Bitrix24 API call failed (attempt 2) | {"method":"crm.lead.fields","error":"Method 'crm.lead.fields' not available with simplified auth. This method requires OAuth 2.0 with CRM scope."}
2025-08-22 11:43:12 [INFO]: 🔄 Calling Bitrix24 API (attempt 3) | {"method":"crm.lead.fields","hasParams":false}
2025-08-22 11:43:12 [INFO]: 📖 Token loaded from database | {"id":2,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:43:12 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"crm.lead.fields","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:43:12 [INFO]: 🔗 Using webhook URL | {"webhookUrl":"https://b24-7woulk.bitrix24.vn/rest/***MASKED***/crm.lead.fields","method":"crm.lead.fields","hasParams":false}
2025-08-22 11:43:12 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.lead.fields","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:43:12 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.lead.fields","error":"Request failed with status code 404"}
2025-08-22 11:43:12 [ERROR]: ❌ Simplified auth API call failed | {"method":"crm.lead.fields","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:43:12 [ERROR]: ❌ Bitrix24 API call failed (attempt 3) | {"method":"crm.lead.fields","error":"Method 'crm.lead.fields' not available with simplified auth. This method requires OAuth 2.0 with CRM scope."}
2025-08-22 11:43:12 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"crm.lead.add","hasParams":false}
2025-08-22 11:43:12 [INFO]: 📖 Token loaded from database | {"id":2,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:43:12 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"crm.lead.add","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:43:12 [INFO]: 🔗 Using webhook URL | {"webhookUrl":"https://b24-7woulk.bitrix24.vn/rest/***MASKED***/crm.lead.add","method":"crm.lead.add","hasParams":false}
2025-08-22 11:43:12 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.lead.add","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:43:12 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.lead.add","error":"Request failed with status code 404"}
2025-08-22 11:43:12 [ERROR]: ❌ Simplified auth API call failed | {"method":"crm.lead.add","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:43:12 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"crm.lead.add","error":"Method 'crm.lead.add' not available with simplified auth. This method requires OAuth 2.0 with CRM scope."}
2025-08-22 11:43:13 [INFO]: 🔄 Calling Bitrix24 API (attempt 2) | {"method":"crm.lead.add","hasParams":false}
2025-08-22 11:43:13 [INFO]: 📖 Token loaded from database | {"id":2,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:43:13 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"crm.lead.add","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:43:13 [INFO]: 🔗 Using webhook URL | {"webhookUrl":"https://b24-7woulk.bitrix24.vn/rest/***MASKED***/crm.lead.add","method":"crm.lead.add","hasParams":false}
2025-08-22 11:43:14 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.lead.add","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:43:14 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.lead.add","error":"Request failed with status code 404"}
2025-08-22 11:43:14 [ERROR]: ❌ Simplified auth API call failed | {"method":"crm.lead.add","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:43:14 [ERROR]: ❌ Bitrix24 API call failed (attempt 2) | {"method":"crm.lead.add","error":"Method 'crm.lead.add' not available with simplified auth. This method requires OAuth 2.0 with CRM scope."}
2025-08-22 11:43:16 [INFO]: 🔄 Calling Bitrix24 API (attempt 3) | {"method":"crm.lead.add","hasParams":false}
2025-08-22 11:43:16 [INFO]: 📖 Token loaded from database | {"id":2,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:43:16 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"crm.lead.add","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:43:16 [INFO]: 🔗 Using webhook URL | {"webhookUrl":"https://b24-7woulk.bitrix24.vn/rest/***MASKED***/crm.lead.add","method":"crm.lead.add","hasParams":false}
2025-08-22 11:43:16 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.lead.add","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:43:16 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.lead.add","error":"Request failed with status code 404"}
2025-08-22 11:43:16 [ERROR]: ❌ Simplified auth API call failed | {"method":"crm.lead.add","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:43:16 [ERROR]: ❌ Bitrix24 API call failed (attempt 3) | {"method":"crm.lead.add","error":"Method 'crm.lead.add' not available with simplified auth. This method requires OAuth 2.0 with CRM scope."}
2025-08-22 11:43:16 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"crm.contact.fields","hasParams":false}
2025-08-22 11:43:16 [INFO]: 📖 Token loaded from database | {"id":2,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:43:16 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"crm.contact.fields","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:43:16 [INFO]: 🔗 Using webhook URL | {"webhookUrl":"https://b24-7woulk.bitrix24.vn/rest/***MASKED***/crm.contact.fields","method":"crm.contact.fields","hasParams":false}
2025-08-22 11:43:16 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.contact.fields","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:43:16 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.contact.fields","error":"Request failed with status code 404"}
2025-08-22 11:43:16 [ERROR]: ❌ Simplified auth API call failed | {"method":"crm.contact.fields","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:43:16 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"crm.contact.fields","error":"Method 'crm.contact.fields' not available with simplified auth. This method requires OAuth 2.0 with CRM scope."}
2025-08-22 11:43:17 [INFO]: 🔄 Calling Bitrix24 API (attempt 2) | {"method":"crm.contact.fields","hasParams":false}
2025-08-22 11:43:17 [INFO]: 📖 Token loaded from database | {"id":2,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:43:17 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"crm.contact.fields","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:43:17 [INFO]: 🔗 Using webhook URL | {"webhookUrl":"https://b24-7woulk.bitrix24.vn/rest/***MASKED***/crm.contact.fields","method":"crm.contact.fields","hasParams":false}
2025-08-22 11:43:18 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.contact.fields","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:43:18 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.contact.fields","error":"Request failed with status code 404"}
2025-08-22 11:43:18 [ERROR]: ❌ Simplified auth API call failed | {"method":"crm.contact.fields","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:43:18 [ERROR]: ❌ Bitrix24 API call failed (attempt 2) | {"method":"crm.contact.fields","error":"Method 'crm.contact.fields' not available with simplified auth. This method requires OAuth 2.0 with CRM scope."}
2025-08-22 11:43:20 [INFO]: 🔄 Calling Bitrix24 API (attempt 3) | {"method":"crm.contact.fields","hasParams":false}
2025-08-22 11:43:20 [INFO]: 📖 Token loaded from database | {"id":2,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:43:20 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"crm.contact.fields","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:43:20 [INFO]: 🔗 Using webhook URL | {"webhookUrl":"https://b24-7woulk.bitrix24.vn/rest/***MASKED***/crm.contact.fields","method":"crm.contact.fields","hasParams":false}
2025-08-22 11:43:20 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.contact.fields","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:43:20 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.contact.fields","error":"Request failed with status code 404"}
2025-08-22 11:43:20 [ERROR]: ❌ Simplified auth API call failed | {"method":"crm.contact.fields","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:43:20 [ERROR]: ❌ Bitrix24 API call failed (attempt 3) | {"method":"crm.contact.fields","error":"Method 'crm.contact.fields' not available with simplified auth. This method requires OAuth 2.0 with CRM scope."}
2025-08-22 11:43:20 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"crm.contact.add","hasParams":false}
2025-08-22 11:43:20 [INFO]: 📖 Token loaded from database | {"id":2,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:43:20 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"crm.contact.add","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:43:20 [INFO]: 🔗 Using webhook URL | {"webhookUrl":"https://b24-7woulk.bitrix24.vn/rest/***MASKED***/crm.contact.add","method":"crm.contact.add","hasParams":false}
2025-08-22 11:43:20 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.contact.add","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:43:20 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.contact.add","error":"Request failed with status code 404"}
2025-08-22 11:43:20 [ERROR]: ❌ Simplified auth API call failed | {"method":"crm.contact.add","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:43:20 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"crm.contact.add","error":"Method 'crm.contact.add' not available with simplified auth. This method requires OAuth 2.0 with CRM scope."}
2025-08-22 11:43:21 [INFO]: 🔄 Calling Bitrix24 API (attempt 2) | {"method":"crm.contact.add","hasParams":false}
2025-08-22 11:43:21 [INFO]: 📖 Token loaded from database | {"id":2,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:43:21 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"crm.contact.add","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:43:21 [INFO]: 🔗 Using webhook URL | {"webhookUrl":"https://b24-7woulk.bitrix24.vn/rest/***MASKED***/crm.contact.add","method":"crm.contact.add","hasParams":false}
2025-08-22 11:43:22 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.contact.add","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:43:22 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.contact.add","error":"Request failed with status code 404"}
2025-08-22 11:43:22 [ERROR]: ❌ Simplified auth API call failed | {"method":"crm.contact.add","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:43:22 [ERROR]: ❌ Bitrix24 API call failed (attempt 2) | {"method":"crm.contact.add","error":"Method 'crm.contact.add' not available with simplified auth. This method requires OAuth 2.0 with CRM scope."}
2025-08-22 11:46:58 [INFO]: Server running on port 3000
2025-08-22 11:46:58 [INFO]: Environment:
2025-08-22 11:47:18 [INFO]: Request received | {"method":"POST","url":"/?DOMAIN=b24-7woulk.bitrix24.vn&PROTOCOL=1&LANG=vn&APP_SID=577037b0c50cd2cd0454ee93a1aa2ffc","ip":"::ffff:127.0.0.1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"}
2025-08-22 11:47:18 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:47:18 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:47:18 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:47:18 [ERROR]: App installation error | {"error":"Environment variable BITRIX24_REST_URL is not set","query":{"DOMAIN":"b24-7woulk.bitrix24.vn","PROTOCOL":"1","LANG":"vn","APP_SID":"577037b0c50cd2cd0454ee93a1aa2ffc"},"body":{"AUTH_ID":"6404a868007b6943007b3dd100000001403807edd3e4479a071c33ebc3b986f73365c5","AUTH_EXPIRES":"3600","REFRESH_ID":"5483cf68007b6943007b3dd100000001403807ede845224098df175b66c9972210c32e","member_id":"78d52900632fa1e9acbd6c03fe41e332","status":"L","PLACEMENT":"DEFAULT","PLACEMENT_OPTIONS":"{\"IFRAME\":\"Y\",\"IFRAME_TYPE\":\"SIDE_SLIDER\",\"any\":\"29\\/\"}"}}
Error: Environment variable BITRIX24_REST_URL is not set
    at ConfigService.get (/Users/tuanhuytran/jotform-bitrix24-integration/src/services/config.service.js:15:13)
    at ConfigService.getBitrix24Config (/Users/tuanhuytran/jotform-bitrix24-integration/src/services/config.service.js:69:21)
    at new Bitrix24NewService (/Users/tuanhuytran/jotform-bitrix24-integration/src/services/bitrix24-new.service.js:16:45)
    at ServiceContainer.initializeServices (/Users/tuanhuytran/jotform-bitrix24-integration/src/services/service-container.js:41:31)
    at async initializeServices (/Users/tuanhuytran/jotform-bitrix24-integration/src/routes/install.js:14:5)
    at async /Users/tuanhuytran/jotform-bitrix24-integration/src/routes/install.js:116:22
2025-08-22 11:47:18 [INFO]: Request completed | {"method":"POST","url":"/?DOMAIN=b24-7woulk.bitrix24.vn&PROTOCOL=1&LANG=vn&APP_SID=577037b0c50cd2cd0454ee93a1aa2ffc","statusCode":500,"duration":13,"ip":"::ffff:127.0.0.1"}
2025-08-22 11:47:18 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:47:36 [INFO]: Server running on port 3000
2025-08-22 11:47:36 [INFO]: Environment:
2025-08-22 11:47:43 [INFO]: Server running on port 3000
2025-08-22 11:47:43 [INFO]: Environment:
2025-08-22 11:47:46 [INFO]: Server running on port 3000
2025-08-22 11:47:46 [INFO]: Environment:
2025-08-22 11:48:33 [INFO]: Request received | {"method":"POST","url":"/?DOMAIN=b24-7woulk.bitrix24.vn&PROTOCOL=1&LANG=vn&APP_SID=40a1f8c55554163be7cb75d088beffc9","ip":"::ffff:127.0.0.1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"}
2025-08-22 11:48:33 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:48:33 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:48:33 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:48:33 [ERROR]: App installation error | {"error":"Environment variable BITRIX24_REST_URL is not set","query":{"DOMAIN":"b24-7woulk.bitrix24.vn","PROTOCOL":"1","LANG":"vn","APP_SID":"40a1f8c55554163be7cb75d088beffc9"},"body":{"AUTH_ID":"b104a868007b6943007b3dd100000001403807af82821be4440fd444270a859cb20ff7","AUTH_EXPIRES":"3600","REFRESH_ID":"a183cf68007b6943007b3dd100000001403807058603e3b68b72c5e9077d3166dd2699","member_id":"78d52900632fa1e9acbd6c03fe41e332","status":"L","PLACEMENT":"DEFAULT","PLACEMENT_OPTIONS":"{\"IFRAME\":\"Y\",\"IFRAME_TYPE\":\"SIDE_SLIDER\",\"any\":\"29\\/\"}"}}
Error: Environment variable BITRIX24_REST_URL is not set
    at ConfigService.get (/Users/tuanhuytran/jotform-bitrix24-integration/src/services/config.service.js:15:13)
    at ConfigService.getBitrix24Config (/Users/tuanhuytran/jotform-bitrix24-integration/src/services/config.service.js:69:21)
    at new Bitrix24NewService (/Users/tuanhuytran/jotform-bitrix24-integration/src/services/bitrix24-new.service.js:16:45)
    at ServiceContainer.initializeServices (/Users/tuanhuytran/jotform-bitrix24-integration/src/services/service-container.js:41:31)
    at async initializeServices (/Users/tuanhuytran/jotform-bitrix24-integration/src/routes/install.js:14:5)
    at async /Users/tuanhuytran/jotform-bitrix24-integration/src/routes/install.js:116:22
2025-08-22 11:48:33 [INFO]: Request completed | {"method":"POST","url":"/?DOMAIN=b24-7woulk.bitrix24.vn&PROTOCOL=1&LANG=vn&APP_SID=40a1f8c55554163be7cb75d088beffc9","statusCode":500,"duration":10,"ip":"::ffff:127.0.0.1"}
2025-08-22 11:48:33 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:48:56 [INFO]: Server running on port 3000
2025-08-22 11:48:56 [INFO]: Environment:
2025-08-22 11:49:18 [INFO]: Server running on port 3000
2025-08-22 11:49:18 [INFO]: Environment:
2025-08-22 11:50:39 [INFO]: Request received | {"method":"GET","url":"/api/simplified-auth-test","ip":"::1","userAgent":"curl/8.6.0"}
2025-08-22 11:50:39 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:50:39 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:50:39 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:50:39 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:50:39 [INFO]: API: Testing simplified auth capabilities
2025-08-22 11:50:39 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:50:39 [INFO]: 📖 Token loaded from database | {"id":2,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:50:39 [INFO]: 🔍 Testing available API methods
2025-08-22 11:50:39 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"user.current","hasParams":false}
2025-08-22 11:50:39 [INFO]: 📖 Token loaded from database | {"id":2,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:50:39 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"user.current","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:50:39 [INFO]: 🔗 Using webhook URL | {"webhookUrl":"https://b24-7woulk.bitrix24.vn/rest/***MASKED***/user.current","method":"user.current","hasParams":false}
2025-08-22 11:50:40 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/user.current","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:50:40 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/user.current","error":"Request failed with status code 404"}
2025-08-22 11:50:40 [ERROR]: ❌ Simplified auth API call failed | {"method":"user.current","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:50:40 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"user.current","error":"Method 'user.current' not available with simplified auth. This method requires OAuth 2.0 with CRM scope."}
2025-08-22 11:50:41 [INFO]: 🔄 Calling Bitrix24 API (attempt 2) | {"method":"user.current","hasParams":false}
2025-08-22 11:50:41 [INFO]: 📖 Token loaded from database | {"id":2,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:50:41 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"user.current","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:50:41 [INFO]: 🔗 Using webhook URL | {"webhookUrl":"https://b24-7woulk.bitrix24.vn/rest/***MASKED***/user.current","method":"user.current","hasParams":false}
2025-08-22 11:50:41 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/user.current","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:50:41 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/user.current","error":"Request failed with status code 404"}
2025-08-22 11:50:41 [ERROR]: ❌ Simplified auth API call failed | {"method":"user.current","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:50:41 [ERROR]: ❌ Bitrix24 API call failed (attempt 2) | {"method":"user.current","error":"Method 'user.current' not available with simplified auth. This method requires OAuth 2.0 with CRM scope."}
2025-08-22 11:50:43 [INFO]: 🔄 Calling Bitrix24 API (attempt 3) | {"method":"user.current","hasParams":false}
2025-08-22 11:50:43 [INFO]: 📖 Token loaded from database | {"id":2,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:50:43 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"user.current","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:50:43 [INFO]: 🔗 Using webhook URL | {"webhookUrl":"https://b24-7woulk.bitrix24.vn/rest/***MASKED***/user.current","method":"user.current","hasParams":false}
2025-08-22 11:50:43 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/user.current","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:50:43 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/user.current","error":"Request failed with status code 404"}
2025-08-22 11:50:43 [ERROR]: ❌ Simplified auth API call failed | {"method":"user.current","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:50:43 [ERROR]: ❌ Bitrix24 API call failed (attempt 3) | {"method":"user.current","error":"Method 'user.current' not available with simplified auth. This method requires OAuth 2.0 with CRM scope."}
2025-08-22 11:50:43 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"crm.lead.fields","hasParams":false}
2025-08-22 11:50:43 [INFO]: 📖 Token loaded from database | {"id":2,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:50:43 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"crm.lead.fields","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:50:43 [INFO]: 🔗 Using webhook URL | {"webhookUrl":"https://b24-7woulk.bitrix24.vn/rest/***MASKED***/crm.lead.fields","method":"crm.lead.fields","hasParams":false}
2025-08-22 11:50:44 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.lead.fields","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:50:44 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.lead.fields","error":"Request failed with status code 404"}
2025-08-22 11:50:44 [ERROR]: ❌ Simplified auth API call failed | {"method":"crm.lead.fields","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:50:44 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"crm.lead.fields","error":"Method 'crm.lead.fields' not available with simplified auth. This method requires OAuth 2.0 with CRM scope."}
2025-08-22 11:50:45 [INFO]: 🔄 Calling Bitrix24 API (attempt 2) | {"method":"crm.lead.fields","hasParams":false}
2025-08-22 11:50:45 [INFO]: 📖 Token loaded from database | {"id":2,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:50:45 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"crm.lead.fields","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:50:45 [INFO]: 🔗 Using webhook URL | {"webhookUrl":"https://b24-7woulk.bitrix24.vn/rest/***MASKED***/crm.lead.fields","method":"crm.lead.fields","hasParams":false}
2025-08-22 11:50:45 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.lead.fields","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:50:45 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.lead.fields","error":"Request failed with status code 404"}
2025-08-22 11:50:45 [ERROR]: ❌ Simplified auth API call failed | {"method":"crm.lead.fields","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:50:45 [ERROR]: ❌ Bitrix24 API call failed (attempt 2) | {"method":"crm.lead.fields","error":"Method 'crm.lead.fields' not available with simplified auth. This method requires OAuth 2.0 with CRM scope."}
2025-08-22 11:50:47 [INFO]: 🔄 Calling Bitrix24 API (attempt 3) | {"method":"crm.lead.fields","hasParams":false}
2025-08-22 11:50:47 [INFO]: 📖 Token loaded from database | {"id":2,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:50:47 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"crm.lead.fields","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:50:47 [INFO]: 🔗 Using webhook URL | {"webhookUrl":"https://b24-7woulk.bitrix24.vn/rest/***MASKED***/crm.lead.fields","method":"crm.lead.fields","hasParams":false}
2025-08-22 11:50:47 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.lead.fields","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:50:47 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.lead.fields","error":"Request failed with status code 404"}
2025-08-22 11:50:47 [ERROR]: ❌ Simplified auth API call failed | {"method":"crm.lead.fields","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:50:47 [ERROR]: ❌ Bitrix24 API call failed (attempt 3) | {"method":"crm.lead.fields","error":"Method 'crm.lead.fields' not available with simplified auth. This method requires OAuth 2.0 with CRM scope."}
2025-08-22 11:50:47 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"crm.lead.add","hasParams":false}
2025-08-22 11:50:47 [INFO]: 📖 Token loaded from database | {"id":2,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:50:47 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"crm.lead.add","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:50:47 [INFO]: 🔗 Using webhook URL | {"webhookUrl":"https://b24-7woulk.bitrix24.vn/rest/***MASKED***/crm.lead.add","method":"crm.lead.add","hasParams":false}
2025-08-22 11:50:48 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.lead.add","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:50:48 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.lead.add","error":"Request failed with status code 404"}
2025-08-22 11:50:48 [ERROR]: ❌ Simplified auth API call failed | {"method":"crm.lead.add","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:50:48 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"crm.lead.add","error":"Method 'crm.lead.add' not available with simplified auth. This method requires OAuth 2.0 with CRM scope."}
2025-08-22 11:50:49 [INFO]: 🔄 Calling Bitrix24 API (attempt 2) | {"method":"crm.lead.add","hasParams":false}
2025-08-22 11:50:49 [INFO]: 📖 Token loaded from database | {"id":2,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:50:49 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"crm.lead.add","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:50:49 [INFO]: 🔗 Using webhook URL | {"webhookUrl":"https://b24-7woulk.bitrix24.vn/rest/***MASKED***/crm.lead.add","method":"crm.lead.add","hasParams":false}
2025-08-22 11:50:49 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.lead.add","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:50:49 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.lead.add","error":"Request failed with status code 404"}
2025-08-22 11:50:49 [ERROR]: ❌ Simplified auth API call failed | {"method":"crm.lead.add","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:50:49 [ERROR]: ❌ Bitrix24 API call failed (attempt 2) | {"method":"crm.lead.add","error":"Method 'crm.lead.add' not available with simplified auth. This method requires OAuth 2.0 with CRM scope."}
2025-08-22 11:50:51 [INFO]: 🔄 Calling Bitrix24 API (attempt 3) | {"method":"crm.lead.add","hasParams":false}
2025-08-22 11:50:51 [INFO]: 📖 Token loaded from database | {"id":2,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:50:51 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"crm.lead.add","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:50:51 [INFO]: 🔗 Using webhook URL | {"webhookUrl":"https://b24-7woulk.bitrix24.vn/rest/***MASKED***/crm.lead.add","method":"crm.lead.add","hasParams":false}
2025-08-22 11:50:51 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.lead.add","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:50:51 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.lead.add","error":"Request failed with status code 404"}
2025-08-22 11:50:51 [ERROR]: ❌ Simplified auth API call failed | {"method":"crm.lead.add","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:50:51 [ERROR]: ❌ Bitrix24 API call failed (attempt 3) | {"method":"crm.lead.add","error":"Method 'crm.lead.add' not available with simplified auth. This method requires OAuth 2.0 with CRM scope."}
2025-08-22 11:50:51 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"crm.contact.fields","hasParams":false}
2025-08-22 11:50:51 [INFO]: 📖 Token loaded from database | {"id":2,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:50:51 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"crm.contact.fields","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:50:51 [INFO]: 🔗 Using webhook URL | {"webhookUrl":"https://b24-7woulk.bitrix24.vn/rest/***MASKED***/crm.contact.fields","method":"crm.contact.fields","hasParams":false}
2025-08-22 11:50:52 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.contact.fields","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:50:52 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.contact.fields","error":"Request failed with status code 404"}
2025-08-22 11:50:52 [ERROR]: ❌ Simplified auth API call failed | {"method":"crm.contact.fields","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:50:52 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"crm.contact.fields","error":"Method 'crm.contact.fields' not available with simplified auth. This method requires OAuth 2.0 with CRM scope."}
2025-08-22 11:50:53 [INFO]: 🔄 Calling Bitrix24 API (attempt 2) | {"method":"crm.contact.fields","hasParams":false}
2025-08-22 11:50:53 [INFO]: 📖 Token loaded from database | {"id":2,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:50:53 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"crm.contact.fields","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:50:53 [INFO]: 🔗 Using webhook URL | {"webhookUrl":"https://b24-7woulk.bitrix24.vn/rest/***MASKED***/crm.contact.fields","method":"crm.contact.fields","hasParams":false}
2025-08-22 11:50:53 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.contact.fields","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:50:53 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.contact.fields","error":"Request failed with status code 404"}
2025-08-22 11:50:53 [ERROR]: ❌ Simplified auth API call failed | {"method":"crm.contact.fields","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:50:53 [ERROR]: ❌ Bitrix24 API call failed (attempt 2) | {"method":"crm.contact.fields","error":"Method 'crm.contact.fields' not available with simplified auth. This method requires OAuth 2.0 with CRM scope."}
2025-08-22 11:50:55 [INFO]: 🔄 Calling Bitrix24 API (attempt 3) | {"method":"crm.contact.fields","hasParams":false}
2025-08-22 11:50:55 [INFO]: 📖 Token loaded from database | {"id":2,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:50:55 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"crm.contact.fields","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:50:55 [INFO]: 🔗 Using webhook URL | {"webhookUrl":"https://b24-7woulk.bitrix24.vn/rest/***MASKED***/crm.contact.fields","method":"crm.contact.fields","hasParams":false}
2025-08-22 11:50:55 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.contact.fields","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:50:55 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.contact.fields","error":"Request failed with status code 404"}
2025-08-22 11:50:55 [ERROR]: ❌ Simplified auth API call failed | {"method":"crm.contact.fields","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:50:55 [ERROR]: ❌ Bitrix24 API call failed (attempt 3) | {"method":"crm.contact.fields","error":"Method 'crm.contact.fields' not available with simplified auth. This method requires OAuth 2.0 with CRM scope."}
2025-08-22 11:50:55 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"crm.contact.add","hasParams":false}
2025-08-22 11:50:55 [INFO]: 📖 Token loaded from database | {"id":2,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:50:55 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"crm.contact.add","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:50:55 [INFO]: 🔗 Using webhook URL | {"webhookUrl":"https://b24-7woulk.bitrix24.vn/rest/***MASKED***/crm.contact.add","method":"crm.contact.add","hasParams":false}
2025-08-22 11:50:56 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.contact.add","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:50:56 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.contact.add","error":"Request failed with status code 404"}
2025-08-22 11:50:56 [ERROR]: ❌ Simplified auth API call failed | {"method":"crm.contact.add","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:50:56 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"crm.contact.add","error":"Method 'crm.contact.add' not available with simplified auth. This method requires OAuth 2.0 with CRM scope."}
2025-08-22 11:50:57 [INFO]: 🔄 Calling Bitrix24 API (attempt 2) | {"method":"crm.contact.add","hasParams":false}
2025-08-22 11:50:57 [INFO]: 📖 Token loaded from database | {"id":2,"domain":"b24-7woulk.bitrix24.vn","method":"simplified_auth","expiresAt":null,"isExpired":false}
2025-08-22 11:50:57 [INFO]: 🔧 Calling Bitrix24 API with simplified auth | {"method":"crm.contact.add","domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:50:57 [INFO]: 🔗 Using webhook URL | {"webhookUrl":"https://b24-7woulk.bitrix24.vn/rest/***MASKED***/crm.contact.add","method":"crm.contact.add","hasParams":false}
2025-08-22 11:50:57 [ERROR]: HTTP Response Error Request failed with status code 404 | {"status":404,"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.contact.add","data":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"}}
2025-08-22 11:50:57 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/4403a868007b6943007b3dd1000000014038077d30485d4a1ac9d13a29d9a73f79d9f7/crm.contact.add","error":"Request failed with status code 404"}
2025-08-22 11:50:57 [ERROR]: ❌ Simplified auth API call failed | {"method":"crm.contact.add","error":"Request failed with status code 404","response":{"error":"ERROR_METHOD_NOT_FOUND","error_description":"Method not found!"},"status":404}
2025-08-22 11:50:57 [ERROR]: ❌ Bitrix24 API call failed (attempt 2) | {"method":"crm.contact.add","error":"Method 'crm.contact.add' not available with simplified auth. This method requires OAuth 2.0 with CRM scope."}
2025-08-22 11:51:00 [INFO]: Server running on port 3000
2025-08-22 11:51:00 [INFO]: Environment:
2025-08-22 11:51:12 [INFO]: Request received | {"method":"POST","url":"/?DOMAIN=b24-7woulk.bitrix24.vn&PROTOCOL=1&LANG=vn&APP_SID=ee0c13a595ed3d8cbe872223bbdfa0a9","ip":"::ffff:127.0.0.1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"}
2025-08-22 11:51:12 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:51:12 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:51:12 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:51:12 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:51:12 [INFO]: 🚀 BITRIX24 INSTALLATION REQUEST - FULL DATA | {"headers":{"host":"pens-measure-cgi-byte.trycloudflare.com","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","content-length":"364","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7","accept-encoding":"gzip","accept-language":"vi-VN,vi;q=0.9,fr-FR;q=0.8,fr;q=0.7,en-US;q=0.6,en;q=0.5","cache-control":"max-age=0","cdn-loop":"cloudflare; loops=1; subreqs=1","cf-connecting-ip":"14.224.204.34","cf-ew-via":"15","cf-ipcountry":"VN","cf-ray":"972fc0f5a022037d-HKG","cf-visitor":"{\"scheme\":\"https\"}","cf-warp-tag-id":"203c2c4b-75be-41d2-8778-b256cc9450f3","cf-worker":"trycloudflare.com","connection":"keep-alive","content-type":"application/x-www-form-urlencoded","origin":"https://b24-7woulk.bitrix24.vn","priority":"u=0, i","referer":"https://b24-7woulk.bitrix24.vn/","sec-ch-ua":"\"Not;A=Brand\";v=\"99\", \"Google Chrome\";v=\"139\", \"Chromium\";v=\"139\"","sec-ch-ua-mobile":"?0","sec-ch-ua-platform":"\"macOS\"","sec-fetch-dest":"iframe","sec-fetch-mode":"navigate","sec-fetch-site":"cross-site","sec-fetch-storage-access":"active","upgrade-insecure-requests":"1","x-forwarded-for":"14.224.204.34","x-forwarded-proto":"https"},"query":{"DOMAIN":"b24-7woulk.bitrix24.vn","PROTOCOL":"1","LANG":"vn","APP_SID":"ee0c13a595ed3d8cbe872223bbdfa0a9"},"body":{"AUTH_ID":"5005a868007b6943007b3dd1000000014038073cad8f4e879e6529693e6cc1cd6a4060","AUTH_EXPIRES":"3600","REFRESH_ID":"4084cf68007b6943007b3dd1000000014038071b8d3aa52eeaafa0dcad26e712e05f84","member_id":"78d52900632fa1e9acbd6c03fe41e332","status":"L","PLACEMENT":"DEFAULT","PLACEMENT_OPTIONS":"{\"IFRAME\":\"Y\",\"IFRAME_TYPE\":\"SIDE_SLIDER\",\"any\":\"29\\/\"}"},"rawBody":"{\n  \"AUTH_ID\": \"5005a868007b6943007b3dd1000000014038073cad8f4e879e6529693e6cc1cd6a4060\",\n  \"AUTH_EXPIRES\": \"3600\",\n  \"REFRESH_ID\": \"4084cf68007b6943007b3dd1000000014038071b8d3aa52eeaafa0dcad26e712e05f84\",\n  \"member_id\": \"78d52900632fa1e9acbd6c03fe41e332\",\n  \"status\": \"L\",\n  \"PLACEMENT\": \"DEFAULT\",\n  \"PLACEMENT_OPTIONS\": \"{\\\"IFRAME\\\":\\\"Y\\\",\\\"IFRAME_TYPE\\\":\\\"SIDE_SLIDER\\\",\\\"any\\\":\\\"29\\\\/\\\"}\"\n}","contentType":"application/x-www-form-urlencoded","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","hasAuthData":false,"requestMethod":"POST","originalUrl":"/?DOMAIN=b24-7woulk.bitrix24.vn&PROTOCOL=1&LANG=vn&APP_SID=ee0c13a595ed3d8cbe872223bbdfa0a9"}
2025-08-22 11:51:12 [INFO]: 🎯 PROCESSING INSTALLATION WITH DIRECT AUTH DATA | {"authId":"5005a868007b6943007b...","refreshId":"4084cf68007b6943007b...","authExpires":"3600","memberId":"78d52900632fa1e9acbd6c03fe41e332","status":"L","domain":"b24-7woulk.bitrix24.vn","placement":"DEFAULT","placementOptions":"{\"IFRAME\":\"Y\",\"IFRAME_TYPE\":\"SIDE_SLIDER\",\"any\":\"29\\/\"}"}
2025-08-22 11:51:12 [INFO]: 🎯 Processing installation auth data (Simplified Method) | {"hasAccessToken":true,"hasRefreshToken":true,"domain":"b24-7woulk.bitrix24.vn","expiresIn":"3600","method":"simplified_auth","memberId":"78d52900632fa1e9acbd6c03fe41e332","status":"L"}
2025-08-22 11:51:12 [INFO]: 🔄 Processing OAuth2 flow
2025-08-22 11:51:12 [INFO]: 🎯 Processing OAuth2 flow | {"hasAccessToken":true,"hasRefreshToken":true,"domain":"b24-7woulk.bitrix24.vn"}
2025-08-22 11:51:12 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:51:12 [INFO]: 💾 Token saved to database | {"id":3,"domain":"b24-7woulk.bitrix24.vn","method":"oauth2"}
2025-08-22 11:51:12 [INFO]: 💾 OAuth2 token saved successfully | {"domain":"b24-7woulk.bitrix24.vn","expiresAt":"2025-08-23T15:11:00.896Z","memberId":"78d52900632fa1e9acbd6c03fe41e332"}
2025-08-22 11:51:12 [INFO]: ✅ SIMPLIFIED AUTH PROCESSED SUCCESSFULLY | {"domain":"b24-7woulk.bitrix24.vn","memberId":"78d52900632fa1e9acbd6c03fe41e332","hasAccessToken":false,"hasRefreshToken":false}
2025-08-22 11:51:12 [INFO]: Request completed | {"method":"POST","url":"/?DOMAIN=b24-7woulk.bitrix24.vn&PROTOCOL=1&LANG=vn&APP_SID=ee0c13a595ed3d8cbe872223bbdfa0a9","statusCode":200,"duration":17,"ip":"::ffff:127.0.0.1"}
2025-08-22 11:51:33 [INFO]: Request received | {"method":"POST","url":"/webhook/jotform","ip":"::ffff:127.0.0.1"}
2025-08-22 11:51:33 [INFO]: Jotform webhook received | {"submissionID":"6316474930217584365","hasRawRequest":true,"ip":"::ffff:127.0.0.1"}
2025-08-22 11:51:33 [INFO]: Contact data parsed | {"submissionId":"6316474930217584365","fullName":"Huy Tran","email":"tuanhuy227@gmail.com","phone":"(097) 828-1798"}
2025-08-22 11:51:33 [INFO]: 🔍 Testing available API methods
2025-08-22 11:51:33 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"user.current","hasParams":false}
2025-08-22 11:51:33 [INFO]: 📖 Token loaded from database | {"id":3,"domain":"b24-7woulk.bitrix24.vn","method":"oauth2","expiresAt":"2025-08-23T15:11:00.896Z","isExpired":false}
2025-08-22 11:51:34 [ERROR]: HTTP Response Error Request failed with status code 401 | {"status":401,"url":"https://b24-7woulk.bitrix24.vn/rest/user.current","data":{"error":"insufficient_scope","error_description":"The request requires higher privileges than provided by the access token"}}
2025-08-22 11:51:34 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/user.current","error":"Request failed with status code 401"}
2025-08-22 11:51:34 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"user.current","error":"Request failed with status code 401","response":{"error":"insufficient_scope","error_description":"The request requires higher privileges than provided by the access token"},"status":401}
2025-08-22 11:51:34 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"crm.lead.fields","hasParams":false}
2025-08-22 11:51:34 [INFO]: 📖 Token loaded from database | {"id":3,"domain":"b24-7woulk.bitrix24.vn","method":"oauth2","expiresAt":"2025-08-23T15:11:00.896Z","isExpired":false}
2025-08-22 11:51:34 [INFO]: ✅ Bitrix24 API call successful | {"method":"crm.lead.fields","hasResult":true,"time":0.04822206497192383,"authMethod":"oauth2"}
2025-08-22 11:51:34 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"crm.lead.add","hasParams":false}
2025-08-22 11:51:34 [INFO]: 📖 Token loaded from database | {"id":3,"domain":"b24-7woulk.bitrix24.vn","method":"oauth2","expiresAt":"2025-08-23T15:11:00.896Z","isExpired":false}
2025-08-22 11:51:36 [INFO]: ✅ Bitrix24 API call successful | {"method":"crm.lead.add","hasResult":true,"time":1.121387004852295,"authMethod":"oauth2"}
2025-08-22 11:51:36 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"crm.contact.fields","hasParams":false}
2025-08-22 11:51:36 [INFO]: 📖 Token loaded from database | {"id":3,"domain":"b24-7woulk.bitrix24.vn","method":"oauth2","expiresAt":"2025-08-23T15:11:00.896Z","isExpired":false}
2025-08-22 11:51:36 [INFO]: ✅ Bitrix24 API call successful | {"method":"crm.contact.fields","hasResult":true,"time":0.03273582458496094,"authMethod":"oauth2"}
2025-08-22 11:51:36 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"crm.contact.add","hasParams":false}
2025-08-22 11:51:36 [INFO]: 📖 Token loaded from database | {"id":3,"domain":"b24-7woulk.bitrix24.vn","method":"oauth2","expiresAt":"2025-08-23T15:11:00.896Z","isExpired":false}
2025-08-22 11:51:37 [INFO]: ✅ Bitrix24 API call successful | {"method":"crm.contact.add","hasResult":true,"time":0.13815999031066895,"authMethod":"oauth2"}
2025-08-22 11:51:37 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"app.info","hasParams":false}
2025-08-22 11:51:37 [INFO]: 📖 Token loaded from database | {"id":3,"domain":"b24-7woulk.bitrix24.vn","method":"oauth2","expiresAt":"2025-08-23T15:11:00.896Z","isExpired":false}
2025-08-22 11:51:37 [INFO]: ✅ Bitrix24 API call successful | {"method":"app.info","hasResult":true,"time":0.02611708641052246,"authMethod":"oauth2"}
2025-08-22 11:51:37 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"placement.bind","hasParams":false}
2025-08-22 11:51:37 [INFO]: 📖 Token loaded from database | {"id":3,"domain":"b24-7woulk.bitrix24.vn","method":"oauth2","expiresAt":"2025-08-23T15:11:00.896Z","isExpired":false}
2025-08-22 11:51:37 [ERROR]: HTTP Response Error Request failed with status code 401 | {"status":401,"url":"https://b24-7woulk.bitrix24.vn/rest/placement.bind","data":{"error":"insufficient_scope","error_description":"The request requires higher privileges than provided by the access token"}}
2025-08-22 11:51:37 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/placement.bind","error":"Request failed with status code 401"}
2025-08-22 11:51:37 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"placement.bind","error":"Request failed with status code 401","response":{"error":"insufficient_scope","error_description":"The request requires higher privileges than provided by the access token"},"status":401}
2025-08-22 11:51:37 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"placement.unbind","hasParams":false}
2025-08-22 11:51:37 [INFO]: 📖 Token loaded from database | {"id":3,"domain":"b24-7woulk.bitrix24.vn","method":"oauth2","expiresAt":"2025-08-23T15:11:00.896Z","isExpired":false}
2025-08-22 11:51:38 [ERROR]: HTTP Response Error Request failed with status code 401 | {"status":401,"url":"https://b24-7woulk.bitrix24.vn/rest/placement.unbind","data":{"error":"insufficient_scope","error_description":"The request requires higher privileges than provided by the access token"}}
2025-08-22 11:51:38 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/placement.unbind","error":"Request failed with status code 401"}
2025-08-22 11:51:38 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"placement.unbind","error":"Request failed with status code 401","response":{"error":"insufficient_scope","error_description":"The request requires higher privileges than provided by the access token"},"status":401}
2025-08-22 11:51:38 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"event.bind","hasParams":false}
2025-08-22 11:51:38 [INFO]: 📖 Token loaded from database | {"id":3,"domain":"b24-7woulk.bitrix24.vn","method":"oauth2","expiresAt":"2025-08-23T15:11:00.896Z","isExpired":false}
2025-08-22 11:51:38 [ERROR]: HTTP Response Error Request failed with status code 400 | {"status":400,"url":"https://b24-7woulk.bitrix24.vn/rest/event.bind","data":{"error":"ERROR_ARGUMENT","error_description":"Argument 'EVENT' is null or empty","argument":"EVENT"}}
2025-08-22 11:51:38 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/event.bind","error":"Request failed with status code 400"}
2025-08-22 11:51:38 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"event.bind","error":"Request failed with status code 400","response":{"error":"ERROR_ARGUMENT","error_description":"Argument 'EVENT' is null or empty","argument":"EVENT"},"status":400}
2025-08-22 11:51:38 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"event.unbind","hasParams":false}
2025-08-22 11:51:38 [INFO]: 📖 Token loaded from database | {"id":3,"domain":"b24-7woulk.bitrix24.vn","method":"oauth2","expiresAt":"2025-08-23T15:11:00.896Z","isExpired":false}
2025-08-22 11:51:38 [ERROR]: HTTP Response Error Request failed with status code 400 | {"status":400,"url":"https://b24-7woulk.bitrix24.vn/rest/event.unbind","data":{"error":"ERROR_ARGUMENT","error_description":"Argument 'EVENT' is null or empty","argument":"EVENT"}}
2025-08-22 11:51:38 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/event.unbind","error":"Request failed with status code 400"}
2025-08-22 11:51:38 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"event.unbind","error":"Request failed with status code 400","response":{"error":"ERROR_ARGUMENT","error_description":"Argument 'EVENT' is null or empty","argument":"EVENT"},"status":400}
2025-08-22 11:51:38 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"scope","hasParams":false}
2025-08-22 11:51:38 [INFO]: 📖 Token loaded from database | {"id":3,"domain":"b24-7woulk.bitrix24.vn","method":"oauth2","expiresAt":"2025-08-23T15:11:00.896Z","isExpired":false}
2025-08-22 11:51:39 [INFO]: ✅ Bitrix24 API call successful | {"method":"scope","hasResult":true,"time":0.021723031997680664,"authMethod":"oauth2"}
2025-08-22 11:51:39 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"methods","hasParams":false}
2025-08-22 11:51:39 [INFO]: 📖 Token loaded from database | {"id":3,"domain":"b24-7woulk.bitrix24.vn","method":"oauth2","expiresAt":"2025-08-23T15:11:00.896Z","isExpired":false}
2025-08-22 11:51:39 [INFO]: ✅ Bitrix24 API call successful | {"method":"methods","hasResult":true,"time":0.019700050354003906,"authMethod":"oauth2"}
2025-08-22 11:51:39 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"app.option.get","hasParams":false}
2025-08-22 11:51:39 [INFO]: 📖 Token loaded from database | {"id":3,"domain":"b24-7woulk.bitrix24.vn","method":"oauth2","expiresAt":"2025-08-23T15:11:00.896Z","isExpired":false}
2025-08-22 11:51:39 [INFO]: ✅ Bitrix24 API call successful | {"method":"app.option.get","hasResult":true,"time":0.028512001037597656,"authMethod":"oauth2"}
2025-08-22 11:51:39 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"app.option.set","hasParams":false}
2025-08-22 11:51:39 [INFO]: 📖 Token loaded from database | {"id":3,"domain":"b24-7woulk.bitrix24.vn","method":"oauth2","expiresAt":"2025-08-23T15:11:00.896Z","isExpired":false}
2025-08-22 11:51:40 [ERROR]: HTTP Response Error Request failed with status code 400 | {"status":400,"url":"https://b24-7woulk.bitrix24.vn/rest/app.option.set","data":{"error":"ERROR_ARGUMENT","error_description":"Argument 'options' is null or empty","argument":"options"}}
2025-08-22 11:51:40 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/app.option.set","error":"Request failed with status code 400"}
2025-08-22 11:51:40 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"app.option.set","error":"Request failed with status code 400","response":{"error":"ERROR_ARGUMENT","error_description":"Argument 'options' is null or empty","argument":"options"},"status":400}
2025-08-22 11:51:40 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"user.get","hasParams":false}
2025-08-22 11:51:40 [INFO]: 📖 Token loaded from database | {"id":3,"domain":"b24-7woulk.bitrix24.vn","method":"oauth2","expiresAt":"2025-08-23T15:11:00.896Z","isExpired":false}
2025-08-22 11:51:40 [ERROR]: HTTP Response Error Request failed with status code 401 | {"status":401,"url":"https://b24-7woulk.bitrix24.vn/rest/user.get","data":{"error":"insufficient_scope","error_description":"The request requires higher privileges than provided by the access token"}}
2025-08-22 11:51:40 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/user.get","error":"Request failed with status code 401"}
2025-08-22 11:51:40 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"user.get","error":"Request failed with status code 401","response":{"error":"insufficient_scope","error_description":"The request requires higher privileges than provided by the access token"},"status":401}
2025-08-22 11:51:40 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"user.access","hasParams":false}
2025-08-22 11:51:40 [INFO]: 📖 Token loaded from database | {"id":3,"domain":"b24-7woulk.bitrix24.vn","method":"oauth2","expiresAt":"2025-08-23T15:11:00.896Z","isExpired":false}
2025-08-22 11:51:41 [INFO]: ✅ Bitrix24 API call successful | {"method":"user.access","hasResult":true,"time":0.026543140411376953,"authMethod":"oauth2"}
2025-08-22 11:51:41 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"user.option.get","hasParams":false}
2025-08-22 11:51:41 [INFO]: 📖 Token loaded from database | {"id":3,"domain":"b24-7woulk.bitrix24.vn","method":"oauth2","expiresAt":"2025-08-23T15:11:00.896Z","isExpired":false}
2025-08-22 11:51:41 [INFO]: ✅ Bitrix24 API call successful | {"method":"user.option.get","hasResult":true,"time":0.022053003311157227,"authMethod":"oauth2"}
2025-08-22 11:51:41 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"user.option.set","hasParams":false}
2025-08-22 11:51:41 [INFO]: 📖 Token loaded from database | {"id":3,"domain":"b24-7woulk.bitrix24.vn","method":"oauth2","expiresAt":"2025-08-23T15:11:00.896Z","isExpired":false}
2025-08-22 11:51:41 [ERROR]: HTTP Response Error Request failed with status code 400 | {"status":400,"url":"https://b24-7woulk.bitrix24.vn/rest/user.option.set","data":{"error":"ERROR_ARGUMENT","error_description":"Argument 'options' is null or empty","argument":"options"}}
2025-08-22 11:51:41 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/user.option.set","error":"Request failed with status code 400"}
2025-08-22 11:51:41 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"user.option.set","error":"Request failed with status code 400","response":{"error":"ERROR_ARGUMENT","error_description":"Argument 'options' is null or empty","argument":"options"},"status":400}
2025-08-22 11:51:41 [INFO]: 📊 Available methods test results | {"user.current":{"success":false,"error":"Bitrix24 API call failed: Request failed with status code 401"},"crm.lead.fields":{"success":true,"hasResult":true},"crm.lead.add":{"success":true,"hasResult":true},"crm.contact.fields":{"success":true,"hasResult":true},"crm.contact.add":{"success":true,"hasResult":true},"app.info":{"success":true,"hasResult":true},"placement.bind":{"success":false,"error":"Bitrix24 API call failed: Request failed with status code 401"},"placement.unbind":{"success":false,"error":"Bitrix24 API call failed: Request failed with status code 401"},"event.bind":{"success":false,"error":"Bitrix24 API call failed: Request failed with status code 400"},"event.unbind":{"success":false,"error":"Bitrix24 API call failed: Request failed with status code 400"},"scope":{"success":true,"hasResult":true},"methods":{"success":true,"hasResult":true},"app.option.get":{"success":true,"hasResult":true},"app.option.set":{"success":false,"error":"Bitrix24 API call failed: Request failed with status code 400"},"user.get":{"success":false,"error":"Bitrix24 API call failed: Request failed with status code 401"},"user.access":{"success":true,"hasResult":true},"user.option.get":{"success":true,"hasResult":true},"user.option.set":{"success":false,"error":"Bitrix24 API call failed: Request failed with status code 400"}}
2025-08-22 11:51:41 [INFO]: Creating Bitrix24 lead with simplified auth | {"submissionId":"6316474930217584365","leadTitle":"Jotform Lead: Huy Tran","hasName":true,"hasEmail":true,"hasPhone":true}
2025-08-22 11:51:41 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"crm.lead.add","hasParams":true}
2025-08-22 11:51:41 [INFO]: 📖 Token loaded from database | {"id":3,"domain":"b24-7woulk.bitrix24.vn","method":"oauth2","expiresAt":"2025-08-23T15:11:00.896Z","isExpired":false}
2025-08-22 11:51:42 [INFO]: ✅ Bitrix24 API call successful | {"method":"crm.lead.add","hasResult":true,"time":0.4710659980773926,"authMethod":"oauth2"}
2025-08-22 11:51:42 [INFO]: Lead created successfully in Bitrix24 | {"leadId":15,"submissionId":"6316474930217584365"}
2025-08-22 11:51:42 [INFO]: Lead created successfully | {"submissionId":"6316474930217584365","leadId":15,"duration":8717}
2025-08-22 11:52:50 [INFO]: Server running on port 3000
2025-08-22 11:52:50 [INFO]: Environment:
2025-08-22 11:52:52 [INFO]: Server running on port 3000
2025-08-22 11:52:52 [INFO]: Environment:
2025-08-22 11:53:17 [INFO]: Server running on port 3000
2025-08-22 11:53:17 [INFO]: Environment:
2025-08-22 11:53:32 [INFO]: Server running on port 3000
2025-08-22 11:53:32 [INFO]: Environment:
2025-08-22 11:54:43 [INFO]: Server running on port 3000
2025-08-22 11:54:43 [INFO]: Environment:
2025-08-22 11:54:47 [INFO]: Server running on port 3000
2025-08-22 11:54:47 [INFO]: Environment:
2025-08-22 11:55:08 [INFO]: Request received | {"method":"GET","url":"/","ip":"::ffff:127.0.0.1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"}
2025-08-22 11:55:08 [INFO]: Request completed | {"method":"GET","url":"/","statusCode":304,"duration":6,"ip":"::ffff:127.0.0.1"}
2025-08-22 11:55:15 [INFO]: Request received | {"method":"GET","url":"/api/simplified-auth-test","ip":"::1","userAgent":"curl/8.6.0"}
2025-08-22 11:55:15 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:55:15 [INFO]: 🔗 Connected to SQLite database | {"dbPath":"/Users/tuanhuytran/jotform-bitrix24-integration/data/tokens.db"}
2025-08-22 11:55:15 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:55:15 [INFO]: 🔧 Bitrix24NewService initialized | {"clientId":"***","domain":"b24-7woulk.bitrix24.vn","redirectUri":"https://mitsubishi-touch-outlet-attack.trycloudflare.com/oauth/callback"}
2025-08-22 11:55:15 [INFO]: API: Testing simplified auth capabilities (optimized)
2025-08-22 11:55:15 [INFO]: ✅ Database tables initialized successfully
2025-08-22 11:55:15 [INFO]: 📖 Token loaded from database | {"id":3,"domain":"b24-7woulk.bitrix24.vn","method":"oauth2","expiresAt":"2025-08-23T15:11:00.896Z","isExpired":false}
2025-08-22 11:55:15 [INFO]: 🔍 Testing available API methods (optimized)
2025-08-22 11:55:15 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"user.current","hasParams":false}
2025-08-22 11:55:15 [INFO]: 📖 Token loaded from database | {"id":3,"domain":"b24-7woulk.bitrix24.vn","method":"oauth2","expiresAt":"2025-08-23T15:11:00.896Z","isExpired":false}
2025-08-22 11:55:16 [ERROR]: HTTP Response Error Request failed with status code 401 | {"status":401,"url":"https://b24-7woulk.bitrix24.vn/rest/user.current","data":{"error":"insufficient_scope","error_description":"The request requires higher privileges than provided by the access token"}}
2025-08-22 11:55:16 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/user.current","error":"Request failed with status code 401"}
2025-08-22 11:55:16 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"user.current","error":"Request failed with status code 401","response":{"error":"insufficient_scope","error_description":"The request requires higher privileges than provided by the access token"},"status":401}
2025-08-22 11:55:16 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"crm.lead.add","hasParams":false}
2025-08-22 11:55:16 [INFO]: 📖 Token loaded from database | {"id":3,"domain":"b24-7woulk.bitrix24.vn","method":"oauth2","expiresAt":"2025-08-23T15:11:00.896Z","isExpired":false}
2025-08-22 11:55:16 [INFO]: ✅ Bitrix24 API call successful | {"method":"crm.lead.add","hasResult":true,"time":0.42973804473876953,"authMethod":"oauth2"}
2025-08-22 11:55:16 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"crm.contact.add","hasParams":false}
2025-08-22 11:55:16 [INFO]: 📖 Token loaded from database | {"id":3,"domain":"b24-7woulk.bitrix24.vn","method":"oauth2","expiresAt":"2025-08-23T15:11:00.896Z","isExpired":false}
2025-08-22 11:55:17 [INFO]: ✅ Bitrix24 API call successful | {"method":"crm.contact.add","hasResult":true,"time":0.11575794219970703,"authMethod":"oauth2"}
2025-08-22 11:55:17 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"app.info","hasParams":false}
2025-08-22 11:55:17 [INFO]: 📖 Token loaded from database | {"id":3,"domain":"b24-7woulk.bitrix24.vn","method":"oauth2","expiresAt":"2025-08-23T15:11:00.896Z","isExpired":false}
2025-08-22 11:55:17 [INFO]: ✅ Bitrix24 API call successful | {"method":"app.info","hasResult":true,"time":0.022745847702026367,"authMethod":"oauth2"}
2025-08-22 11:55:17 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"scope","hasParams":false}
2025-08-22 11:55:17 [INFO]: 📖 Token loaded from database | {"id":3,"domain":"b24-7woulk.bitrix24.vn","method":"oauth2","expiresAt":"2025-08-23T15:11:00.896Z","isExpired":false}
2025-08-22 11:55:18 [INFO]: ✅ Bitrix24 API call successful | {"method":"scope","hasResult":true,"time":0.021188020706176758,"authMethod":"oauth2"}
2025-08-22 11:55:18 [INFO]: 📊 Available methods test results (optimized) | {"total":5,"successful":4,"methods":["user.current","crm.lead.add","crm.contact.add","app.info","scope"]}
2025-08-22 11:55:18 [INFO]: Request completed | {"method":"GET","url":"/simplified-auth-test","statusCode":200,"duration":2336,"ip":"::1"}
2025-08-22 11:56:51 [INFO]: Request received | {"method":"POST","url":"/webhook/jotform","ip":"::ffff:127.0.0.1"}
2025-08-22 11:56:51 [INFO]: Jotform webhook received | {"submissionID":"6316478100213248080","hasRawRequest":true,"ip":"::ffff:127.0.0.1"}
2025-08-22 11:56:51 [INFO]: Contact data parsed | {"submissionId":"6316478100213248080","fullName":"Huy211 Tran","email":"tuanhuy227@gmail.com","phone":"(097) 828-1798"}
2025-08-22 11:56:51 [INFO]: 📖 Token loaded from database | {"id":3,"domain":"b24-7woulk.bitrix24.vn","method":"oauth2","expiresAt":"2025-08-23T15:11:00.896Z","isExpired":false}
2025-08-22 11:56:51 [INFO]: 🔑 Using OAuth2 token for lead creation | {"submissionId":"6316478100213248080","domain":"b24-7woulk.bitrix24.vn"}
2025-08-22 11:56:51 [INFO]: Creating Bitrix24 lead with OAuth2 | {"submissionId":"6316478100213248080","leadTitle":"Jotform Lead: Huy211 Tran","hasName":true,"hasEmail":true,"hasPhone":true}
2025-08-22 11:56:51 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"crm.lead.add","hasParams":true}
2025-08-22 11:56:51 [INFO]: 📖 Token loaded from database | {"id":3,"domain":"b24-7woulk.bitrix24.vn","method":"oauth2","expiresAt":"2025-08-23T15:11:00.896Z","isExpired":false}
2025-08-22 11:56:52 [INFO]: ✅ Bitrix24 API call successful | {"method":"crm.lead.add","hasResult":true,"time":0.4703788757324219,"authMethod":"oauth2"}
2025-08-22 11:56:52 [INFO]: Lead created successfully in Bitrix24 | {"leadId":19,"submissionId":"6316478100213248080"}
2025-08-22 11:56:52 [INFO]: Lead created successfully | {"submissionId":"6316478100213248080","leadId":19,"duration":920}
2025-08-22 11:56:52 [INFO]: Request completed | {"method":"POST","url":"/jotform","statusCode":200,"duration":932,"ip":"::ffff:127.0.0.1"}
2025-08-22 13:40:24 [INFO]: Request received | {"method":"POST","url":"/webhook/jotform","ip":"::ffff:127.0.0.1"}
2025-08-22 13:40:24 [INFO]: Jotform webhook received | {"submissionID":"6316540220217240084","hasRawRequest":true,"ip":"::ffff:127.0.0.1"}
2025-08-22 13:40:24 [INFO]: Contact data parsed | {"submissionId":"6316540220217240084","fullName":"Huy Tran","email":"tuanhuy227@gmail.com","phone":"(097) 828-1798"}
2025-08-22 13:40:24 [INFO]: 📖 Token loaded from database | {"id":3,"domain":"b24-7woulk.bitrix24.vn","method":"oauth2","expiresAt":"2025-08-23T15:11:00.896Z","isExpired":false}
2025-08-22 13:40:24 [INFO]: 🔑 Using OAuth2 token for lead creation | {"submissionId":"6316540220217240084","domain":"b24-7woulk.bitrix24.vn"}
2025-08-22 13:40:24 [INFO]: Creating Bitrix24 lead with OAuth2 | {"submissionId":"6316540220217240084","leadTitle":"Jotform Lead: Huy Tran","hasName":true,"hasEmail":true,"hasPhone":true}
2025-08-22 13:40:24 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"crm.lead.add","hasParams":true}
2025-08-22 13:40:24 [INFO]: 📖 Token loaded from database | {"id":3,"domain":"b24-7woulk.bitrix24.vn","method":"oauth2","expiresAt":"2025-08-23T15:11:00.896Z","isExpired":false}
2025-08-22 13:40:25 [ERROR]: HTTP Response Error Request failed with status code 401 | {"status":401,"url":"https://b24-7woulk.bitrix24.vn/rest/crm.lead.add","data":{"error":"expired_token","error_description":"The access token provided has expired."}}
2025-08-22 13:40:25 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/crm.lead.add","error":"Request failed with status code 401"}
2025-08-22 13:40:25 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"crm.lead.add","error":"Request failed with status code 401","response":{"error":"expired_token","error_description":"The access token provided has expired."},"status":401}
2025-08-22 13:40:25 [ERROR]: Error creating Bitrix24 lead | {"error":"Bitrix24 API call failed: Request failed with status code 401","submissionId":"6316540220217240084"}
2025-08-22 13:40:25 [ERROR]: Failed to create lead | {"submissionId":"6316540220217240084","error":"Bitrix24 API call failed: Request failed with status code 401","duration":1163}
2025-08-22 13:40:25 [INFO]: Request completed | {"method":"POST","url":"/jotform","statusCode":500,"duration":1201,"ip":"::ffff:127.0.0.1"}
2025-08-22 13:41:15 [INFO]: Request received | {"method":"POST","url":"/webhook/jotform","ip":"::ffff:127.0.0.1"}
2025-08-22 13:41:15 [INFO]: Jotform webhook received | {"submissionID":"6316540740214693774","hasRawRequest":true,"ip":"::ffff:127.0.0.1"}
2025-08-22 13:41:15 [INFO]: Contact data parsed | {"submissionId":"6316540740214693774","fullName":"Huy211 Tran","email":"tuanhuy227@gmail.com","phone":"(097) 828-1798"}
2025-08-22 13:41:15 [INFO]: 📖 Token loaded from database | {"id":3,"domain":"b24-7woulk.bitrix24.vn","method":"oauth2","expiresAt":"2025-08-23T15:11:00.896Z","isExpired":false}
2025-08-22 13:41:15 [INFO]: 🔑 Using OAuth2 token for lead creation | {"submissionId":"6316540740214693774","domain":"b24-7woulk.bitrix24.vn"}
2025-08-22 13:41:15 [INFO]: Creating Bitrix24 lead with OAuth2 | {"submissionId":"6316540740214693774","leadTitle":"Jotform Lead: Huy211 Tran","hasName":true,"hasEmail":true,"hasPhone":true}
2025-08-22 13:41:15 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"crm.lead.add","hasParams":true}
2025-08-22 13:41:15 [INFO]: 📖 Token loaded from database | {"id":3,"domain":"b24-7woulk.bitrix24.vn","method":"oauth2","expiresAt":"2025-08-23T15:11:00.896Z","isExpired":false}
2025-08-22 13:41:16 [ERROR]: HTTP Response Error Request failed with status code 401 | {"status":401,"url":"https://b24-7woulk.bitrix24.vn/rest/crm.lead.add","data":{"error":"expired_token","error_description":"The access token provided has expired."}}
2025-08-22 13:41:16 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/crm.lead.add","error":"Request failed with status code 401"}
2025-08-22 13:41:16 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"crm.lead.add","error":"Request failed with status code 401","response":{"error":"expired_token","error_description":"The access token provided has expired."},"status":401}
2025-08-22 13:41:16 [ERROR]: Error creating Bitrix24 lead | {"error":"Bitrix24 API call failed: Request failed with status code 401","submissionId":"6316540740214693774"}
2025-08-22 13:41:16 [ERROR]: Failed to create lead | {"submissionId":"6316540740214693774","error":"Bitrix24 API call failed: Request failed with status code 401","duration":460}
2025-08-22 13:41:16 [INFO]: Request completed | {"method":"POST","url":"/jotform","statusCode":500,"duration":467,"ip":"::ffff:127.0.0.1"}
2025-08-22 13:43:16 [INFO]: Request received | {"method":"POST","url":"/webhook/test","ip":"::1","userAgent":"curl/8.6.0"}
2025-08-22 13:43:16 [INFO]: Test webhook called
2025-08-22 13:43:16 [INFO]: 📖 Token loaded from database | {"id":3,"domain":"b24-7woulk.bitrix24.vn","method":"oauth2","expiresAt":"2025-08-23T15:11:00.896Z","isExpired":false}
2025-08-22 13:43:16 [INFO]: 🔑 Using OAuth2 token for lead creation | {"submissionId":"test_1755844996167","domain":"b24-7woulk.bitrix24.vn"}
2025-08-22 13:43:16 [INFO]: Creating Bitrix24 lead with OAuth2 | {"submissionId":"test_1755844996167","leadTitle":"Jotform Lead: Test User","hasName":true,"hasEmail":true,"hasPhone":true}
2025-08-22 13:43:16 [INFO]: 🔄 Calling Bitrix24 API (attempt 1) | {"method":"crm.lead.add","hasParams":true}
2025-08-22 13:43:16 [INFO]: 📖 Token loaded from database | {"id":3,"domain":"b24-7woulk.bitrix24.vn","method":"oauth2","expiresAt":"2025-08-23T15:11:00.896Z","isExpired":false}
2025-08-22 13:43:16 [ERROR]: HTTP Response Error Request failed with status code 401 | {"status":401,"url":"https://b24-7woulk.bitrix24.vn/rest/crm.lead.add","data":{"error":"expired_token","error_description":"The access token provided has expired."}}
2025-08-22 13:43:16 [ERROR]: POST request failed | {"url":"https://b24-7woulk.bitrix24.vn/rest/crm.lead.add","error":"Request failed with status code 401"}
2025-08-22 13:43:16 [ERROR]: ❌ Bitrix24 API call failed (attempt 1) | {"method":"crm.lead.add","error":"Request failed with status code 401","response":{"error":"expired_token","error_description":"The access token provided has expired."},"status":401}
2025-08-22 13:43:16 [ERROR]: Error creating Bitrix24 lead | {"error":"Bitrix24 API call failed: Request failed with status code 401","submissionId":"test_1755844996167"}
2025-08-22 13:43:16 [INFO]: Request completed | {"method":"POST","url":"/test","statusCode":500,"duration":445,"ip":"::1"}
2025-08-22 13:46:26 [INFO]: Server running on port 3000
2025-08-22 13:46:26 [INFO]: Environment:
2025-08-22 13:46:42 [INFO]: Server running on port 3000
2025-08-22 13:46:42 [INFO]: Environment:
2025-08-22 13:46:50 [INFO]: Server running on port 3000
2025-08-22 13:46:50 [INFO]: Environment:
